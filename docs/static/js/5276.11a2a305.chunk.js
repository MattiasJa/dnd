(self.webpackChunkhack2503=self.webpackChunkhack2503||[]).push([[2037,4016,5276,6328],{2590:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});class s{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const s=t[i];this.setResource(s,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){const i=this.resources[e];t!==i&&(i&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){const t=this.resources;for(const e in t){const i=t[e];i.off?.("change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}},3202:(t,e,i)=>{"use strict";i.d(e,{W:()=>a});var s=i(8186),n=i(36904),r=i(86675);let o=0;const a=new class{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){const s=new n.v({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new r.g({source:s,label:"texturePool_"+o++})}getOptimalTexture(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,r=Math.ceil(t*i-1e-6),o=Math.ceil(e*i-1e-6);r=(0,s.U5)(r),o=(0,s.U5)(o);const a=(r<<17)+(o<<1)+(n?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let l=this._texturePool[a].pop();return l||(l=this.createTexture(r,o,n)),l.source._resolution=i,l.source.width=r/i,l.source.height=o/i,l.source.pixelWidth=r,l.source.pixelHeight=o,l.frame.x=0,l.frame.y=0,l.frame.width=t,l.frame.height=e,l.updateUvs(),this._poolKeyHash[l.uid]=a,l}getSameSizeTexture(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=!1!==t)for(const e in this._texturePool){const t=this._texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this._texturePool={}}}},3772:(t,e,i)=>{"use strict";function s(t,e,i){const s=t.length;let n;if(e>=s||0===i)return;const r=s-(i=e+i>s?s-e:i);for(n=e;n<r;++n)t[n]=t[n+i];t.length=r}i.d(e,{d:()=>s})},4395:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var s=i(14811),n=i(48674),r=i(27379);class o extends n.l{constructor(t){t instanceof r.T&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",this._context=e||(this._ownedContext=new r.T),this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):!0!==t&&!0!==t?.context||this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("setFillStyle",e)}setStrokeStyle(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("setStrokeStyle",e)}fill(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("fill",e)}stroke(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("stroke",e)}texture(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("arc",e)}arcTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("arcTo",e)}arcToSvg(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("arcToSvg",e)}bezierCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("ellipse",e)}circle(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("circle",e)}path(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("path",e)}lineTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("lineTo",e)}moveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("moveTo",e)}quadraticCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("quadraticCurveTo",e)}rect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("rect",e)}roundRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundRect",e)}poly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("poly",e)}regularPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("regularPoly",e)}roundPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundPoly",e)}roundShape(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundShape",e)}filletRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("filletRect",e)}chamferRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("chamferRect",e)}star(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("star",e)}svg(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("svg",e)}restore(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("rotate",e)}scaleTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("scale",e)}setTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("setTransform",e)}transform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("transform",e)}translateTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return new o(this._context.clone());this._ownedContext=null;return new o(this._context)}lineStyle(t,e,i){(0,s.t6)(s.lj,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const n={};return t&&(n.width=t),e&&(n.color=e),i&&(n.alpha=i),this.context.strokeStyle=n,this}beginFill(t,e){(0,s.t6)(s.lj,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return void 0!==t&&(i.color=t),void 0!==e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){(0,s.t6)(s.lj,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return t.width===r.T.defaultStrokeStyle.width&&t.color===r.T.defaultStrokeStyle.color&&t.alpha===r.T.defaultStrokeStyle.alpha||this.context.stroke(),this}drawCircle(){(0,s.t6)(s.lj,"Graphics#drawCircle has been renamed to Graphics#circle");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("circle",e)}drawEllipse(){(0,s.t6)(s.lj,"Graphics#drawEllipse has been renamed to Graphics#ellipse");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("ellipse",e)}drawPolygon(){(0,s.t6)(s.lj,"Graphics#drawPolygon has been renamed to Graphics#poly");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("poly",e)}drawRect(){(0,s.t6)(s.lj,"Graphics#drawRect has been renamed to Graphics#rect");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("rect",e)}drawRoundedRect(){(0,s.t6)(s.lj,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundRect",e)}drawStar(){(0,s.t6)(s.lj,"Graphics#drawStar has been renamed to Graphics#star");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("star",e)}}},4841:(t,e,i)=>{"use strict";function s(t){const e={};for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}i.d(e,{S:()=>s})},5222:(t,e,i)=>{"use strict";i.d(e,{k:()=>h});var s=i(42026),n=i(30801);const r=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],o=r.reduce(((t,e)=>(t[e]=!0,t)),{});function a(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const l=class t{constructor(e,i){this._touched=0,this.uid=(0,s.L)("uniform"),this._resourceType="uniformGroup",this._resourceId=(0,s.L)("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...t.defaultOptions,...i},this.uniformStructures=e;const l={};for(const t in e){const i=e[t];if(i.name=t,i.size=i.size??1,!o[i.type])throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${r.join(", ")}`);i.value??(i.value=a(i.type,i.size)),l[t]=i.value}this.uniforms=l,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=(0,n.X)(Object.keys(l).map((t=>`${t}-${e[t].type}`)).join("-"),"uniform-group")}update(){this._dirtyId++}};l.defaultOptions={ubo:!1,isStatic:!1};let h=l},5588:(t,e,i)=>{"use strict";i.d(e,{BB:()=>s,GP:()=>n,Tz:()=>r});const s=window.requestIdleCallback||function(t){return setTimeout((()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,50)})}),50)},n=window.cancelIdleCallback||clearTimeout;function r(t){let e,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return function(){const a=arguments,l=()=>{e=null,r=t(...a)};return"idle"===o?(i&&n(i),i=s((()=>{r=t(...a)}))):(clearTimeout(e),e=setTimeout(l,o)),r}}},8186:(t,e,i)=>{"use strict";function s(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function n(t){return!(t&t-1)&&!!t}i.d(e,{U5:()=>s,f3:()=>n})},10087:(t,e,i)=>{"use strict";i.d(e,{W:()=>r});var s=i(23144);let n;function r(){if(!n||n?.isContextLost()){const t=s.e.get().createCanvas();n=t.getContext("webgl",{})}return n}},10431:(t,e,i)=>{"use strict";i.d(e,{K:()=>s});const s=t=>class extends t{constructor(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];super(e),this._animationFrame=null,this._callback=this._callback.bind(this)}connectedCallback(){super.connectedCallback(),null===this._resizeObserverElem()&&this._installResizeObserver(this)}disconnectedCallback(){super.disconnectedCallback(),this._uninstallResizeObserver(this)}_installResizeObserver(t){if(this._resizeObserver=new ResizeObserver(this._callback),this._resizeObserver.observe(t),new Set(["inline","contents"]).has(window.getComputedStyle(t).display))throw new Error("ResizeObserver do nothing on inline elements")}_uninstallResizeObserver(t){this._resizeObserver&&(this._resizeObserver.unobserve(t),this._resizeObserver.disconnect())}_resizeObserverElem(){return null}_callback(t){this._animationFrame||(this._animationFrame=window.requestAnimationFrame((()=>{this._animationFrame=null,this._resizeObserverCallback(t)})))}}},10973:t=>{"use strict";function e(t,e,s){s=s||2;var r,o,a,l,d,u,f,g=e&&e.length,v=g?e[0]*s:t.length,y=i(t,0,v,s,!0),m=[];if(!y||y.next===y.prev)return m;if(g&&(y=function(t,e,s,n){var r,o,a,l=[];for(r=0,o=e.length;r<o;r++)(a=i(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),l.push(p(a));for(l.sort(h),r=0;r<l.length;r++)s=c(l[r],s);return s}(t,e,y,s)),t.length>80*s){r=a=t[0],o=l=t[1];for(var x=s;x<v;x+=s)(d=t[x])<r&&(r=d),(u=t[x+1])<o&&(o=u),d>a&&(a=d),u>l&&(l=u);f=0!==(f=Math.max(a-r,l-o))?32767/f:0}return n(y,m,s,r,o,f,0),m}function i(t,e,i,s,n){var r,o;if(n===k(t,e,i,s)>0)for(r=e;r<i;r+=s)o=M(r,t[r],t[r+1],o);else for(r=i-s;r>=e;r-=s)o=M(r,t[r],t[r+1],o);return o&&y(o,o.next)&&(S(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!y(s,s.next)&&0!==v(s.prev,s,s.next))s=s.next;else{if(S(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function n(t,e,i,h,c,d,p){if(t){!p&&d&&function(t,e,i,s){var n=t;do{0===n.z&&(n.z=u(n.x,n.y,e,i,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,s,n,r,o,a,l,h=1;do{for(i=t,t=null,r=null,o=0;i;){for(o++,s=i,a=0,e=0;e<h&&(a++,s=s.nextZ);e++);for(l=h;a>0||l>0&&s;)0!==a&&(0===l||!s||i.z<=s.z)?(n=i,i=i.nextZ,a--):(n=s,s=s.nextZ,l--),r?r.nextZ=n:t=n,n.prevZ=r,r=n;i=s}r.nextZ=null,h*=2}while(o>1)}(n)}(t,h,c,d);for(var f,g,v=t;t.prev!==t.next;)if(f=t.prev,g=t.next,d?o(t,h,c,d):r(t))e.push(f.i/i|0),e.push(t.i/i|0),e.push(g.i/i|0),S(t),t=g.next,v=g.next;else if((t=g)===v){p?1===p?n(t=a(s(t),e,i),e,i,h,c,d,2):2===p&&l(t,e,i,h,c,d):n(s(t),e,i,h,c,d,1);break}}}function r(t){var e=t.prev,i=t,s=t.next;if(v(e,i,s)>=0)return!1;for(var n=e.x,r=i.x,o=s.x,a=e.y,l=i.y,h=s.y,c=n<r?n<o?n:o:r<o?r:o,d=a<l?a<h?a:h:l<h?l:h,u=n>r?n>o?n:o:r>o?r:o,p=a>l?a>h?a:h:l>h?l:h,g=s.next;g!==e;){if(g.x>=c&&g.x<=u&&g.y>=d&&g.y<=p&&f(n,a,r,l,o,h,g.x,g.y)&&v(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function o(t,e,i,s){var n=t.prev,r=t,o=t.next;if(v(n,r,o)>=0)return!1;for(var a=n.x,l=r.x,h=o.x,c=n.y,d=r.y,p=o.y,g=a<l?a<h?a:h:l<h?l:h,y=c<d?c<p?c:p:d<p?d:p,m=a>l?a>h?a:h:l>h?l:h,x=c>d?c>p?c:p:d>p?d:p,_=u(g,y,e,i,s),b=u(m,x,e,i,s),w=t.prevZ,M=t.nextZ;w&&w.z>=_&&M&&M.z<=b;){if(w.x>=g&&w.x<=m&&w.y>=y&&w.y<=x&&w!==n&&w!==o&&f(a,c,l,d,h,p,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,M.x>=g&&M.x<=m&&M.y>=y&&M.y<=x&&M!==n&&M!==o&&f(a,c,l,d,h,p,M.x,M.y)&&v(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;w&&w.z>=_;){if(w.x>=g&&w.x<=m&&w.y>=y&&w.y<=x&&w!==n&&w!==o&&f(a,c,l,d,h,p,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=b;){if(M.x>=g&&M.x<=m&&M.y>=y&&M.y<=x&&M!==n&&M!==o&&f(a,c,l,d,h,p,M.x,M.y)&&v(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function a(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!y(r,o)&&m(r,n,n.next,o)&&b(r,o)&&b(o,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),S(n),S(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function l(t,e,i,r,o,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&g(l,h)){var c=w(l,h);return l=s(l,l.next),c=s(c,c.next),n(l,e,i,r,o,a,0),void n(c,e,i,r,o,a,0)}h=h.next}l=l.next}while(l!==t)}function h(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,s=e,n=t.x,r=t.y,o=-1/0;do{if(r<=s.y&&r>=s.next.y&&s.next.y!==s.y){var a=s.x+(r-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=n&&a>o&&(o=a,i=s.x<s.next.x?s:s.next,a===n))return i}s=s.next}while(s!==e);if(!i)return null;var l,h=i,c=i.x,u=i.y,p=1/0;s=i;do{n>=s.x&&s.x>=c&&n!==s.x&&f(r<u?n:o,r,c,u,r<u?o:n,r,s.x,s.y)&&(l=Math.abs(r-s.y)/(n-s.x),b(s,t)&&(l<p||l===p&&(s.x>i.x||s.x===i.x&&d(i,s)))&&(i=s,p=l)),s=s.next}while(s!==h);return i}(t,e);if(!i)return e;var n=w(i,t);return s(n,n.next),s(i,i.next)}function d(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function u(t,e,i,s,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,s,n,r,o,a){return(n-o)*(e-a)>=(t-o)*(r-a)&&(t-o)*(s-a)>=(i-o)*(e-a)&&(i-o)*(r-a)>=(n-o)*(s-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&m(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var i=t,s=!1,n=(t.x+e.x)/2,r=(t.y+e.y)/2;do{i.y>r!==i.next.y>r&&i.next.y!==i.y&&n<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||y(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,i,s){var n=_(v(t,e,i)),r=_(v(t,e,s)),o=_(v(i,s,t)),a=_(v(i,s,e));return n!==r&&o!==a||(!(0!==n||!x(t,i,e))||(!(0!==r||!x(t,s,e))||(!(0!==o||!x(i,t,s))||!(0!==a||!x(i,e,s)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function _(t){return t>0?1:t<0?-1:0}function b(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function w(t,e){var i=new C(t.i,t.x,t.y),s=new C(e.i,e.x,e.y),n=t.next,r=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,s.next=i,i.prev=s,r.next=s,s.prev=r,s}function M(t,e,i,s){var n=new C(t,e,i);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,s){for(var n=0,r=e,o=i-s;r<i;r+=s)n+=(t[o]-t[r])*(t[r+1]+t[o+1]),o=r;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,s){var n=e&&e.length,r=n?e[0]*i:t.length,o=Math.abs(k(t,0,r,i));if(n)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,c=a<l-1?e[a+1]*i:t.length;o-=Math.abs(k(t,h,c,i))}var d=0;for(a=0;a<s.length;a+=3){var u=s[a]*i,p=s[a+1]*i,f=s[a+2]*i;d+=Math.abs((t[u]-t[f])*(t[p+1]-t[u+1])-(t[u]-t[p])*(t[f+1]-t[u+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,n=0;n<t.length;n++){for(var r=0;r<t[n].length;r++)for(var o=0;o<e;o++)i.vertices.push(t[n][r][o]);n>0&&(s+=t[n-1].length,i.holes.push(s))}return i}},11685:(t,e,i)=>{"use strict";i.d(e,{z:()=>s});const s=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(t)||(t=[t]),e?t.map((t=>"string"===typeof t||i?e(t):t)):t}},14811:(t,e,i)=>{"use strict";i.d(e,{Ek:()=>r,lj:()=>n,t6:()=>o});const s={},n="8.0.0",r="8.3.4";function o(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(s[e])return;let n=(new Error).stack;"undefined"===typeof n?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(n))),s[e]=!0}},14942:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=(0,i(80129).p)({name:"clock",data:'<svg fill="currentColor" viewBox="0 0 24 24"><path d="M12.708 12.3V7.194h-1.386v5.682l2.73 2.73.984-.978z"/><path fill-rule="evenodd" d="M16.578 7.362a6.6 6.6 0 0 0-9.336 0 6.6 6.6 0 0 0 0 9.336 6.6 6.6 0 0 0 9.336 0 6.6 6.6 0 0 0 0-9.336m.846-.846c-3.048-3.048-7.986-3.048-11.028 0-3.048 3.048-3.048 7.986 0 11.028 3.048 3.048 7.986 3.048 11.028 0 3.048-3.048 3.048-7.986 0-11.028" clip-rule="evenodd"/></svg>'})},15853:(t,e,i)=>{"use strict";i.d(e,{k:()=>g});var s=i(75242),n=i(91478);const r=[];async function o(t){if(!t)for(let e=0;e<r.length;e++){const t=r[e];if(t.value.test())return void await t.value.load()}}n.XO.handleByNamedList(n.Ag.Environment,r);var a=i(36628),l=i(54668),h=i(14811),c=i(95041),d=i(67574),u=i(92604);const p=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],f=class t extends u.A{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...p,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=!0===e.skipExtensionImports||!1===e.manageImports;await o(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash){e={...this._systemsHash[t].constructor.defaultOptions,...e}}e={...t.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(t,e){let i=t;if(i instanceof a.mc&&(i={container:i},e&&((0,h.t6)(h.lj,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const t=Array.isArray(i.clearColor)&&4===i.clearColor.length;i.clearColor=t?i.clearColor:s.Q.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const s=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),void 0!==i&&i!==s&&this.runners.resolutionChange.emit(i)}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target||(t.target=this.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=c.u.ALL);const{clear:e,clearColor:i,target:n}=t;s.Q.shared.setValue(i??this.background.colorRgba),this.renderTarget.clear(n,e,s.Q.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>{this.runners[t]=new d.C(t)}))}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(t,e){const i=e.reduce(((t,e)=>(t[e.name]=e.value,t)),{});t.forEach((t=>{const e=t.value,s=t.name,n=i[s];this.renderPipes[s]=new e(this,n?new n:null)}))}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!(0,l.f)())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};f.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let g=f},16650:(t,e,i)=>{"use strict";i.d(e,{W:()=>s});var s=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(s||{})},21193:(t,e,i)=>{"use strict";i.d(e,{P:()=>h,_:()=>o});const s={};function n(t){const e=[];if(1===t)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let s=0;s<t;s++)e.push(`@group(1) @binding(${i++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${i++}) var textureSampler${s+1}: sampler;`)}return e.join("\n")}function r(t){const e=[];if(1===t)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let i=0;i<t;i++)i===t-1?e.push("  default:{"):e.push(`  case ${i}:{`),e.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join("\n")}function o(t){return s[t]||(s[t]={name:"texture-batch-bit",vertex:{header:"\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            "},fragment:{header:`\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${n(t)}\n            `,main:`\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${r(t)}\n            `}}),s[t]}const a={};function l(t){const e=[];for(let i=0;i<t;i++)i>0&&e.push("else"),i<t-1&&e.push(`if(vTextureId < ${i}.5)`),e.push("{"),e.push(`\toutColor = texture(uTextures[${i}], vUV);`),e.push("}");return e.join("\n")}function h(t){return a[t]||(a[t]={name:"texture-batch-bit",vertex:{header:"\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            "},fragment:{header:`\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${t}];\n\n            `,main:`\n\n                ${l(t)}\n            `}}),a[t]}},23144:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});let s={createCanvas:(t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")};const n={get:()=>s,set(t){s=t}}},24100:t=>{t.exports=function(t){var n=[];return t.replace(i,(function(t,i,r){var o=i.toLowerCase();for(r=function(t){var e=t.match(s);return e?e.map(Number):[]}(r),"m"==o&&r.length>2&&(n.push([i].concat(r.splice(0,2))),o="l",i="m"==i?"l":"L");;){if(r.length==e[o])return r.unshift(i),n.push(r);if(r.length<e[o])throw new Error("malformed path data");n.push([i].concat(r.splice(0,e[o])))}})),n};var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},26436:(t,e,i)=>{"use strict";i.d(e,{N:()=>r});var s=i(33596);const n=new s.u;class r{constructor(t,e){this.mapCoord=new s.u,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?t.width<10?0:.5:e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){void 0===e&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const n=t[s],r=t[s+1];e[s]=n*i.a+r*i.c+i.tx,e[s+1]=n*i.b+r*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,s=t.trim;s&&(n.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(n));const r=t.source,o=this.uClampFrame,a=this.clampMargin/r._resolution,l=this.clampOffset/r._resolution;return o[0]=(t.frame.x+a+l)/r.width,o[1]=(t.frame.y+a+l)/r.height,o[2]=(t.frame.x+t.frame.width-a+l)/r.width,o[3]=(t.frame.y+t.frame.height-a+l)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=t.frame.width===r.width&&t.frame.height===r.height&&0===t.rotate,!0}}},27379:(t,e,i)=>{"use strict";i.d(e,{T:()=>J});var s=i(92604),n=i(75242),r=i(33596),o=i(31960),a=i(86675),l=i(42026),h=i(14811),c=i(66373),d=i(60279),u=i(24100);var p=i(44307);class f{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new f(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i}strokeContains(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(0===this.radius)return!1;const n=this.x-t,r=this.y-e,o=this.radius,a=(1-s)*i,l=Math.sqrt(n*n+r*r);return l<=o+a&&l>o-(i-a)}getBounds(t){return t||(t=new p.M),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new g(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,s=(e-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const{halfWidth:n,halfHeight:r}=this;if(n<=0||r<=0)return!1;const o=i*(1-s),a=i-o,l=n-a,h=r-a,c=n+o,d=r+o,u=t-this.x,p=e-this.y;return u*u/(l*l)+p*p/(h*h)>1&&u*u/(c*c)+p*p/(d*d)<=1}getBounds(t){return t||(t=new p.M),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=2*this.halfWidth,t.height=2*this.halfHeight,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function v(t,e,i,s,n,r){const o=n-i,a=r-s,l=o*o+a*a;let h,c,d=-1;0!==l&&(d=((t-i)*o+(e-s)*a)/l),d<0?(h=i,c=s):d>1?(h=n,c=r):(h=i+d*o,c=s+d*a);const u=t-h,p=e-c;return u*u+p*p}class y{constructor(){this.type="polygon";for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];let s=Array.isArray(e[0])?e[0]:e;if("number"!==typeof s[0]){const t=[];for(let e=0,i=s.length;e<i;e++)t.push(s[e].x,s[e].y);s=t}this.points=s,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let s=0;s<i;s+=2){const n=e[s],r=e[s+1];t+=(e[(s+2)%i]-n)*(e[(s+3)%i]+r)}return t<0}containsPolygon(t){const e=this.getBounds(undefined),i=t.getBounds(undefined);if(!e.containsRect(i))return!1;const s=t.points;for(let n=0;n<s.length;n+=2){const t=s[n],e=s[n+1];if(!this.contains(t,e))return!1}return!0}clone(){const t=this.points.slice(),e=new y(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let n=0,r=s-1;n<s;r=n++){const s=this.points[2*n],o=this.points[2*n+1],a=this.points[2*r],l=this.points[2*r+1];o>e!==l>e&&t<(e-o)/(l-o)*(a-s)+s&&(i=!i)}return i}strokeContains(t,e,i){const s=i*i,n=s*(1-(arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5)),r=s-n,{points:o}=this,a=o.length-(this.closePath?0:2);for(let l=0;l<a;l+=2){const i=o[l],s=o[l+1],a=o[(l+2)%o.length],h=o[(l+3)%o.length];if(v(t,e,i,s,a,h)<=(Math.sign((a-i)*(e-s)-(h-s)*(t-i))<0?r:n))return!0}return!1}getBounds(t){t||(t=new p.M);const e=this.points;let i=1/0,s=-1/0,n=1/0,r=-1/0;for(let o=0,a=e.length;o<a;o+=2){const t=e[o],a=e[o+1];i=t<i?t:i,s=t>s?t:s,n=a<n?a:n,r=a>r?a:r}return t.x=i,t.width=s-i,t.y=n,t.height=r-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce(((t,e)=>`${t}, ${e}`),"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const m=(t,e,i,s,n,r,o)=>{const a=t-i,l=e-s,h=Math.sqrt(a*a+l*l);return h>=n-r&&h<=n+o};class x{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n}getBounds(t){return t||(t=new p.M),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new x(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=e-(this.y+i);const r=i*i;if(s*s+n*n<=r)return!0;if(s=t-(this.x+this.width-i),s*s+n*n<=r)return!0;if(n=e-(this.y+this.height-i),s*s+n*n<=r)return!0;if(s=t-(this.x+i),s*s+n*n<=r)return!0}return!1}strokeContains(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const{x:n,y:r,width:o,height:a,radius:l}=this,h=i*(1-s),c=i-h,d=n+l,u=r+l,p=n+o,f=r+a;return(t>=n-h&&t<=n+c||t>=p-c&&t<=p+h)&&e>=u&&e<=u+(a-2*l)||((e>=r-h&&e<=r+c||e>=f-c&&e<=f+h)&&t>=d&&t<=d+(o-2*l)||(t<d&&e<u&&m(t,e,d,u,l,c,h)||t>p-l&&e<u&&m(t,e,p-l,u,l,c,h)||t>p-l&&e>f-l&&m(t,e,p-l,f-l,l,c,h)||t<d&&e>f-l&&m(t,e,d,f-l,l,c,h)))}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}var _=i(64706);const b=1.1920929e-7;function w(t,e,i,s,n,r,o,a,l,h){let c=(1-Math.min(.99,Math.max(0,h??_.GH.defaultOptions.bezierSmoothness)))/1;return c*=c,function(t,e,i,s,n,r,o,a,l,h){M(t,e,i,s,n,r,o,a,l,h,0),l.push(o,a)}(e,i,s,n,r,o,a,l,t,c),t}function M(t,e,i,s,n,r,o,a,l,h,c){if(c>8)return;Math.PI;const d=(t+i)/2,u=(e+s)/2,p=(i+n)/2,f=(s+r)/2,g=(n+o)/2,v=(r+a)/2,y=(d+p)/2,m=(u+f)/2,x=(p+g)/2,_=(f+v)/2,w=(y+x)/2,S=(m+_)/2;if(c>0){let c=o-t,d=a-e;const u=Math.abs((i-o)*d-(s-a)*c),p=Math.abs((n-o)*d-(r-a)*c);if(u>b&&p>b){if((u+p)*(u+p)<=h*(c*c+d*d))return void l.push(w,S)}else if(u>b){if(u*u<=h*(c*c+d*d))return void l.push(w,S)}else if(p>b){if(p*p<=h*(c*c+d*d))return void l.push(w,S)}else if(c=w-(t+o)/2,d=S-(e+a)/2,c*c+d*d<=h)return void l.push(w,S)}M(t,e,d,u,y,m,w,S,l,h,c+1),M(w,S,x,_,g,v,o,a,l,h,c+1)}function S(t,e,i,s,n,r,o,a){let l=(1-Math.min(.99,Math.max(0,a??_.GH.defaultOptions.bezierSmoothness)))/1;return l*=l,function(t,e,i,s,n,r,o,a){C(o,t,e,i,s,n,r,a,0),o.push(n,r)}(e,i,s,n,r,o,t,l),t}function C(t,e,i,s,n,r,o,a,l){if(l>8)return;Math.PI;const h=(e+s)/2,c=(i+n)/2,d=(s+r)/2,u=(n+o)/2,p=(h+d)/2,f=(c+u)/2;let g=r-e,v=o-i;const y=Math.abs((s-r)*v-(n-o)*g);if(y>1.1920929e-7){if(y*y<=a*(g*g+v*v))return void t.push(p,f)}else if(g=p-(e+r)/2,v=f-(i+o)/2,g*g+v*v<=a)return void t.push(p,f);C(t,e,i,h,c,p,f,a,l+1),C(t,p,f,d,u,r,o,a,l+1)}function k(t,e,i,s,n,r,o,a){let l=Math.abs(n-r);(!o&&n>r||o&&r>n)&&(l=2*Math.PI-l),a||(a=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(l/Math.PI))));let h=l/(a=Math.max(a,3)),c=n;h*=o?-1:1;for(let d=0;d<a+1;d++){const n=e+Math.cos(c)*s,r=i+Math.sin(c)*s;t.push(n,r),c+=h}}const T=2*Math.PI,$={centerX:0,centerY:0,ang1:0,ang2:0},A=(t,e,i,s,n,r,o,a)=>{let{x:l,y:h}=t;l*=e,h*=i;const c=s*l-n*h,d=n*l+s*h;return a.x=c+r,a.y=d+o,a};function P(t,e){const i=-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),s=1.5707963267948966===e?.551915024494:i,n=Math.cos(t),r=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:n-r*s,y:r+n*s},{x:o+a*s,y:a-o*s},{x:o,y:a}]}const O=(t,e,i,s)=>{let n=t*i+e*s;return n>1&&(n=1),n<-1&&(n=-1),(t*s-e*i<0?-1:1)*Math.acos(n)};function R(t,e,i,s,n,r,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(0===r||0===o)return;const c=Math.sin(a*T/360),d=Math.cos(a*T/360),u=d*(e-s)/2+c*(i-n)/2,p=-c*(e-s)/2+d*(i-n)/2;if(0===u&&0===p)return;r=Math.abs(r),o=Math.abs(o);const f=Math.pow(u,2)/Math.pow(r,2)+Math.pow(p,2)/Math.pow(o,2);f>1&&(r*=Math.sqrt(f),o*=Math.sqrt(f)),((t,e,i,s,n,r,o,a,l,h,c,d,u)=>{const p=Math.pow(n,2),f=Math.pow(r,2),g=Math.pow(c,2),v=Math.pow(d,2);let y=p*f-p*v-f*g;y<0&&(y=0),y/=p*v+f*g,y=Math.sqrt(y)*(o===a?-1:1);const m=y*n/r*d,x=y*-r/n*c,_=h*m-l*x+(t+i)/2,b=l*m+h*x+(e+s)/2,w=(c-m)/n,M=(d-x)/r,S=(-c-m)/n,C=(-d-x)/r,k=O(1,0,w,M);let $=O(w,M,S,C);0===a&&$>0&&($-=T),1===a&&$<0&&($+=T),u.centerX=_,u.centerY=b,u.ang1=k,u.ang2=$})(e,i,s,n,r,o,l,h,c,d,u,p,$);let{ang1:g,ang2:v}=$;const{centerX:y,centerY:m}=$;let x=Math.abs(v)/(T/4);Math.abs(1-x)<1e-7&&(x=1);const _=Math.max(Math.ceil(x),1);v/=_;let b=t[t.length-2],M=t[t.length-1];const S={x:0,y:0};for(let C=0;C<_;C++){const e=P(g,v),{x:i,y:s}=A(e[0],r,o,d,c,y,m,S),{x:n,y:a}=A(e[1],r,o,d,c,y,m,S),{x:l,y:h}=A(e[2],r,o,d,c,y,m,S);w(t,b,M,i,s,n,a,l,h),b=l,M=h,g+=v}}const E=new p.M;class D{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new c.c,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],n=i[i.length-1];return s===t&&n===e||i.push(t,e),this}arc(t,e,i,s,n,r){this._ensurePoly(!1);return k(this._currentPoly.points,t,e,i,s,n,r),this}arcTo(t,e,i,s,n){this._ensurePoly();return function(t,e,i,s,n,r){const o=t[t.length-2],a=t[t.length-1]-i,l=o-e,h=n-i,c=s-e,d=Math.abs(a*c-l*h);if(d<1e-8||0===r)return void(t[t.length-2]===e&&t[t.length-1]===i||t.push(e,i));const u=a*a+l*l,p=h*h+c*c,f=a*h+l*c,g=r*Math.sqrt(u)/d,v=r*Math.sqrt(p)/d,y=g*f/u,m=v*f/p,x=g*c+v*l,_=g*h+v*a,b=l*(v+y),w=a*(v+y),M=c*(g+m),S=h*(g+m);k(t,x+e,_+i,r,Math.atan2(w-_,b-x),Math.atan2(S-_,M-x),l*h>c*a)}(this._currentPoly.points,t,e,i,s,n),this}arcToSvg(t,e,i,s,n,r,o){return R(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,r,o,t,e,i,s,n),this}bezierCurveTo(t,e,i,s,n,r,o){this._ensurePoly();const a=this._currentPoly;return w(this._currentPoly.points,a.lastX,a.lastY,t,e,i,s,n,r,o),this}quadraticCurveTo(t,e,i,s,n){this._ensurePoly();const r=this._currentPoly;return S(this._currentPoly.points,r.lastX,r.lastY,t,e,i,s,n),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);const i=this.shapePrimitives,s=i.length;for(let n=0;n<t.instructions.length;n++){const e=t.instructions[n];this[e.action](...e.data)}if(t.checkForHoles&&i.length-s>1){let t=null;for(let e=s;e<i.length;e++){const s=i[e];if("polygon"===s.shape.type){const n=s.shape,r=t?.shape;r&&r.containsPolygon(n)?(t.holes||(t.holes=[]),t.holes.push(s),i.copyWithin(e,e+1),i.length--,e--):t=s}}}return this}finish(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.endPoly(t)}rect(t,e,i,s,n){return this.drawShape(new p.M(t,e,i,s),n),this}circle(t,e,i,s){return this.drawShape(new f(t,e,i),s),this}poly(t,e,i){const s=new y(t);return s.closePath=e,this.drawShape(s,i),this}regularPoly(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5?arguments[5]:void 0;s=Math.max(0|s,3);const o=-1*Math.PI/2+n,a=2*Math.PI/s,l=[];for(let h=0;h<s;h++){const s=o-h*a;l.push(t+i*Math.cos(s),e+i*Math.sin(s))}return this.poly(l,!0,r),this}roundPoly(t,e,i,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;if(s=Math.max(0|s,3),n<=0)return this.regularPoly(t,e,i,s,r);const a=i*Math.sin(Math.PI/s)-.001;n=Math.min(n,a);const l=-1*Math.PI/2+r,h=2*Math.PI/s,c=(s-2)*Math.PI/s/2;for(let d=0;d<s;d++){const s=d*h+l,r=t+i*Math.cos(s),a=e+i*Math.sin(s),u=s+Math.PI+c,p=s-Math.PI-c,f=r+n*Math.cos(u),g=a+n*Math.sin(u),v=r+n*Math.cos(p),y=a+n*Math.sin(p);0===d?this.moveTo(f,g):this.lineTo(f,g),this.quadraticCurveTo(r,a,v,y,o)}return this.closePath()}roundShape(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return t.length<3?this:(i?function(t,e,i,s){const n=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),o=e.length;for(let a=0;a<o;a++){const l=e[(a+1)%o],h=l.radius??i;if(h<=0){0===a?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y);continue}const c=e[a],d=e[(a+2)%o],u=n(c,l);let p;p=u<1e-4?l:r(l,c,Math.min(u/2,h)/u);const f=n(d,l);let g;g=f<1e-4?l:r(l,d,Math.min(f/2,h)/f),0===a?t.moveTo(p.x,p.y):t.lineTo(p.x,p.y),t.quadraticCurveTo(l.x,l.y,g.x,g.y,s)}}(this,t,e,s):function(t,e,i){const s=(t,e)=>{const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);return{len:n,nx:i/n,ny:s/n}},n=(e,i)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)};let r=e[e.length-1];for(let o=0;o<e.length;o++){const a=e[o%e.length],l=a.radius??i;if(l<=0){n(o,a),r=a;continue}const h=e[(o+1)%e.length],c=s(a,r),d=s(a,h);if(c.len<1e-4||d.len<1e-4){n(o,a),r=a;continue}let u=Math.asin(c.nx*d.ny-c.ny*d.nx),p=1,f=!1;c.nx*d.nx-c.ny*-d.ny<0?u<0?u=Math.PI+u:(u=Math.PI-u,p=-1,f=!0):u>0&&(p=-1,f=!0);const g=u/2;let v,y=Math.abs(Math.cos(g)*l/Math.sin(g));y>Math.min(c.len/2,d.len/2)?(y=Math.min(c.len/2,d.len/2),v=Math.abs(y*Math.sin(g)/Math.cos(g))):v=l;const m=a.x+d.nx*y+-d.ny*v*p,x=a.y+d.ny*y+d.nx*v*p,_=Math.atan2(c.ny,c.nx)+Math.PI/2*p,b=Math.atan2(d.ny,d.nx)-Math.PI/2*p;0===o&&t.moveTo(m+Math.cos(_)*v,x+Math.sin(_)*v),t.arc(m,x,v,_,b,f),r=a}}(this,t,e),this.closePath())}filletRect(t,e,i,s,n){if(0===n)return this.rect(t,e,i,s);const r=Math.min(i,s)/2,o=Math.min(r,Math.max(-r,n)),a=t+i,l=e+s,h=o<0?-o:0,c=Math.abs(o);return this.moveTo(t,e+c).arcTo(t+h,e+h,t+c,e,c).lineTo(a-c,e).arcTo(a-h,e+h,a,e+c,c).lineTo(a,l-c).arcTo(a-h,l-h,t+i-c,l,c).lineTo(t+c,l).arcTo(t+h,l-h,t,l-c,c).closePath()}chamferRect(t,e,i,s,n,r){if(n<=0)return this.rect(t,e,i,s);const o=Math.min(n,Math.min(i,s)/2),a=t+i,l=e+s,h=[t+o,e,a-o,e,a,e+o,a,l-o,a-o,l,t+o,l,t,l-o,t,e+o];for(let c=h.length-1;c>=2;c-=2)h[c]===h[c-2]&&h[c-1]===h[c-3]&&h.splice(c-1,2);return this.poly(h,!0,r)}ellipse(t,e,i,s,n){return this.drawShape(new g(t,e,i,s),n),this}roundRect(t,e,i,s,n,r){return this.drawShape(new x(t,e,i,s,n),r),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new y,i.points.push(t,e),this._currentPoly=i,this}endPoly(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._currentPoly&&(this._currentPoly=new y,t)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,i=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const s=t.transform,n=e;e=s.a*e+s.c*i+s.tx,i=s.b*n+s.d*i+s.ty}this._currentPoly.points.push(e,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const s=e[i],n=s.shape.getBounds(E);s.transform?t.addRect(n,s.transform):t.addRect(n)}return t}}class I{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.instructions=[],this.uid=(0,l.L)("graphicsPath"),this._dirty=!0,this.checkForHoles=e,"string"===typeof t?function(t,e){const i=u(t),s=[];let n=null,r=0,o=0;for(let a=0;a<i.length;a++){const t=i[a],l=t[0],h=t;switch(l){case"M":r=h[1],o=h[2],e.moveTo(r,o);break;case"m":r+=h[1],o+=h[2],e.moveTo(r,o);break;case"H":r=h[1],e.lineTo(r,o);break;case"h":r+=h[1],e.lineTo(r,o);break;case"V":o=h[1],e.lineTo(r,o);break;case"v":o+=h[1],e.lineTo(r,o);break;case"L":r=h[1],o=h[2],e.lineTo(r,o);break;case"l":r+=h[1],o+=h[2],e.lineTo(r,o);break;case"C":r=h[5],o=h[6],e.bezierCurveTo(h[1],h[2],h[3],h[4],r,o);break;case"c":e.bezierCurveTo(r+h[1],o+h[2],r+h[3],o+h[4],r+h[5],o+h[6]),r+=h[5],o+=h[6];break;case"S":r=h[3],o=h[4],e.bezierCurveToShort(h[1],h[2],r,o);break;case"s":e.bezierCurveToShort(r+h[1],o+h[2],r+h[3],o+h[4]),r+=h[3],o+=h[4];break;case"Q":r=h[3],o=h[4],e.quadraticCurveTo(h[1],h[2],r,o);break;case"q":e.quadraticCurveTo(r+h[1],o+h[2],r+h[3],o+h[4]),r+=h[3],o+=h[4];break;case"T":r=h[1],o=h[2],e.quadraticCurveToShort(r,o);break;case"t":r+=h[1],o+=h[2],e.quadraticCurveToShort(r,o);break;case"A":r=h[6],o=h[7],e.arcToSvg(h[1],h[2],h[3],h[4],h[5],r,o);break;case"a":r+=h[6],o+=h[7],e.arcToSvg(h[1],h[2],h[3],h[4],h[5],r,o);break;case"Z":case"z":e.closePath(),s.length>0&&(n=s.pop(),n?(r=n.startX,o=n.startY):(r=0,o=0)),n=null;break;default:(0,d.R)(`Unknown SVG path command: ${l}`)}"Z"!==l&&"z"!==l&&null===n&&(n={startX:r,startY:o},s.push(n))}}(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new D(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,n){const r=this.instructions[this.instructions.length-1],a=this.getLastPoint(o.b.shared);let l=0,h=0;if(r&&"bezierCurveTo"===r.action){l=r.data[2],h=r.data[3];const t=a.x,e=a.y;l=t+(t-l),h=e+(e-h)}else l=a.x,h=a.y;return this.instructions.push({action:"bezierCurveTo",data:[l,h,t,e,i,s,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const s=this.instructions[this.instructions.length-1],n=this.getLastPoint(o.b.shared);let r=0,a=0;if(s&&"quadraticCurveTo"===s.action){r=s.data[0],a=s.data[1];const t=n.x,e=n.y;r=t+(t-r),a=e+(e-a)}else r=n.x,a=n.y;return this.instructions.push({action:"quadraticCurveTo",data:[r,a,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,n){return this.instructions.push({action:"rect",data:[t,e,i,s,n]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(t,e,i,s,n,r,o){n||(n=s/2);const a=-1*Math.PI/2+r,l=2*i,h=2*Math.PI/l,c=[];for(let d=0;d<l;d++){const i=d%2?n:s,r=d*h+a;c.push(t+i*Math.cos(r),e+i*Math.sin(r))}return this.poly(c,!0,o),this}clone(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=new I;if(e.checkForHoles=this.checkForHoles,t)for(let i=0;i<this.instructions.length;i++){const t=this.instructions[i];e.instructions.push({action:t.action,data:t.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,s=t.c,n=t.d,r=t.tx,o=t.ty;let a=0,l=0,h=0,c=0,u=0,p=0,f=0,g=0;for(let v=0;v<this.instructions.length;v++){const y=this.instructions[v],m=y.data;switch(y.action){case"moveTo":case"lineTo":a=m[0],l=m[1],m[0]=e*a+s*l+r,m[1]=i*a+n*l+o;break;case"bezierCurveTo":h=m[0],c=m[1],u=m[2],p=m[3],a=m[4],l=m[5],m[0]=e*h+s*c+r,m[1]=i*h+n*c+o,m[2]=e*u+s*p+r,m[3]=i*u+n*p+o,m[4]=e*a+s*l+r,m[5]=i*a+n*l+o;break;case"quadraticCurveTo":h=m[0],c=m[1],a=m[2],l=m[3],m[0]=e*h+s*c+r,m[1]=i*h+n*c+o,m[2]=e*a+s*l+r,m[3]=i*a+n*l+o;break;case"arcToSvg":a=m[5],l=m[6],f=m[0],g=m[1],m[0]=e*f+s*g,m[1]=i*f+n*g,m[5]=e*a+s*l+r,m[6]=i*a+n*l+o;break;case"circle":m[4]=L(m[3],t);break;case"rect":m[4]=L(m[4],t);break;case"ellipse":m[8]=L(m[8],t);break;case"roundRect":m[5]=L(m[5],t);break;case"addPath":m[0].transform(t);break;case"poly":m[2]=L(m[2],t);break;default:(0,d.R)("unknown transform action",y.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;"closePath"===i.action;){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}return t}}function L(t,e){return t?t.prepend(e):e.clone()}var z=i(34325);function j(t,e,i){const s=t.getAttribute(e);return s?Number(s):i}function U(t){const e=j(t,"x1",0),i=j(t,"y1",0),s=j(t,"x2",1),r=j(t,"y2",0),o=t.getAttribute("gradientUnits")||"objectBoundingBox",a=new z._(e,i,s,r,"objectBoundingBox"===o?"local":"global");for(let l=0;l<t.children.length;l++){const e=t.children[l],i=j(e,"offset",0),s=n.Q.shared.setValue(e.getAttribute("stop-color")).toNumber();a.addColorStop(i,s)}return a}function B(t){return(0,d.R)("[SVG Parser] Radial gradients are not yet supported"),new z._(0,0,1,0)}function N(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const F={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function V(t,e){const i=t.getAttribute("style"),s={},n={},r={strokeStyle:s,fillStyle:n,useFill:!1,useStroke:!1};for(const o in F){const i=t.getAttribute(o);i&&H(e,r,o,i.trim())}if(i){const t=i.split(";");for(let i=0;i<t.length;i++){const s=t[i].trim(),[n,o]=s.split(":");F[n]&&H(e,r,n,o.trim())}}return{strokeStyle:r.useStroke?s:null,fillStyle:r.useFill?n:null,useFill:r.useFill,useStroke:r.useStroke}}function H(t,e,i,s){switch(i){case"stroke":if("none"!==s){if(s.startsWith("url(")){const i=N(s);e.strokeStyle.fill=t.defs[i]}else e.strokeStyle.color=n.Q.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if("none"!==s){if(s.startsWith("url(")){const i=N(s);e.fillStyle.fill=t.defs[i]}else e.fillStyle.color=n.Q.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s)}}function G(t,e){if("string"===typeof t){const e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}const i={context:e,defs:{},path:new I};!function(t,e){const i=t.querySelectorAll("defs");for(let s=0;s<i.length;s++){const t=i[s];for(let i=0;i<t.children.length;i++){const s=t.children[i];switch(s.nodeName.toLowerCase()){case"lineargradient":e.defs[s.id]=U(s);break;case"radialgradient":e.defs[s.id]=B()}}}}(t,i);const s=t.children,{fillStyle:n,strokeStyle:r}=V(t,i);for(let o=0;o<s.length;o++){const t=s[o];"defs"!==t.nodeName.toLowerCase()&&Y(t,i,n,r)}return e}function Y(t,e,i,s){const n=t.children,{fillStyle:r,strokeStyle:o}=V(t,e);r&&i?i={...i,...r}:r&&(i=r),o&&s?s={...s,...o}:o&&(s=o);const a=!i&&!s;let l,h,c,u,p,f,g,v,y,m,x,_,b,w,M,S,C;switch(a&&(i={color:0}),t.nodeName.toLowerCase()){case"path":w=t.getAttribute("d"),"evenodd"===t.getAttribute("fill-rule")&&(0,d.R)("SVG Evenodd fill rule not supported, your svg may render incorrectly"),M=new I(w,!0),e.context.path(M),i&&e.context.fill(i),s&&e.context.stroke(s);break;case"circle":g=j(t,"cx",0),v=j(t,"cy",0),y=j(t,"r",0),e.context.ellipse(g,v,y,y),i&&e.context.fill(i),s&&e.context.stroke(s);break;case"rect":l=j(t,"x",0),h=j(t,"y",0),S=j(t,"width",0),C=j(t,"height",0),m=j(t,"rx",0),x=j(t,"ry",0),m||x?e.context.roundRect(l,h,S,C,m||x):e.context.rect(l,h,S,C),i&&e.context.fill(i),s&&e.context.stroke(s);break;case"ellipse":g=j(t,"cx",0),v=j(t,"cy",0),m=j(t,"rx",0),x=j(t,"ry",0),e.context.beginPath(),e.context.ellipse(g,v,m,x),i&&e.context.fill(i),s&&e.context.stroke(s);break;case"line":c=j(t,"x1",0),u=j(t,"y1",0),p=j(t,"x2",0),f=j(t,"y2",0),e.context.beginPath(),e.context.moveTo(c,u),e.context.lineTo(p,f),s&&e.context.stroke(s);break;case"polygon":b=t.getAttribute("points"),_=b.match(/\d+/g).map((t=>parseInt(t,10))),e.context.poly(_,!0),i&&e.context.fill(i),s&&e.context.stroke(s);break;case"polyline":b=t.getAttribute("points"),_=b.match(/\d+/g).map((t=>parseInt(t,10))),e.context.poly(_,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:(0,d.R)(`[SVG parser] <${t.nodeName}> elements unsupported`)}a&&(i=null);for(let d=0;d<n.length;d++)Y(n[d],e,i,s)}var X=i(84839);const W=new o.b,q=new r.u,Z=class t extends s.A{constructor(){super(...arguments),this.uid=(0,l.L)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new I,this._transform=new r.u,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new c.c,this._boundsDirty=!0}clone(){const e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=(0,X.w)(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=(0,X.T)(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=(0,X.w)(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=(0,X.w)(e,t.defaultStrokeStyle),this}texture(t,e,i,s,r,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:r||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?n.Q.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new I,this}fill(e,i){let s;const n=this.instructions[this.instructions.length-1];return s=0===this._tick&&n&&"stroke"===n.action?n.data.path:this._activePath.clone(),s?(null!=e&&(void 0!==i&&"number"===typeof e&&((0,h.t6)(h.lj,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=(0,X.w)(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(o.b.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let i;const s=this.instructions[this.instructions.length-1];return i=0===this._tick&&s&&"fill"===s.action?s.data.path:this._activePath.clone(),i?(null!=e&&(this._strokeStyle=(0,X.T)(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(!e.data.hole){e.data.hole=i;break}e.data.hole.addPath(i)}}return this._initNextPathLocation(),this}arc(t,e,i,s,n,r){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,i,s,n,r),this}arcTo(t,e,i,s,n){this._tick++;const r=this._transform;return this._activePath.arcTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty,r.a*i+r.c*s+r.tx,r.b*i+r.d*s+r.ty,n),this}arcToSvg(t,e,i,s,n,r,o){this._tick++;const a=this._transform;return this._activePath.arcToSvg(t,e,i,s,n,a.a*r+a.c*o+a.tx,a.b*r+a.d*o+a.ty),this}bezierCurveTo(t,e,i,s,n,r,o){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,s=this._activePath.instructions,n=i.a*t+i.c*e+i.tx,r=i.b*t+i.d*e+i.ty;return 1===s.length&&"moveTo"===s[0].action?(s[0].data[0]=n,s[0].data[1]=r,this):(this._activePath.moveTo(n,r),this)}quadraticCurveTo(t,e,i,s,n){this._tick++;const r=this._transform;return this._activePath.quadraticCurveTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty,r.a*i+r.c*s+r.tx,r.b*i+r.d*s+r.ty,n),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,n){return this._tick++,this._activePath.roundRect(t,e,i,s,n,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5?arguments[5]:void 0;return this._tick++,this._activePath.regularPoly(t,e,i,s,n,r),this}roundPoly(t,e,i,s,n,r){return this._tick++,this._activePath.roundPoly(t,e,i,s,n,r),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,n){return this._tick++,this._activePath.filletRect(t,e,i,s,n),this}chamferRect(t,e,i,s,n,r){return this._tick++,this._activePath.chamferRect(t,e,i,s,n,r),this}star(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._tick++,this._activePath.star(t,e,i,s,n,r,this._transform.clone()),this}svg(t){return this._tick++,G(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._transform.scale(t,e),this}setTransform(t,e,i,s,n,o){return t instanceof r.u?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,s,n,o),this)}transform(t,e,i,s,n,o){return t instanceof r.u?(this._transform.append(t),this):(q.set(t,e,i,s,n,o),this._transform.append(q),this)}translate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],s=i.action;if("fill"===s){const e=i.data;t.addBounds(e.path.bounds)}else if("texture"===s){const e=i.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===s){const e=i.data,s=e.style.alignment,n=e.style.width*(1-s),r=e.path.bounds;t.addFrame(r.minX-n,r.minY-n,r.maxX+n,r.maxY+n)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let s=0;s<e.length;s++){const n=e[s],r=n.data,o=r.path;if(!n.action||!o)continue;const a=r.style,l=o.shapePath.shapePrimitives;for(let e=0;e<l.length;e++){const s=l[e].shape;if(!a||!s)continue;const o=l[e].transform,h=o?o.applyInverse(t,W):t;if("fill"===n.action)i=s.contains(h.x,h.y);else{const t=a;i=s.strokeContains(h.x,h.y,t.width,t.alignment)}const c=r.hole;if(c){const t=c.shapePath?.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(h.x,h.y)&&(i=!1)}if(i)return!0}}return i}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners();if("boolean"===typeof t?t:t?.texture){const e="boolean"===typeof t?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Z.defaultFillStyle={color:16777215,alpha:1,texture:a.g.WHITE,matrix:null,fill:null,textureSpace:"local"},Z.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:a.g.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let J=Z},30801:(t,e,i)=>{"use strict";i.d(e,{X:()=>r});const s=Object.create(null),n=Object.create(null);function r(t,e){let i=n[t];return void 0===i&&(void 0===s[e]&&(s[e]=1),n[t]=i=s[e]++),i}},30879:(t,e,i)=>{"use strict";i.d(e,{n:()=>l});var s=i(92604),n=i(42026),r=i(14811);const o=Object.create(null);const a=class t extends s.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...t.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){(0,r.t6)(r.lj,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=function(t){const e=o[t];return void 0===e&&(o[t]=(0,n.L)("resource")),e}(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};a.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let l=a},31960:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});class s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new s(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return n.x=0,n.y=0,n}}const n=new s},33596:(t,e,i)=>{"use strict";i.d(e,{u:()=>r});var s=i(96887),n=i(31960);class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,n,r){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new n.b;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new n.b;const i=this.a,s=this.b,r=this.c,o=this.d,a=this.tx,l=this.ty,h=1/(i*o+r*-s),c=t.x,d=t.y;return e.x=o*h*c+-r*h*d+(l*r-a*o)*h,e.y=i*h*d+-s*h*c+(-l*i+a*s)*h,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,r=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}appendFrom(t,e){const i=t.a,s=t.b,n=t.c,r=t.d,o=t.tx,a=t.ty,l=e.a,h=e.b,c=e.c,d=e.d;return this.a=i*l+s*c,this.b=i*h+s*d,this.c=n*l+r*c,this.d=n*h+r*d,this.tx=o*l+a*c+e.tx,this.ty=o*h+a*d+e.ty,this}setTransform(t,e,i,s,n,r,o,a,l){return this.a=Math.cos(o+l)*n,this.b=Math.sin(o+l)*n,this.c=-Math.sin(o-a)*r,this.d=Math.cos(o-a)*r,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,i=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-n,r),l=Math.atan2(i,e),h=Math.abs(a+l);return h<1e-5||Math.abs(s.TO-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*r),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,r=t*s-e*i;return this.a=s/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-s*n)/r,this.ty=-(t*this.ty-e*n)/r,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return a.identity()}static get shared(){return o.identity()}}const o=new r,a=new r},33682:(t,e,i)=>{"use strict";i.d(e,{b:()=>a});var s=i(23144),n=i(91478),r=i(60279),o=i(36904);class a extends o.v{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=s.e.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,(0,r.R)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}a.extension=n.Ag.TextureSource},34325:(t,e,i)=>{"use strict";i.d(e,{_:()=>p});var s=i(75242),n=i(23144),r=i(33596),o=i(33682),a=i(86675),l=i(42026),h=i(14811),c=i(4841);const d=[{offset:0,color:"white"},{offset:1,color:"black"}],u=class t{constructor(){this.uid=(0,l.L)("fillGradient"),this.type="linear",this.colorStops=[];for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];let n=function(t){let e=t[0]??{};("number"===typeof e||t[1])&&((0,h.t6)("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??p.defaultLinearOptions.textureSize});return e}(i);n={..."radial"===n.type?t.defaultRadialOptions:t.defaultLinearOptions,...(0,c.S)(n)},this._textureSize=n.textureSize,"radial"===n.type?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach((t=>{this.addColorStop(t.offset,t.color)}))}addColorStop(t,e){return this.colorStops.push({offset:t,color:s.Q.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:d,e=this._textureSize,{canvas:i,context:s}=g(e,1),n=s.createLinearGradient(0,0,this._textureSize,0);f(n,t),s.fillStyle=n,s.fillRect(0,0,e,1),this.texture=new a.g({source:new o.b({resource:i})});const{x:l,y:h}=this.start,{x:c,y:u}=this.end,p=new r.u,v=c-l,y=u-h,m=Math.sqrt(v*v+y*y),x=Math.atan2(y,v);p.scale(m/e,1),p.rotate(x),p.translate(l,h),"local"===this.textureSpace&&p.scale(e,e),this.transform=p}buildGradient(){"linear"===this.type?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:d,e=this._textureSize,{canvas:i,context:s}=g(e,e),{x:n,y:l}=this.center,{x:h,y:c}=this.outerCenter,u=this.innerRadius,p=this.outerRadius,v=h-p,y=c-p,m=e/(2*p),x=(n-v)*m,_=(l-y)*m,b=s.createRadialGradient(x,_,u*m,(h-v)*m,(c-y)*m,p*m);f(b,t),s.fillStyle=t[t.length-1].color,s.fillRect(0,0,e,e),s.fillStyle=b,s.translate(x,_),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-x,-_),s.fillRect(0,0,e,e),this.texture=new a.g({source:new o.b({resource:i,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const w=new r.u;w.scale(1/m,1/m),w.translate(v,y),"local"===this.textureSpace&&w.scale(e,e),this.transform=w}get styleKey(){return this.uid}destroy(){this.texture?.destroy(!0),this.texture=null}};u.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256},u.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let p=u;function f(t,e){for(let i=0;i<e.length;i++){const s=e[i];t.addColorStop(s.offset,s.color)}}function g(t,e){const i=n.e.get().createCanvas(t,e),s=i.getContext("2d");return{canvas:i,context:s}}},36628:(t,e,i)=>{"use strict";i.d(e,{mc:()=>Y,u:()=>H,ig:()=>V,fR:()=>G});var s=i(92604),n=i(75242);var r=i(91478),o=i(33596),a=i(96887),l=i(64973),h=i(42026),c=i(14811),d=i(69769);const u={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){"boolean"===typeof t&&!1===t?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(!0===t?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){(0,c.t6)("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};var p=i(3772);const f={allowChildren:!0,removeChildren(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=(arguments.length>1?arguments[1]:void 0)??this.children.length,i=e-t,s=[];if(i>0&&i<=e){for(let n=e-1;n>=t;n--){const t=this.children[n];t&&(s.push(t),t.parent=null)}(0,p.d)(this.children,t,e);const i=this.renderGroup||this.parentRenderGroup;i&&i.removeChildren(s);for(let t=0;t<s.length;++t)this.emit("childRemoved",s[t],this,t),s[t].emit("removed",this);return s.length>0&&this._didViewChangeTick++,s}if(0===i&&0===this.children.length)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||(0,c.t6)(c.lj,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(e<0||e>i.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${i.length}`);if(t.parent){const i=t.parent.children.indexOf(t);if(t.parent===this&&i===e)return t;-1!==i&&t.parent.children.splice(i,1)}e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t;const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return 1===e.length?this.reparentChildAt(e[0],this.children.length):(e.forEach((t=>this.reparentChildAt(t,this.children.length))),e[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const i=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const s=this.worldTransform.clone();return s.invert(),i.prepend(s),t.setFromMatrix(i),t}},g={collectRenderables(t,e,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,i):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,i))},collectRenderablesSimple(t,e,i){const s=this.children,n=s.length;for(let r=0;r<n;r++)s[r].collectRenderables(t,e,i)},collectRenderablesWithEffects(t,e,i){const{renderPipes:s}=e;for(let n=0;n<this.effects.length;n++){const e=this.effects[n];s[e.pipe].push(e,this,t)}this.collectRenderablesSimple(t,e,i);for(let n=this.effects.length-1;n>=0;n--){const e=this.effects[n];s[e.pipe].pop(e,this,t)}}};var v=i(42290);const y=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach((t=>{this.add({test:t.test,maskClass:t})})))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return d.Z.get(i.maskClass,t)}return t}returnMaskEffect(t){d.Z.return(t)}};r.XO.handleByList(r.Ag.MaskEffect,y._effectClasses);const m={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){-1===this.effects.indexOf(t)&&(this.effects.push(t),this.effects.sort(((t,e)=>t.priority-e.priority)),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);-1!==e&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),y.returnMaskEffect(e),this._maskEffect=null),null!==t&&void 0!==t&&(this._maskEffect=y.getMaskEffect(t),this.addEffect(this._maskEffect)))},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},get mask(){return this._maskEffect?.mask},set filters(t){!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new v.a),i=t?.length>0,s=i!==e.filters?.length>0;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),s&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new v.a),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}},x={label:null,get name(){return(0,c.t6)(c.lj,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){(0,c.t6)(c.lj,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getChildByLabel(t,e)},getChildByLabel(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.children;for(let s=0;s<i.length;s++){const e=i[s];if(e.label===t||t instanceof RegExp&&t.test(e.label))return e}if(e)for(let s=0;s<i.length;s++){const e=i[s].getChildByLabel(t,!0);if(e)return e}return null},getChildrenByLabel(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=this.children;for(let n=0;n<s.length;n++){const e=s[n];(e.label===t||t instanceof RegExp&&t.test(e.label))&&i.push(e)}if(e)for(let n=0;n<s.length;n++)s[n].getChildrenByLabel(t,!0,i);return i}};var _=i(66373),b=i(88263);const w=new o.u,M={getFastGlobalBounds(t,e){e||(e=new _.c),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const i=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(i.worldTransform),e},_getGlobalBoundsRecursive(t,e,i){let s=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==i)return;if(7!==this.localDisplayStatus||!this.measurable)return;const n=!!this.effects.length;if((this.renderGroup||n)&&(s=b.o.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const t=this.bounds;s.addFrame(t.minX,t.minY,t.maxX,t.maxY,this.groupTransform)}const e=this.children;for(let n=0;n<e.length;n++)e[n]._getGlobalBoundsRecursive(t,s,i)}if(n){let t=!1;const i=this.renderGroup||this.parentRenderGroup;for(let e=0;e<this.effects.length;e++)this.effects[e].addBounds&&(t||(t=!0,s.applyMatrix(i.worldTransform)),this.effects[e].addBounds(s,!0));t&&(s.applyMatrix(i.worldTransform.copyTo(w).invert()),e.addBounds(s,this.relativeGroupTransform)),e.addBounds(s),b.o.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),b.o.return(s))}};var S=i(45076),C=i(81686);function k(t){return((255&t)<<16)+(65280&t)+(t>>16&255)}const T={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,i=this.parent;for(;i;)e*=i.alpha,i=i.parent;return e},getGlobalTransform(t,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const i=(0,S.Ek)(this,b.u.get().identity());return t.appendFrom(this.localTransform,i),b.u.return(i),t},getGlobalTint(t){if(t)return this.renderGroup?k(this.renderGroup.worldColor):this.parentRenderGroup?k((0,C.j)(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,i=this.parent;for(;i;)e=(0,C.j)(e,i.localColor),i=i.parent;return k(e)}};var $=i(68851);function A(t,e){const i=t.children;for(let s=0;s<i.length;s++){const t=i[s],n=t.uid,r=(65535&t._didViewChangeTick)<<16|65535&t._didContainerChangeTick,o=e.index;e.data[o]===n&&e.data[o+1]===r||(e.data[e.index]=n,e.data[e.index+1]=r,e.didChange=!0),e.index=o+2,t.children.length&&A(t,e)}return e.didChange}const P=new o.u,O={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const i=Math.sign(this.scale.x)||1;this.scale.x=0!==e?t/e*i:i},_setHeight(t,e){const i=Math.sign(this.scale.y)||1;this.scale.y=0!==e?t/e*i:i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new _.c});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),A(this,t),t.didChange&&(0,$.n)(this,t.localBounds,P),t.localBounds},getBounds(t,e){return(0,S.fB)(this,t,e||new _.c)}},R={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t)return this._onRender&&e?.removeOnRender(this),void(this._onRender=null);this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},E={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(D))}};function D(t,e){return t._zIndex-e._zIndex}var I=i(31960);const L={getGlobalPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new I.b,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getGlobalTransform(b.u.get(),i);return e=s.apply(t,e),b.u.return(s),e},toLocal(t,e,i,s){e&&(t=e.toGlobal(t,i,s));const n=this.getGlobalTransform(b.u.get(),s);return i=n.applyInverse(t,i),b.u.return(n),i}};var z=i(80347),j=i(3202);class U{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new o.u,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new z.L,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const t=e[i];t._updateFlags=15,this.addChild(t)}}enableCacheAsTexture(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(j.W.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup)return void this.addRenderGroupChild(t.renderGroup);t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup)return void this._removeRenderGroupChild(t.renderGroup);const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.push(t),t.renderGroup)return e;const i=t.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return 0===(1&this._matrixDirty)?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new o.u),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return 0===(2&this._matrixDirty)?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new o.u),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if(0===(4&this._matrixDirty))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new o.u),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}const B=new l.o(null),N=new l.o(null),F=new l.o(null,1,1),V=1,H=2,G=4;class Y extends s.A{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.uid=(0,h.L)("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new o.u,this.relativeGroupTransform=new o.u,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new l.o(this,0,0),this._scale=F,this._pivot=N,this._skew=B,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const s in e)i[s]||void 0===e[s]||(t[s]=e[s])}(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach((t=>this.addChild(t))),t.parent?.addChild(this)}static mixin(t){(0,c.t6)("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),r.XO.mixin(Y,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=4095&t}get _didChangeId(){return 4095&this._didContainerChangeTick|(4095&this._didViewChangeTick)<<12}addChild(){if(this.allowChildren||(0,c.t6)(c.lj,"addChild: Only Containers will be allowed to add children in v8.0.0"),arguments.length>1){for(let t=0;t<arguments.length;t++)this.addChild(t<0||arguments.length<=t?void 0:arguments[t]);return arguments.length<=0?void 0:arguments[0]}const t=arguments.length<=0?void 0:arguments[0],e=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),e&&(e.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,e&&e.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,0!==t._zIndex&&t.depthOfChildModified(),t)}removeChild(){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.removeChild(t<0||arguments.length<=t?void 0:arguments[t]);return arguments.length<=0?void 0:arguments[0]}const t=arguments.length<=0?void 0:arguments[0],e=this.children.indexOf(t);return e>-1&&(this._didViewChangeTick++,this.children.splice(e,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,e),t.emit("removed",this)),t}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,this.didChange||(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=d.Z.get(U,this),this.groupTransform=o.u.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),d.Z.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new o.u),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*a.bO}set angle(t){this.rotation=t*a.Td}get pivot(){return this._pivot===N&&(this._pivot=new l.o(this,0,0)),this._pivot}set pivot(t){this._pivot===N&&(this._pivot=new l.o(this,0,0)),"number"===typeof t?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===B&&(this._skew=new l.o(this,0,0)),this._skew}set skew(t){this._skew===B&&(this._skew=new l.o(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===F&&(this._scale=new l.o(this,1,1)),this._scale}set scale(t){this._scale===F&&(this._scale=new l.o(this,0,0)),"number"===typeof t?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();"object"===typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,i.width),void 0!==e&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set("number"===typeof t.x?t.x:this.position.x,"number"===typeof t.y?t.y:this.position.y),this.scale.set("number"===typeof t.scaleX?t.scaleX||1:this.scale.x,"number"===typeof t.scaleY?t.scaleY||1:this.scale.y),this.rotation="number"===typeof t.rotation?t.rotation:this.rotation,this.skew.set("number"===typeof t.skewX?t.skewX:this.skew.x,"number"===typeof t.skewY?t.skewY:this.skew.y),this.pivot.set("number"===typeof t.pivotX?t.pivotX:this.pivot.x,"number"===typeof t.pivotY?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,s=this._pivot,n=this._position,r=i._x,o=i._y,a=s._x,l=s._y;e.a=this._cx*r,e.b=this._sx*r,e.c=this._cy*o,e.d=this._sy*o,e.tx=n._x-(a*e.a+l*e.c),e.ty=n._y-(a*e.b+l*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=V,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const e=n.Q.shared.setValue(t??16777215).toBgrNumber();e!==this.localColor&&(this.localColor=e,this._updateFlags|=V,this._onUpdate())}get tint(){return k(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=H,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(t){const e=t?2:0;(2&this.localDisplayStatus)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=G,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(t){const e=t?0:4;(4&this.localDisplayStatus)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=G,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(t){const e=t?1:0;(1&this.localDisplayStatus)!==e&&(this._updateFlags|=G,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.destroyed)return;this.destroyed=!0,this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();if(("boolean"===typeof e?e:e?.children)&&t)for(let i=0;i<t.length;++i)t[i].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}r.XO.mixin(Y,f,M,L,R,O,m,x,E,{cullArea:null,cullable:!1,cullableChildren:!0},u,T,g)},36904:(t,e,i)=>{"use strict";i.d(e,{v:()=>h});var s=i(92604),n=i(8186),r=i(4841),o=i(42026),a=i(30879);const l=class t extends s.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.options=e,this.uid=(0,o.L)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,o.L)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...t.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new a.n((0,r.S)(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,o.L)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const s=Math.round(t*i),n=Math.round(e*i);return this.width=s/i,this.height=n/i,this._resolution=i,(this.pixelWidth!==s||this.pixelHeight!==n)&&(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=n,this.emit("resize",this),this._resourceId=(0,o.L)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,n.f3)(this.pixelWidth)&&(0,n.f3)(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};l.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let h=l},38903:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=(0,i(80129).p)({name:"string",data:'<svg fill="currentColor" viewBox="0 0 24 24"><path d="M7.14 15.39a1.6 1.6 0 0 1-.15-.51q-.558.62-1.44.618-.835 0-1.392-.486a1.55 1.55 0 0 1-.552-1.224q-.002-.907.672-1.392.675-.485 1.944-.492h.702v-.324q.002-.396-.204-.63c-.138-.156-.348-.24-.642-.24-.258 0-.456.06-.606.186s-.216.294-.216.504H3.732q0-.495.306-.918.306-.425.864-.66c.372-.156.792-.24 1.254-.24q1.053-.002 1.674.528.62.532.618 1.488v2.472q.002.809.228 1.23v.09H7.134zm-1.26-1.062c.228 0 .432-.048.624-.15a.97.97 0 0 0 .42-.402v-.978h-.57q-1.145 0-1.218.792v.09c0 .192.06.348.198.468s.318.186.546.186zm8.88-1.734q-.002 1.37-.588 2.136-.587.766-1.632.768-.926-.002-1.482-.714l-.066.606H9.618v-8.1h1.524v2.904q.531-.62 1.386-.618 1.044.002 1.638.768.594.765.594 2.16zm-1.524-.108q.002-.863-.276-1.266c-.18-.264-.456-.396-.816-.396q-.73 0-1.002.594v2.25q.277.601 1.014.6c.737-.001.816-.24.972-.726q.108-.351.108-1.062zm4.842 1.782q.423 0 .684-.234a.82.82 0 0 0 .276-.618h1.428q-.002.576-.318 1.062c-.21.324-.492.57-.852.75q-.538.262-1.194.264-1.223.002-1.932-.78c-.474-.516-.708-1.236-.708-2.148v-.102q0-1.314.702-2.106c.468-.528 1.11-.786 1.926-.786q1.07 0 1.716.612t.654 1.62h-1.428q-.007-.448-.276-.726c-.18-.186-.408-.276-.696-.276q-.533.002-.804.39-.27.387-.27 1.26v.156q0 .88.27 1.266.268.386.816.384z"/></svg>'})},41201:(t,e,i)=>{"use strict";i.d(e,{m:()=>o});var s=i(33596),n=i(42026);const r={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class o{constructor(t,e){this.uid=(0,n.L)("fillPattern"),this.transform=new s.u,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=r[e].addressModeU,t.source.style.addressModeV=r[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey||(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`),this._styleKey}}},41418:(t,e,i)=>{"use strict";var s=i(91478),n=i(44853),r=i(66373),o=i(45076);const a=new r.c;function l(t,e,i){const s=a;t.measurable=!0,(0,o.fB)(t,i,s),e.addBoundsMask(s),t.measurable=!1}var h=i(68851),c=i(88263),d=i(60279);function u(t,e,i){const s=c.o.get();t.measurable=!0;const n=c.u.get().identity(),r=p(t,i,n);(0,h.n)(t,s,r),t.measurable=!1,e.addBoundsMask(s),c.u.return(n),c.o.return(s)}function p(t,e,i){return t?(t!==e&&(p(t.parent,e,i),t.updateLocalTransform(),i.append(t.localTransform)),i):((0,d.R)("Mask bounds, renderable is not inside the root container"),i)}class f{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof n.k),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||l(this.mask,t,e)}addLocalBounds(t,e){u(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof n.k}}f.extension=s.Ag.MaskEffect;class g{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"===typeof t}}g.extension=s.Ag.MaskEffect;var v=i(36628);class y{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){l(this.mask,t,e)}addLocalBounds(t,e){u(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof v.mc}}y.extension=s.Ag.MaskEffect;var m=i(65852),x=i(85937),_=i(33682),b=i(41456);let w;var M=i(36904);const S=class t extends M.v{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...t.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==e.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=b.R.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await async function(){return w??(w=(async()=>{const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise((t=>{const e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()}));if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(s),t.deleteTexture(i),t.getExtension("WEBGL_lose_context")?.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),w}(),this._load=new Promise(((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,void 0!==e.preloadTimeoutMs&&(this._preloadTimeout=setTimeout((()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))}))),t.load())})),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(b.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(b.R.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(b.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};S.extension=s.Ag.TextureSource,S.defaultOptions={...M.v.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},S.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let C=S;i(99258);s.XO.add(f,g,y,C,_.b,x.q,m.P)},41456:(t,e,i)=>{"use strict";i.d(e,{R:()=>o});var s=i(96493);class n{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=s}match(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const r=class t{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new n(null,null,1/0),this.deltaMS=1/t.targetFPMS,this.elapsedMS=1/t.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.d.NORMAL;return this._addListener(new n(t,e,i))}addOnce(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.d.NORMAL;return this._addListener(new n(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(){let e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(i>this.lastTime){if(e=this.elapsedMS=i-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const t=i-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=i-t%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*t.targetFPMS;const s=this._head;let n=s.next;for(;n;)n=n.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const i=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,i)/1e3,t.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!t._shared){const e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared}static get system(){if(!t._system){const e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system}};r.targetFPMS=.06;let o=r},42026:(t,e,i)=>{"use strict";i.d(e,{L:()=>n});const s={default:-1};function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return void 0===s[t]&&(s[t]=-1),++s[t]}},42290:(t,e,i)=>{"use strict";i.d(e,{a:()=>s});class s{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}},42833:(t,e,i)=>{"use strict";var s=i(91478),n=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(n||{}),r=i(60279),o=i(23144);function a(t){if("string"!==typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function l(t){return t.split("?")[0].split("#")[0]}const h={toPosix(t){return e="\\",i="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var e,i},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),isBlobUrl:t=>t.startsWith("blob:"),hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){a(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(a(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const s=l(this.toPosix(e??o.e.get().getBaseUrl())),n=l(this.toPosix(i??this.rootname(s)));if((t=this.toPosix(t)).startsWith("/"))return h.join(n,t.slice(1));return this.isAbsolute(t)?t:this.join(s,t)},normalize(t){if(a(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;let e="";const i=(t=this.toPosix(t)).startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const s=t.endsWith("/");return(t=function(t,e){let i="",s=0,n=-1,r=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(n===a-1||1===r);else if(n!==a-1&&2===r){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){const t=i.lastIndexOf("/");if(t!==i.length-1){-1===t?(i="",s=0):(i=i.slice(0,t),s=i.length-1-i.lastIndexOf("/")),n=a,r=0;continue}}else if(2===i.length||1===i.length){i="",s=0,n=a,r=0;continue}e&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+=`/${t.slice(n+1,a)}`:i=t.slice(n+1,a),s=a-n-1;n=a,r=0}else 46===o&&-1!==r?++r:r=-1}return i}(t,!1)).length>0&&s&&(t+="/"),i?`/${t}`:e+t},isAbsolute(t){return a(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(){if(0===arguments.length)return".";let t;for(let e=0;e<arguments.length;++e){const i=e<0||arguments.length<=e?void 0:arguments[e];if(a(i),i.length>0)if(void 0===t)t=i;else{const s=(e-1<0||arguments.length<=e-1?void 0:arguments[e-1])??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return void 0===t?".":this.normalize(t)},dirname(t){if(a(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const i=47===e;let s=-1,n=!0;const r=this.getProtocol(t),o=t;for(let a=(t=t.slice(r.length)).length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!n){s=a;break}}else n=!1;return-1===s?i?"/":this.isUrl(o)?r+t:r:i&&1===s?"//":r+t.slice(0,s)},rootname(t){a(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const i=t.indexOf("/",e.length);e=-1!==i?t.slice(0,i):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){a(t),e&&a(e),t=l(this.toPosix(t));let i,s=0,n=-1,r=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){const l=t.charCodeAt(i);if(47===l){if(!r){s=i+1;break}}else-1===a&&(r=!1,a=i+1),o>=0&&(l===e.charCodeAt(o)?-1===--o&&(n=i):(o=-1,n=a))}return s===n?n=a:-1===n&&(n=t.length),t.slice(s,n)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!r){s=i+1;break}}else-1===n&&(r=!1,n=i+1);return-1===n?"":t.slice(s,n)},extname(t){a(t);let e=-1,i=0,s=-1,n=!0,r=0;for(let o=(t=l(this.toPosix(t))).length-1;o>=0;--o){const a=t.charCodeAt(o);if(47!==a)-1===s&&(n=!1,s=o+1),46===a?-1===e?e=o:1!==r&&(r=1):-1!==e&&(r=-1);else if(!n){i=o+1;break}}return-1===e||-1===s||0===r||1===r&&e===s-1&&e===i+1?"":t.slice(e,s)},parse(t){a(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let i=(t=l(this.toPosix(t))).charCodeAt(0);const s=this.isAbsolute(t);let n;e.root=this.rootname(t),n=s||this.hasProtocol(t)?1:0;let r=-1,o=0,h=-1,c=!0,d=t.length-1,u=0;for(;d>=n;--d)if(i=t.charCodeAt(d),47!==i)-1===h&&(c=!1,h=d+1),46===i?-1===r?r=d:1!==u&&(u=1):-1!==r&&(u=-1);else if(!c){o=d+1;break}return-1===r||-1===h||0===u||1===u&&r===h-1&&r===o+1?-1!==h&&(e.base=e.name=0===o&&s?t.slice(1,h):t.slice(o,h)):(0===o&&s?(e.name=t.slice(1,r),e.base=t.slice(1,h)):(e.name=t.slice(o,r),e.base=t.slice(o,h)),e.ext=t.slice(r,h)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};var c=i(11685);function d(t,e,i,s,n){const r=e[i];for(let o=0;o<r.length;o++){const a=r[o];i<e.length-1?d(t.replace(s[i],a),e,i+1,s,n):n.push(t.replace(s[i],a))}}function u(t){const e=t.match(/\{(.*?)\}/g),i=[];if(e){const s=[];e.forEach((t=>{const e=t.substring(1,t.length-1).split(",");s.push(e)})),d(t,s,0,e,i)}else i.push(t);return i}const p=t=>!Array.isArray(t);class f{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if("string"===typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}}getAlias(t){const{alias:e,src:i}=t;return(0,c.z)(e||i,(t=>"string"===typeof t?t:Array.isArray(t)?t.map((t=>t?.src??t)):t?.src?t.src:t),!0)}addManifest(t){this._manifest&&(0,r.R)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach((t=>{this.addBundle(t.name,t.assets)}))}addBundle(t,e){const i=[];let s=e;Array.isArray(e)||(s=Object.entries(e).map((t=>{let[e,i]=t;return"string"===typeof i||Array.isArray(i)?{alias:e,src:i}:{alias:e,...i}}))),s.forEach((e=>{const s=e.src,n=e.alias;let r;if("string"===typeof n){const e=this._createBundleAssetId(t,n);i.push(e),r=[n,e]}else{const e=n.map((e=>this._createBundleAssetId(t,e)));i.push(...e),r=[...n,...e]}this.add({...e,alias:r,src:s})})),this._bundles[t]=i}add(t){const e=[];let i;Array.isArray(t)?e.push(...t):e.push(t),i=t=>{this.hasKey(t)&&(0,r.R)(`[Resolver] already has key: ${t} overwriting`)};(0,c.z)(e).forEach((t=>{const{src:e}=t;let{data:s,format:n,loadParser:r}=t;const o=(0,c.z)(e).map((t=>"string"===typeof t?u(t):Array.isArray(t)?t:[t])),a=this.getAlias(t);Array.isArray(a)?a.forEach(i):i(a);const l=[];o.forEach((t=>{t.forEach((t=>{let e={};if("object"!==typeof t){e.src=t;for(let i=0;i<this._parsers.length;i++){const s=this._parsers[i];if(s.test(t)){e=s.parse(t);break}}}else s=t.data??s,n=t.format??n,r=t.loadParser??r,e={...e,...t};if(!a)throw new Error(`[Resolver] alias is undefined for this asset: ${e.src}`);e=this._buildResolvedAsset(e,{aliases:a,data:s,format:n,loadParser:r}),l.push(e)}))})),a.forEach((t=>{this._assetMap[t]=l}))}))}resolveBundle(t){const e=p(t);t=(0,c.z)(t);const i={};return t.forEach((t=>{const e=this._bundles[t];if(e){const s=this.resolve(e),n={};for(const e in s){const i=s[e];n[this._extractAssetIdFromBundle(t,e)]=i}i[t]=n}})),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if("string"!==typeof t){const t={};for(const i in e)t[i]=e[i].src;return t}return e.src}resolve(t){const e=p(t);t=(0,c.z)(t);const i={};return t.forEach((t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const i=this._getPreferredOrder(e);i?.priority.forEach((t=>{i.params[t].forEach((i=>{const s=e.filter((e=>!!e[t]&&e[t]===i));s.length&&(e=s)}))})),this._resolverHash[t]=e[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{});i[t]=this._resolverHash[t]})),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],s=this._preferredOrder.find((t=>t.params.format.includes(i.format)));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;return`${t}${/\?/.test(t)?"&":"?"}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:n,format:r}=e;return(this._basePath||this._rootPath)&&(t.src=h.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=n??t.loadParser,t.format=r??t.format??t.src.split(".").pop().split("?").shift().split("#").shift(),t}}f.RETINA_PREFIX=/@([0-9\.]+)x/;const g=(t,e)=>{const i=e.split("?")[1];return i&&(t+=`?${i}`),t};var v=i(86675),y=i(44307);const m=class t{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof v.g?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise((e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(e){let i=e;const s=t.BATCH_SIZE;for(;i-e<s&&i<this._frameKeys.length;){const t=this._frameKeys[i],e=this._frames[t],s=e.frame;if(s){let i=null,n=null;const r=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,o=new y.M(0,0,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution);i=e.rotated?new y.M(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new y.M(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(n=new y.M(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[t]=new v.g({source:this.textureSource,frame:i,orig:o,trim:n,rotate:e.rotated?2:0,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}i++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};m.BATCH_SIZE=1e3;let x=m;const _=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function b(t,e,i){const s={};if(t.forEach((t=>{s[t]=e})),Object.keys(e.textures).forEach((t=>{s[t]=e.textures[t]})),!i){const i=h.dirname(t[0]);e.linkedSheets.forEach(((t,n)=>{const r=b([`${i}/${e.data.meta.related_multi_packs[n]}`],t,!0);Object.assign(s,r)}))}return s}const w={extension:s.Ag.Asset,cache:{test:t=>t instanceof x,getCacheableAssets:(t,e)=>b(t,e,!1)},resolver:{extension:{type:s.Ag.ResolveParser,name:"resolveSpritesheet"},test:t=>{const e=t.split("?")[0].split("."),i=e.pop(),s=e.pop();return"json"===i&&_.includes(s)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(f.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:s.Ag.LoadParser,priority:n.Normal,name:"spritesheetLoader"},testParse:async(t,e)=>".json"===h.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,i){const{texture:s,imageFilename:n,textureOptions:r}=e?.data??{};let o,a=h.dirname(e.src);if(a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),s instanceof v.g)o=s;else{const s=g(a+(n??t.meta.image),e.src);o=(await i.load([{src:s,data:r}]))[s]}const l=new x(o.source,t);await l.parse();const c=t?.meta?.related_multi_packs;if(Array.isArray(c)){const t=[];for(const n of c){if("string"!==typeof n)continue;let s=a+n;e.data?.ignoreMultiPack||(s=g(s,e.src),t.push(i.load({src:s,data:{textureOptions:r,ignoreMultiPack:!0}})))}const s=await Promise.all(t);l.linkedSheets=s,s.forEach((t=>{t.linkedSheets=[l].concat(l.linkedSheets.filter((e=>e!==t)))}))}return l},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};s.XO.add(w)},44307:(t,e,i)=>{"use strict";i.d(e,{M:()=>r});var s=i(31960);const n=[new s.b,new s.b,new s.b,new s.b];class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new r(0,0,0,0)}clone(){return new r(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}strokeContains(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const{width:n,height:r}=this;if(n<=0||r<=0)return!1;const o=this.x,a=this.y,l=i*(1-s),h=i-l;return t>=o-l&&t<=o+n+l&&e>=a-l&&e<=a+r+l&&!(t>o+h&&t<o+n-h&&e>a+h&&e<a+r-h)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const i=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>i}const i=this.left,s=this.right,r=this.top,o=this.bottom;if(s<=i||o<=r)return!1;const a=n[0].set(t.left,t.top),l=n[1].set(t.left,t.bottom),h=n[2].set(t.right,t.top),c=n[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const d=Math.sign(e.a*e.d-e.b*e.c);if(0===d)return!1;if(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=i||Math.min(a.x,l.x,h.x,c.x)>=s||Math.max(a.y,l.y,h.y,c.y)<=r||Math.min(a.y,l.y,h.y,c.y)>=o)return!1;const u=d*(l.y-a.y),p=d*(a.x-l.x),f=u*i+p*r,g=u*s+p*r,v=u*i+p*o,y=u*s+p*o;if(Math.max(f,g,v,y)<=u*a.x+p*a.y||Math.min(f,g,v,y)>=u*c.x+p*c.y)return!1;const m=d*(a.y-h.y),x=d*(h.x-a.x),_=m*i+x*r,b=m*s+x*r,w=m*i+x*o,M=m*s+x*o;return!(Math.max(_,b,w,M)<=m*a.x+x*a.y||Math.min(_,b,w,M)>=m*c.x+x*c.y)}pad(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=n-s,this}getBounds(t){return t||(t=new r),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,s=t.x+t.width,n=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&s>=this.x&&s<this.x+this.width&&n>=this.y&&n<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}},44853:(t,e,i)=>{"use strict";i.d(e,{k:()=>l});var s=i(64973),n=i(86675),r=i(53693),o=i(14811),a=i(48674);class l extends a.l{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.EMPTY;t instanceof n.g&&(t={texture:t});const{texture:e=n.g.EMPTY,anchor:i,roundPixels:r,width:o,height:a,...l}=t;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new s.o({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=r??!1,void 0!==o&&(this.width=o),void 0!==a&&(this.height=a)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t instanceof n.g?new l(t):new l(n.g.from(t,e))}set texture(t){t||(t=n.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return(0,r.y)(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return(0,o.t6)("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:s,height:n}=e.orig;i.minX=-t._x*s,i.maxX=i.minX+s,i.minY=-t._y*n,i.maxY=i.minY+n}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.destroy(t);if("boolean"===typeof t?t:t?.texture){const e="boolean"===typeof t?t:t?.textureSource;this._texture.destroy(e)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){"object"===typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,this._texture.orig.width),void 0!==e&&this._setHeight(e,this._texture.orig.height)}}},45076:(t,e,i)=>{"use strict";i.d(e,{Ek:()=>a,fB:()=>r});var s=i(33596),n=i(88263);function r(t,e,i){let r,l;return i.clear(),t.parent?e?r=t.parent.worldTransform:(l=n.u.get().identity(),r=a(t,l)):r=s.u.IDENTITY,o(t,i,r,e),l&&n.u.return(l),i.isValid||i.set(0,0,0,0),i}function o(t,e,i,r){if(!t.visible||!t.measurable)return;let a;r?a=t.worldTransform:(t.updateLocalTransform(),a=n.u.get(),a.appendFrom(t.localTransform,i));const l=e,h=!!t.effects.length;if(h&&(e=n.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{t.bounds&&(e.matrix=a,e.addBounds(t.bounds));for(let i=0;i<t.children.length;i++)o(t.children[i],e,a,r)}if(h){for(let i=0;i<t.effects.length;i++)t.effects[i].addBounds?.(e);l.addBounds(e,s.u.IDENTITY),n.o.return(e)}r||n.u.return(a)}function a(t,e){const i=t.parent;return i&&(a(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}},45901:(t,e,i)=>{"use strict";i.d(e,{wC:()=>r});const s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return s=>{if(null===s||void 0===s||isNaN(s))return"";if(0===s)return"0";if(((t,e,i)=>{const s=Math.pow(10,e),n=Math.pow(10,-t);return Math.abs(i)<=n||Math.abs(i)>=s})(e,i,s)){const e=(t=>{let e=0;for(let i=0,s=(t=t.toExponential()).length;i<s&&"e"!==t[i];i++)+t[i]>=0&&e++;return e})(s);return e<=t?s.toExponential(e-1):s.toExponential(t-1)}return((t,e)=>parseFloat(t.toPrecision(e)).toString())(s,t)}},n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return n=>"number"===typeof n?s(t,e,i)(n):(t=>null===t||void 0===t?"":String(t))(n)},r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return s=>n(t,e,i)(s)}},47699:(t,e,i)=>{"use strict";i.d(e,{B:()=>h});var s=i(30801),n=i(87393);const r={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function o(t){const e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,n=/:\s*(\w+)/,r=/(\w+)\s*:\s*([\w\<\>]+)/g,o=/struct\s+(\w+)/,a=t.match(/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g)?.map((t=>({group:parseInt(t.match(e)[1],10),binding:parseInt(t.match(i)[1],10),name:t.match(s)[2],isUniform:"<uniform>"===t.match(s)[1],type:t.match(n)[1]})));if(!a)return{groups:[],structs:[]};const l=t.match(/struct\s+(\w+)\s*{([^}]+)}/g)?.map((t=>{const e=t.match(o)[1],i=t.match(r).reduce(((t,e)=>{const[i,s]=e.split(":");return t[i.trim()]=s.trim(),t}),{});return i?{name:e,members:i}:null})).filter((t=>{let{name:e}=t;return a.some((t=>t.type===e))}))??[];return{groups:a,structs:l}}var a=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(a||{});const l=Object.create(null);class h{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:s,gpuLayout:n,name:r}=t;if(this.name=r,this.fragment=e,this.vertex=i,e.source===i.source){const t=o(e.source);this.structsAndGroups=t}else{const t=o(i.source),s=o(e.source);this.structsAndGroups=function(t,e){const i=new Set,s=new Set;return{structs:[...t.structs,...e.structs].filter((t=>!i.has(t.name)&&(i.add(t.name),!0))),groups:[...t.groups,...e.groups].filter((t=>{const e=`${t.name}-${t.binding}`;return!s.has(e)&&(s.add(e),!0)}))}}(t,s)}this.layout=s??function(t){let{groups:e}=t;const i=[];for(let s=0;s<e.length;s++){const t=e[s];i[t.group]||(i[t.group]={}),i[t.group][t.name]=t.binding}return i}(this.structsAndGroups),this.gpuLayout=n??function(t){let{groups:e}=t;const i=[];for(let s=0;s<e.length;s++){const t=e[s];i[t.group]||(i[t.group]=[]),t.isUniform?i[t.group].push({binding:t.binding,visibility:a.VERTEX|a.FRAGMENT,buffer:{type:"uniform"}}):"sampler"===t.type?i[t.group].push({binding:t.binding,visibility:a.FRAGMENT,sampler:{type:"filtering"}}):"texture_2d"===t.type&&i[t.group].push({binding:t.binding,visibility:a.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return i}(this.structsAndGroups),this.autoAssignGlobalUniforms=!(void 0===this.layout[0]?.globalUniforms),this.autoAssignLocalUniforms=!(void 0===this.layout[1]?.localUniforms),this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=(0,s.X)(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=function(t){let{source:e,entryPoint:i}=t;const s={},o=e.indexOf(`fn ${i}`);if(-1!==o){const t=e.indexOf("->",o);if(-1!==t){const i=e.substring(o,t),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let l;for(;null!==(l=a.exec(i));){const t=r[l[3]]??"float32";s[l[2]]={location:parseInt(l[1],10),format:t,stride:(0,n.m)(t).stride,offset:0,instance:!1,start:0}}}}return s}(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return l[e]||(l[e]=new h(t)),l[e]}}},48674:(t,e,i)=>{"use strict";i.d(e,{l:()=>r});var s=i(66373),n=i(36628);class r extends n.mc{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new s.c(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:s}=t;return i>=e.minX&&i<=e.maxX&&s>=e.minY&&s<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){const{renderPipes:s,renderableGC:n}=e;s.blendMode.setBlendMode(this,this.groupBlendMode,t);s[this.renderPipeId].addRenderable(this,t),n.addRenderable(this),this.didViewUpdate=!1;const r=this.children,o=r.length;for(let a=0;a<o;a++)r[a].collectRenderables(t,e,i)}}},51e3:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function s(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,s,r,o){if("function"!==typeof s)throw new TypeError("The listener must be a function");var a=new n(s,r||t,o),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new s:delete t._events[e]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,s,n=[];if(0===this._eventsCount)return n;for(s in t=this._events)e.call(t,s)&&n.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,o=new Array(r);n<r;n++)o[n]=s[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},a.prototype.emit=function(t,e,s,n,r,o){var a=i?i+t:t;if(!this._events[a])return!1;var l,h,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,s),!0;case 4:return c.fn.call(c.context,e,s,n),!0;case 5:return c.fn.call(c.context,e,s,n,r),!0;case 6:return c.fn.call(c.context,e,s,n,r,o),!0}for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var u,p=c.length;for(h=0;h<p;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),d){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,s);break;case 4:c[h].fn.call(c[h].context,e,s,n);break;default:if(!l)for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c[h].fn.apply(c[h].context,l)}}return!0},a.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,s,n){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||n&&!a.once||s&&a.context!==s||o(this,r);else{for(var l=0,h=[],c=a.length;l<c;l++)(a[l].fn!==e||n&&!a[l].once||s&&a[l].context!==s)&&h.push(a[l]);h.length?this._events[r]=1===h.length?h[0]:h:o(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},53636:(t,e,i)=>{"use strict";i.d(e,{M:()=>c});var s=i(92604),n=i(95920),r=i(2590),o=i(47699),a=i(16650),l=i(5222),h=i(42026);class c extends s.A{constructor(t){super(),this.uid=(0,h.L)("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:s,resources:n,compatibleRenderers:o,groupMap:c}=t;this.gpuProgram=e,this.glProgram=i,void 0===o&&(o=0,e&&(o|=a.W.WEBGPU),i&&(o|=a.W.WEBGL)),this.compatibleRenderers=o;const d={};if(n||s||(n={}),n&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&s&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&s&&c)for(const r in c)for(const t in c[r]){const e=c[r][t];d[e]={group:r,binding:t,name:e}}else if(e&&s&&!c){const t=e.structsAndGroups.groups;c={},t.forEach((t=>{c[t.group]=c[t.group]||{},c[t.group][t.binding]=t.name,d[t.name]=t}))}else if(n){if(s={},c={},e){e.structsAndGroups.groups.forEach((t=>{c[t.group]=c[t.group]||{},c[t.group][t.binding]=t.name,d[t.name]=t}))}let t=0;for(const e in n)d[e]||(s[99]||(s[99]=new r.T,this._ownedBindGroups.push(s[99])),d[e]={group:99,binding:t,name:e},c[99]=c[99]||{},c[99][t]=e,t++);for(const e in n){const t=e;let i=n[e];i.source||i._resourceType||(i=new l.k(i));const o=d[t];o&&(s[o.group]||(s[o.group]=new r.T,this._ownedBindGroups.push(s[o.group])),s[o.group].setResource(i,o.binding))}}this.groups=s,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(s,d)}addResource(t,e,i){var s,n;(s=this._uniformBindMap)[e]||(s[e]={}),(n=this._uniformBindMap[e])[i]||(n[i]=t),this.groups[e]||(this.groups[e]=new r.T,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const s in e){const n=e[s];Object.defineProperty(i,n.name,{get:()=>t[n.group].getResource(n.binding),set(e){t[n.group].setResource(e,n.binding)}})}return i}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach((t=>{t.destroy()})),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...s}=t;let r,a;return e&&(r=o.B.from(e)),i&&(a=n.M.from(i)),new c({gpuProgram:r,glProgram:a,...s})}}},53693:(t,e,i)=>{"use strict";function s(t,e,i){const{width:s,height:n}=i.orig,r=i.trim;if(r){const i=r.width,o=r.height;t.minX=r.x-e._x*s,t.maxX=t.minX+i,t.minY=r.y-e._y*n,t.maxY=t.minY+o}else t.minX=-e._x*s,t.maxX=t.minX+s,t.minY=-e._y*n,t.maxY=t.minY+n}i.d(e,{y:()=>s})},54668:(t,e,i)=>{"use strict";let s;function n(){if("boolean"===typeof s)return s;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");s=!0===t({a:"b"},"a","b")}catch(t){s=!1}return s}i.d(e,{f:()=>n})},59963:(t,e,i)=>{"use strict";i.d(e,{n:()=>r});var s=i(5222);const n={};function r(t){let e=n[t];if(e)return e;const i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=s;return e=n[t]=new s.k({uTextures:{value:i,type:"i32",size:t}},{isStatic:!0}),e}},60279:(t,e,i)=>{"use strict";i.d(e,{R:()=>r});let s=0;const n=500;function r(){if(s!==n)if(s++,s===n)console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.");else{for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];console.warn("PixiJS Warning: ",...e)}}},63144:(t,e,i)=>{"use strict";i.d(e,{F:()=>s,a:()=>n});const s={name:"color-bit",vertex:{header:"\n            @in aColor: vec4<f32>;\n        ",main:"\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        "}},n={name:"color-bit",vertex:{header:"\n            in vec4 aColor;\n        ",main:"\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        "}}},64706:(t,e,i)=>{"use strict";i.d(e,{GH:()=>z});var s=i(91478),n=i(99530),r=i(91162),o=i(80347),a=i(14811),l=i(69769),h=i(33596),c=i(44307);function d(t,e,i,s,n){const r=e.a,o=e.b,a=e.c,l=e.d,h=e.tx,c=e.ty;i||(i=0),s||(s=2),n||(n=t.length/s-i);let d=i*s;for(let u=0;u<n;u++){const e=t[d],i=t[d+1];t[d]=r*e+a*i+h,t[d+1]=o*e+l*i+c,d+=s}}var u=i(86675),p=i(69211);const f={extension:{type:s.Ag.ShapeBuilder,name:"circle"},build(t,e){let i,s,n,r,o,a;if("circle"===t.type){const e=t;i=e.x,s=e.y,o=a=e.radius,n=r=0}else if("ellipse"===t.type){const e=t;i=e.x,s=e.y,o=e.halfWidth,a=e.halfHeight,n=r=0}else{const e=t,l=e.width/2,h=e.height/2;i=e.x+l,s=e.y+h,o=a=Math.max(0,Math.min(e.radius,Math.min(l,h))),n=l-o,r=h-a}if(!(o>=0&&a>=0&&n>=0&&r>=0))return e;const l=Math.ceil(2.3*Math.sqrt(o+a)),h=8*l+(n?4:0)+(r?4:0);if(0===h)return e;if(0===l)return e[0]=e[6]=i+n,e[1]=e[3]=s+r,e[2]=e[4]=i-n,e[5]=e[7]=s-r,e;let c=0,d=4*l+(n?2:0)+2,u=d,p=h,f=n+o,g=r,v=i+f,y=i-f,m=s+g;if(e[c++]=v,e[c++]=m,e[--d]=m,e[--d]=y,r){const t=s-g;e[u++]=y,e[u++]=t,e[--p]=t,e[--p]=v}for(let _=1;_<l;_++){const t=Math.PI/2*(_/l),h=n+Math.cos(t)*o,f=r+Math.sin(t)*a,g=i+h,v=i-h,y=s+f,m=s-f;e[c++]=g,e[c++]=y,e[--d]=y,e[--d]=v,e[u++]=v,e[u++]=m,e[--p]=m,e[--p]=g}f=n,g=r+a,v=i+f,y=i-f,m=s+g;const x=s-g;return e[c++]=v,e[c++]=m,e[--p]=x,e[--p]=v,n&&(e[c++]=y,e[c++]=m,e[--p]=x,e[--p]=y),e},triangulate(t,e,i,s,n,r){if(0===t.length)return;let o=0,a=0;for(let c=0;c<t.length;c+=2)o+=t[c],a+=t[c+1];o/=t.length/2,a/=t.length/2;let l=s;e[l*i]=o,e[l*i+1]=a;const h=l++;for(let c=0;c<t.length;c+=2)e[l*i]=t[c],e[l*i+1]=t[c+1],c>0&&(n[r++]=l,n[r++]=h,n[r++]=l-1),l++;n[r++]=h+1,n[r++]=h,n[r++]=l-1}},g={...f,extension:{...f.extension,name:"ellipse"}},v={...f,extension:{...f.extension,name:"roundedRectangle"}};var y=i(31960);const m=1e-4;function x(t,e,i,s,n,r,o,a){let l,h;o?(l=s,h=-i):(l=-s,h=i);const c=t-i*n+l,d=e-s*n+h,u=t+i*r+l,p=e+s*r+h;return a.push(c,d),a.push(u,p),2}function _(t,e,i,s,n,r,o,a){const l=i-t,h=s-e;let c=Math.atan2(l,h),d=Math.atan2(n-t,r-e);a&&c<d?c+=2*Math.PI:!a&&c>d&&(d+=2*Math.PI);let u=c;const p=d-c,f=Math.abs(p),g=Math.sqrt(l*l+h*h),v=1+(15*f*Math.sqrt(g)/Math.PI|0),y=p/v;if(u+=y,a){o.push(t,e),o.push(i,s);for(let i=1,s=u;i<v;i++,s+=y)o.push(t,e),o.push(t+Math.sin(s)*g,e+Math.cos(s)*g);o.push(t,e),o.push(n,r)}else{o.push(i,s),o.push(t,e);for(let i=1,s=u;i<v;i++,s+=y)o.push(t+Math.sin(s)*g,e+Math.cos(s)*g),o.push(t,e);o.push(n,r),o.push(t,e)}return 2*v}var b=i(10973);function w(t,e,i,s,n,r,o){const a=b(t,e,2);if(!a)return;for(let h=0;h<a.length;h+=3)r[o++]=a[h]+n,r[o++]=a[h+1]+n,r[o++]=a[h+2]+n;let l=n*s;for(let h=0;h<t.length;h+=2)i[l]=t[h],i[l+1]=t[h+1],l+=s}const M=[],S={extension:{type:s.Ag.ShapeBuilder,name:"polygon"},build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return e},triangulate(t,e,i,s,n,r){w(t,M,e,i,s,n,r)}},C={extension:{type:s.Ag.ShapeBuilder,name:"rectangle"},build(t,e){const i=t,s=i.x,n=i.y,r=i.width,o=i.height;return r>=0&&o>=0?(e[0]=s,e[1]=n,e[2]=s+r,e[3]=n,e[4]=s+r,e[5]=n+o,e[6]=s,e[7]=n+o,e):e},triangulate(t,e,i,s,n,r){let o=0;e[(s*=i)+o]=t[0],e[s+o+1]=t[1],o+=i,e[s+o]=t[2],e[s+o+1]=t[3],o+=i,e[s+o]=t[6],e[s+o+1]=t[7],o+=i,e[s+o]=t[4],e[s+o+1]=t[5],o+=i;const a=s/i;n[r++]=a,n[r++]=a+1,n[r++]=a+2,n[r++]=a+1,n[r++]=a+3,n[r++]=a+2}},k={extension:{type:s.Ag.ShapeBuilder,name:"triangle"},build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e),triangulate(t,e,i,s,n,r){let o=0;e[(s*=i)+o]=t[0],e[s+o+1]=t[1],o+=i,e[s+o]=t[2],e[s+o+1]=t[3],o+=i,e[s+o]=t[4],e[s+o+1]=t[5];const a=s/i;n[r++]=a,n[r++]=a+1,n[r++]=a+2}},T=new h.u,$=new c.M;const A={};s.XO.handleByMap(s.Ag.ShapeBuilder,A),s.XO.add(C,S,k,f,g,v);const P=new c.M,O=new h.u;function R(t,e,i){const{vertices:s,uvs:n,indices:r}=i,o=r.length,a=s.length/2,h=[],c=A.rectangle,u=P,f=t.image;u.x=t.dx,u.y=t.dy,u.width=t.dw,u.height=t.dh;const g=t.transform;c.build(u,h),g&&d(h,g),c.triangulate(h,s,2,a,r,o);const v=f.uvs;n.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const y=l.Z.get(p.G);y.indexOffset=o,y.indexSize=r.length-o,y.attributeOffset=a,y.attributeSize=s.length/2-a,y.baseColor=t.style,y.alpha=t.alpha,y.texture=f,y.geometryData=i,e.push(y)}function E(t,e,i,s,n){const{vertices:r,uvs:o,indices:a}=n;t.shapePrimitives.forEach((t=>{let{shape:h,transform:c,holes:f}=t;const g=a.length,v=r.length/2,b=[],M=A[h.type];let S="triangle-list";if(M.build(h,b),c&&d(b,c),i){const t=h.closePath??!0,i=e;i.pixelLine?(!function(t,e,i,s){const n=m;if(0===t.length)return;const r=t[0],o=t[1],a=t[t.length-2],l=t[t.length-1],h=e||Math.abs(r-a)<n&&Math.abs(o-l)<n,c=i,d=t.length/2,u=c.length/2;for(let p=0;p<d;p++)c.push(t[2*p]),c.push(t[2*p+1]);for(let p=0;p<d-1;p++)s.push(u+p,u+p+1);h&&s.push(u+d-1,u)}(b,t,r,a),S="line-list"):function(t,e,i,s,n,r){const o=m;if(0===t.length)return;const a=e;let l=a.alignment;if(.5!==e.alignment){let e=function(t){const e=t.length;if(e<6)return 1;let i=0;for(let s=0,n=t[e-2],r=t[e-1];s<e;s+=2){const e=t[s],o=t[s+1];i+=(e-n)*(o+r),n=e,r=o}return i<0?-1:1}(t);i&&(e*=-1),l=(l-.5)*e+.5}const h=new y.b(t[0],t[1]),c=new y.b(t[t.length-2],t[t.length-1]),d=s,u=Math.abs(h.x-c.x)<o&&Math.abs(h.y-c.y)<o;if(d){t=t.slice(),u&&(t.pop(),t.pop(),c.set(t[t.length-2],t[t.length-1]));const e=.5*(h.x+c.x),i=.5*(c.y+h.y);t.unshift(e,i),t.push(e,i)}const p=n,f=t.length/2;let g=t.length;const v=p.length/2,b=a.width/2,w=b*b,M=a.miterLimit*a.miterLimit;let S=t[0],C=t[1],k=t[2],T=t[3],$=0,A=0,P=-(C-T),O=S-k,R=0,E=0,D=Math.sqrt(P*P+O*O);P/=D,O/=D,P*=b,O*=b;const I=2*(1-l),L=2*l;d||("round"===a.cap?g+=_(S-P*(I-L)*.5,C-O*(I-L)*.5,S-P*I,C-O*I,S+P*L,C+O*L,p,!0)+2:"square"===a.cap&&(g+=x(S,C,P,O,I,L,!0,p))),p.push(S-P*I,C-O*I),p.push(S+P*L,C+O*L);for(let y=1;y<f-1;++y){S=t[2*(y-1)],C=t[2*(y-1)+1],k=t[2*y],T=t[2*y+1],$=t[2*(y+1)],A=t[2*(y+1)+1],P=-(C-T),O=S-k,D=Math.sqrt(P*P+O*O),P/=D,O/=D,P*=b,O*=b,R=-(T-A),E=k-$,D=Math.sqrt(R*R+E*E),R/=D,E/=D,R*=b,E*=b;const e=k-S,i=C-T,s=k-$,n=A-T,r=e*s+i*n,o=i*s-n*e,l=o<0;if(Math.abs(o)<.001*Math.abs(r)){p.push(k-P*I,T-O*I),p.push(k+P*L,T+O*L),r>=0&&("round"===a.join?g+=_(k,T,k-P*I,T-O*I,k-R*I,T-E*I,p,!1)+4:g+=2,p.push(k-R*L,T-E*L),p.push(k+R*I,T+E*I));continue}const h=(-P+S)*(-O+T)-(-P+k)*(-O+C),c=(-R+$)*(-E+T)-(-R+k)*(-E+A),d=(e*c-s*h)/o,u=(n*h-i*c)/o,f=(d-k)*(d-k)+(u-T)*(u-T),v=k+(d-k)*I,m=T+(u-T)*I,x=k-(d-k)*L,z=T-(u-T)*L,j=l?I:L;f<=Math.min(e*e+i*i,s*s+n*n)+j*j*w?"bevel"===a.join||f/w>M?(l?(p.push(v,m),p.push(k+P*L,T+O*L),p.push(v,m),p.push(k+R*L,T+E*L)):(p.push(k-P*I,T-O*I),p.push(x,z),p.push(k-R*I,T-E*I),p.push(x,z)),g+=2):"round"===a.join?l?(p.push(v,m),p.push(k+P*L,T+O*L),g+=_(k,T,k+P*L,T+O*L,k+R*L,T+E*L,p,!0)+4,p.push(v,m),p.push(k+R*L,T+E*L)):(p.push(k-P*I,T-O*I),p.push(x,z),g+=_(k,T,k-P*I,T-O*I,k-R*I,T-E*I,p,!1)+4,p.push(k-R*I,T-E*I),p.push(x,z)):(p.push(v,m),p.push(x,z)):(p.push(k-P*I,T-O*I),p.push(k+P*L,T+O*L),"round"===a.join?g+=l?_(k,T,k+P*L,T+O*L,k+R*L,T+E*L,p,!0)+2:_(k,T,k-P*I,T-O*I,k-R*I,T-E*I,p,!1)+2:"miter"===a.join&&f/w<=M&&(l?(p.push(x,z),p.push(x,z)):(p.push(v,m),p.push(v,m)),g+=2),p.push(k-R*I,T-E*I),p.push(k+R*L,T+E*L),g+=2)}S=t[2*(f-2)],C=t[2*(f-2)+1],k=t[2*(f-1)],T=t[2*(f-1)+1],P=-(C-T),O=S-k,D=Math.sqrt(P*P+O*O),P/=D,O/=D,P*=b,O*=b,p.push(k-P*I,T-O*I),p.push(k+P*L,T+O*L),d||("round"===a.cap?g+=_(k-P*(I-L)*.5,T-O*(I-L)*.5,k-P*I,T-O*I,k+P*L,T+O*L,p,!1)+2:"square"===a.cap&&(g+=x(k,T,P,O,I,L,!1,p)));for(let y=v;y<g+v-2;++y)S=p[2*y],C=p[2*y+1],k=p[2*(y+1)],T=p[2*(y+1)+1],$=p[2*(y+2)],A=p[2*(y+2)+1],Math.abs(S*(T-A)+k*(A-C)+$*(C-T))<1e-8||r.push(y,y+1,y+2)}(b,i,!1,t,r,a)}else if(f){const t=[],e=b.slice();(function(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i].shape,n=[];A[s.type].build(s,n),e.push(n)}return e})(f).forEach((i=>{t.push(e.length/2),e.push(...i)})),w(e,t,r,2,v,a,g)}else M.triangulate(b,r,2,v,a,g);const C=o.length/2,k=e.texture;if(k!==u.g.WHITE){const t=function(t,e,i,s){const n=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if("local"===e.textureSpace){const t=i.getBounds($);n.translate(-t.x,-t.y),n.scale(1/t.width,1/t.height)}else{n.translate(e.texture.frame.x,e.texture.frame.y),n.scale(1/e.texture.source.width,1/e.texture.source.height);const t=e.texture.source.style;"clamp-to-edge"===t.addressMode&&(t.addressMode="repeat",t.update())}return s&&n.append(T.copyFrom(s).invert()),n}(O,e,h,c);!function(t,e,i,s,n,r,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=0;i*=e,n*=r;const h=a.a,c=a.b,d=a.c,u=a.d,p=a.tx,f=a.ty;for(;l<o;){const o=t[i],a=t[i+1];s[n]=h*o+d*a+p,s[n+1]=c*o+u*a+f,n+=r,i+=e,l++}}(r,2,v,o,C,2,r.length/2-v,t)}else!function(t,e,i,s){let n=0;for(e*=i;n<s;)t[e]=0,t[e+1]=0,e+=i,n++}(o,C,2,r.length/2-v);const P=l.Z.get(p.G);P.indexOffset=g,P.indexSize=a.length-g,P.attributeOffset=v,P.attributeSize=r.length/2-v,P.baseColor=e.color,P.alpha=e.alpha,P.texture=k,P.geometryData=n,P.topology=S,s.push(P)}))}class D{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class I{constructor(){this.batcher=new r.J,this.instructions=new o.L}init(){this.instructions.reset()}get geometry(){return(0,a.t6)(a.Ek,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const L=class t{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){t.defaultOptions.bezierSmoothness=e?.bezierSmoothness??t.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),function(t,e){const{geometryData:i,batches:s}=e;s.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let n=0;n<t.instructions.length;n++){const e=t.instructions[n];if("texture"===e.action)R(e.data,s,i);else if("fill"===e.action||"stroke"===e.action){const t="stroke"===e.action,n=e.data.path.shapePath,r=e.data.style,o=e.data.hole;t&&o&&E(o.shapePath,r,!0,s,i),o&&(n.shapePrimitives[n.shapePrimitives.length-1].holes=o.shapePath.shapePrimitives),E(n,r,t,s,i)}}}(t,e);const i=t.batchMode;t.customShader||"no-batch"===i?e.isBatchable=!1:"auto"===i&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=l.Z.get(I),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],r=s.vertices.length,o=s.indices.length;for(let n=0;n<i.length;n++)i[n].applyTransform=!1;const a=e.batcher;a.ensureAttributeBuffer(r),a.ensureIndexBuffer(o),a.begin();for(let n=0;n<i.length;n++){const t=i[n];a.add(t)}a.finish(e.instructions);const h=a.geometry;h.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),h.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const c=a.batches;for(let l=0;l<c.length;l++){const t=c[l];t.bindGroup=(0,n.w)(t.textures.textures,t.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new D;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(l.Z.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach((t=>{l.Z.return(t)}))}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};L.extension={type:[s.Ag.WebGLSystem,s.Ag.WebGPUSystem,s.Ag.CanvasSystem],name:"graphicsContext"},L.defaultOptions={bezierSmoothness:.5};let z=L},64973:(t,e,i)=>{"use strict";i.d(e,{o:()=>s});class s{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new s(t??this._observer,this._x,this._y)}set(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._x===t&&this._y===e||(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}},65852:(t,e,i)=>{"use strict";i.d(e,{P:()=>r});var s=i(91478),n=i(36904);class r extends n.v{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(i=e instanceof Float32Array?"rgba32float":e instanceof Int32Array||e instanceof Uint32Array?"rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?"rgba16uint":(Int8Array,"bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}r.extension=s.Ag.TextureSource},66373:(t,e,i)=>{"use strict";i.d(e,{c:()=>o});var s=i(33596),n=i(44307);const r=new s.u;class o{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1/0;this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=r,this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new n.M);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=r,this}set(t,e,i,s){this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}addFrame(t,e,i,s,n){n||(n=this.matrix);const r=n.a,o=n.b,a=n.c,l=n.d,h=n.tx,c=n.ty;let d=this.minX,u=this.minY,p=this.maxX,f=this.maxY,g=r*t+a*e+h,v=o*t+l*e+c;g<d&&(d=g),v<u&&(u=v),g>p&&(p=g),v>f&&(f=v),g=r*i+a*e+h,v=o*i+l*e+c,g<d&&(d=g),v<u&&(u=v),g>p&&(p=g),v>f&&(f=v),g=r*t+a*s+h,v=o*t+l*s+c,g<d&&(d=g),v<u&&(u=v),g>p&&(p=g),v>f&&(f=v),g=r*i+a*s+h,v=o*i+l*s+c,g<d&&(d=g),v<u&&(u=v),g>p&&(p=g),v>f&&(f=v),this.minX=d,this.minY=u,this.maxX=p,this.maxY=f}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,s=this.maxX,n=this.maxY,{a:r,b:o,c:a,d:l,tx:h,ty:c}=t;let d=r*e+a*i+h,u=o*e+l*i+c;this.minX=d,this.minY=u,this.maxX=d,this.maxY=u,d=r*s+a*i+h,u=o*s+l*i+c,this.minX=d<this.minX?d:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=u>this.maxY?u:this.maxY,d=r*e+a*n+h,u=o*e+l*n+c,this.minX=d<this.minX?d:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=u>this.maxY?u:this.maxY,d=r*s+a*n+h,u=o*s+l*n+c,this.minX=d<this.minX?d:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=u>this.maxY?u:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,s){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new o(this.minX,this.minY,this.maxX,this.maxY)}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,s){let n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;s||(s=this.matrix);const l=s.a,h=s.b,c=s.c,d=s.d,u=s.tx,p=s.ty;for(let f=e;f<i;f+=2){const e=t[f],i=t[f+1],s=l*e+c*i+u,g=h*e+d*i+p;n=s<n?s:n,r=g<r?g:r,o=s>o?s:o,a=g>a?g:a}this.minX=n,this.minY=r,this.maxX=o,this.maxY=a}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}},67574:(t,e,i)=>{"use strict";i.d(e,{C:()=>s});class s{constructor(t){this.items=[],this._name=t}emit(t,e,i,s,n,r,o,a){const{name:l,items:h}=this;for(let c=0,d=h.length;c<d;c++)h[c][l](t,e,i,s,n,r,o,a);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&this.items.splice(e,1),this}contains(t){return-1!==this.items.indexOf(t)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}},67799:(t,e,i)=>{"use strict";function s(t,e){const i=t.byteLength/8|0,s=new Float64Array(t,0,i);new Float64Array(e,0,i).set(s);const n=t.byteLength-8*i;if(n>0){const s=new Uint8Array(t,8*i,n);new Uint8Array(e,8*i,n).set(s)}}i.d(e,{W:()=>s})},68851:(t,e,i)=>{"use strict";i.d(e,{n:()=>r});var s=i(33596),n=i(88263);function r(t,e,i){return e.clear(),i||(i=s.u.IDENTITY),o(t,e,i,t,!0),e.isValid||e.set(0,0,0,0),e}function o(t,e,i,r,a){let l;if(a)l=n.u.get(),l=i.copyTo(l);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const e=t.localTransform;l=n.u.get(),l.appendFrom(e,i)}const h=e,c=!!t.effects.length;if(c&&(e=n.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,l);else{t.renderPipeId&&(e.matrix=l,e.addBounds(t.bounds));const i=t.children;for(let t=0;t<i.length;t++)o(i[t],e,l,r,!1)}if(c){for(let i=0;i<t.effects.length;i++)t.effects[i].addLocalBounds?.(e,r);h.addBounds(e,s.u.IDENTITY),n.o.return(e)}n.u.return(l)}},69211:(t,e,i)=>{"use strict";i.d(e,{G:()=>o});var s=i(33596),n=i(96225);const r=new s.u;class o{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|65280&t|(255&t)<<16,i=this.renderable;return i?(0,n.u)(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(255*this.alpha<<24)}get transform(){return this.renderable?.groupTransform||r}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}},69769:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var s=i(98152);const n=new class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new s.b(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach((e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}})),t}}},69801:(t,e,i)=>{"use strict";i.d(e,{V:()=>h});var s=i(92604),n=i(66373),r=i(42026),o=i(95202),a=i(96333);function l(t,e){if(!(t instanceof o.h)){let i=e?a.S.INDEX:a.S.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),i=a.S.INDEX|a.S.COPY_DST):(t=new Float32Array(t),i=a.S.VERTEX|a.S.COPY_DST)),t=new o.h({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return t}class h extends s.A{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.uid=(0,r.L)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new n.c,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:s}=t;if(this.buffers=[],this.attributes={},e)for(const n in e)this.addAttribute(n,e[n]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=function(t){return(t instanceof o.h||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=l(t.buffer,!1),t}(e);-1===this.buffers.indexOf(i.buffer)&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=l(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,function(t,e,i){const s=t.getAttribute(e);if(!s)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const n=s.buffer.data;let r=1/0,o=1/0,a=-1/0,l=-1/0;const h=n.BYTES_PER_ELEMENT,c=(s.offset||0)/h,d=(s.stride||8)/h;for(let u=c;u<n.length;u+=d){const t=n[u],e=n[u+1];t>a&&(a=t),e>l&&(l=e),t<r&&(r=t),e<o&&(o=e)}return i.minX=r,i.minY=o,i.maxX=a,i.maxY=l,i}(this,"aPosition",this._bounds)):this._bounds}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach((t=>t.destroy())),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}},75242:(t,e,i)=>{"use strict";i.d(e,{Q:()=>R});var s={grad:.9,turn:360,rad:360/(2*Math.PI)},n=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},r=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},o=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),t>i?i:t>e?t:e},a=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},l=function(t){return{r:o(t.r,0,255),g:o(t.g,0,255),b:o(t.b,0,255),a:o(t.a)}},h=function(t){return{r:r(t.r),g:r(t.g),b:r(t.b),a:r(t.a,3)}},c=/^#([0-9a-f]{3,8})$/i,d=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},u=function(t){var e=t.r,i=t.g,s=t.b,n=t.a,r=Math.max(e,i,s),o=r-Math.min(e,i,s),a=o?r===e?(i-s)/o:r===i?2+(s-e)/o:4+(e-i)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},p=function(t){var e=t.h,i=t.s,s=t.v,n=t.a;e=e/360*6,i/=100,s/=100;var r=Math.floor(e),o=s*(1-i),a=s*(1-(e-r)*i),l=s*(1-(1-e+r)*i),h=r%6;return{r:255*[s,a,o,o,l,s][h],g:255*[l,s,s,a,o,o][h],b:255*[o,o,l,s,s,a][h],a:n}},f=function(t){return{h:a(t.h),s:o(t.s,0,100),l:o(t.l,0,100),a:o(t.a)}},g=function(t){return{h:r(t.h),s:r(t.s),l:r(t.l),a:r(t.a,3)}},v=function(t){return p((i=(e=t).s,{h:e.h,s:(i*=((s=e.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:e.a}));var e,i,s},y=function(t){return{h:(e=u(t)).h,s:(n=(200-(i=e.s))*(s=e.v)/100)>0&&n<200?i*s/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,i,s,n},m=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w={string:[[function(t){var e=c.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?r(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?r(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=_.exec(t)||b.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:l({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=m.exec(t)||x.exec(t);if(!e)return null;var i,n,r=f({h:(i=e[1],n=e[2],void 0===n&&(n="deg"),Number(i)*(s[n]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return v(r)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,s=t.b,r=t.a,o=void 0===r?1:r;return n(e)&&n(i)&&n(s)?l({r:Number(e),g:Number(i),b:Number(s),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,i=t.s,s=t.l,r=t.a,o=void 0===r?1:r;if(!n(e)||!n(i)||!n(s))return null;var a=f({h:Number(e),s:Number(i),l:Number(s),a:Number(o)});return v(a)},"hsl"],[function(t){var e=t.h,i=t.s,s=t.v,r=t.a,l=void 0===r?1:r;if(!n(e)||!n(i)||!n(s))return null;var h=function(t){return{h:a(t.h),s:o(t.s,0,100),v:o(t.v,0,100),a:o(t.a)}}({h:Number(e),s:Number(i),v:Number(s),a:Number(l)});return p(h)},"hsv"]]},M=function(t,e){for(var i=0;i<e.length;i++){var s=e[i][0](t);if(s)return[s,e[i][1]]}return[null,void 0]},S=function(t){return"string"==typeof t?M(t.trim(),w.string):"object"==typeof t&&null!==t?M(t,w.object):[null,void 0]},C=function(t,e){var i=y(t);return{h:i.h,s:o(i.s+100*e,0,100),l:i.l,a:i.a}},k=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},T=function(t,e){var i=y(t);return{h:i.h,s:i.s,l:o(i.l+100*e,0,100),a:i.a}},$=function(){function t(t){this.parsed=S(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return r(k(this.rgba),2)},t.prototype.isDark=function(){return k(this.rgba)<.5},t.prototype.isLight=function(){return k(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=h(this.rgba)).r,i=t.g,s=t.b,o=(n=t.a)<1?d(r(255*n)):"","#"+d(e)+d(i)+d(s)+o;var t,e,i,s,n,o},t.prototype.toRgb=function(){return h(this.rgba)},t.prototype.toRgbString=function(){return e=(t=h(this.rgba)).r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+s+", "+n+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,n},t.prototype.toHsl=function(){return g(y(this.rgba))},t.prototype.toHslString=function(){return e=(t=g(y(this.rgba))).h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+n+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,n},t.prototype.toHsv=function(){return t=u(this.rgba),{h:r(t.h),s:r(t.s),v:r(t.v),a:r(t.a,3)};var t},t.prototype.invert=function(){return A({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),A(C(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),A(C(this.rgba,-t))},t.prototype.grayscale=function(){return A(C(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),A(T(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),A(T(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?A({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):r(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=y(this.rgba);return"number"==typeof t?A({h:t,s:e.s,l:e.l,a:e.a}):r(e.h)},t.prototype.isEqual=function(t){return this.toHex()===A(t).toHex()},t}(),A=function(t){return t instanceof $?t:new $(t)},P=[];!function(t){t.forEach((function(t){P.indexOf(t)<0&&(t($,w),P.push(t))}))}([function(t,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var n in i)s[i[n]]=n;var r={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var n,o,a=s[this.toHex()];if(a)return a;if(null==e?void 0:e.closest){var l=this.toRgb(),h=1/0,c="black";if(!r.length)for(var d in i)r[d]=new t(i[d]).toRgb();for(var u in i){var p=(n=l,o=r[u],Math.pow(n.r-o.r,2)+Math.pow(n.g-o.g,2)+Math.pow(n.b-o.b,2));p<h&&(h=p,c=u)}return c}},e.string.push([function(e){var s=e.toLowerCase(),n="transparent"===s?"#0000":i[s];return n?new t(n).toRgb():null},"name"])}]);const O=class t{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215;this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(e){if(e instanceof t)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(null===e)throw new Error("Cannot set Color#value to null");null!==this._value&&this._isSourceEqual(this._value,e)||(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return"string"===typeof t||"number"===typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"===typeof t&&null!==t?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if("number"===i||"string"===i||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length===e.length&&t.every(((t,i)=>t===e[i]));if(null!==t&&null!==e){const i=Object.keys(t),s=Object.keys(e);return i.length===s.length&&i.every((i=>t[i]===e[i]))}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(255*e),t[1]=Math.round(255*i),t[2]=Math.round(255*s),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,s,n]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}multiply(e){const[i,s,n,r]=t._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=s,this._components[2]*=n,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=255&this._int;return e&&(i=i*t+.5|0,s=s*t+.5|0,n=n*t+.5|0),(255*t<<24)+(i<<16)+(s<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(e){let i,s,n,r;if(("number"===typeof e||e instanceof Number)&&e>=0&&e<=16777215){i=(e>>16&255)/255,s=(e>>8&255)/255,n=(255&e)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,s,n,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,s,n,r=255]=e,i/=255,s/=255,n/=255,r/=255;else if("string"===typeof e||"object"===typeof e){if("string"===typeof e){const i=t.HEX_PATTERN.exec(e);i&&(e=`#${i[2]}`)}const o=A(e);o.isValid()&&(({r:i,g:s,b:n,a:r}=o.rgba),i/=255,s/=255,n/=255)}if(void 0===i)throw new Error(`Unable to convert color ${e}`);this._components[0]=i,this._components[1]=s,this._components[2]=n,this._components[3]=r,this._refreshInt()}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(255*t<<16)+(255*e<<8)+(255*i|0)}_clamp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"===typeof t?Math.min(Math.max(t,e),i):(t.forEach(((s,n)=>{t[n]=Math.min(Math.max(s,e),i)})),t)}static isColorLike(e){return"number"===typeof e||"string"===typeof e||e instanceof Number||e instanceof t||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||void 0!==e.r&&void 0!==e.g&&void 0!==e.b||void 0!==e.r&&void 0!==e.g&&void 0!==e.b&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.l||void 0!==e.h&&void 0!==e.s&&void 0!==e.l&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.v||void 0!==e.h&&void 0!==e.s&&void 0!==e.v&&void 0!==e.a}};O.shared=new O,O._temp=new O,O.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let R=O},75276:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Axis:()=>Ia,ComposablePlot:()=>sa,DEFAULT_SHAPE_SIZE:()=>Ce,DataCursor:()=>Fh,DataLabels:()=>fi,DelaunayDiagram:()=>fl,GestureInteraction:()=>yl,InteractionContext:()=>v.OT,LabelAlignmentOptions:()=>De,LineInteraction:()=>_l,MultiAxisZoomAndPan:()=>wl,Node:()=>Jh,Nodes:()=>Wh,PlotShape:()=>we,PlotTooltip:()=>sd,Portal:()=>td,REGISTER_ZOOM_STRATEGY:()=>y.mp,RangeCursor:()=>Gh,SVGArc:()=>ph,SVGArea:()=>Ol,SVGBar:()=>mt,SVGCrosshair:()=>Dl,SVGGrid:()=>jl,SVGLine:()=>pe,SVGMultiPolygon:()=>Ee,SVGScatter:()=>Pe,SVGWhiskers:()=>Nl,SceneRenderer:()=>Jc,ShapeDrawingContext:()=>kl.D,ShapeType:()=>kl.I,SlotIds:()=>Ph,TimeTrackerCursor:()=>Uh,WindowScroll:()=>Ih,WithInteractionContext:()=>v.cm,Zoom:()=>Cl,ZoomAndPan:()=>w,ZoomStrategy:()=>y.PS,applyScaleSettings:()=>No,applyZoom:()=>Bo,calculateMetadataYSnapshot:()=>Lh,defaultZoomBox:()=>Eo,domainEquals:()=>L,domainMapEquals:()=>z,getDateDomain:()=>A,getDomain:()=>P,getDomain2D:()=>$,getDomainRange:()=>j,getDomainZoom:()=>U,insideDomain:()=>I,interactionContext:()=>v.uB,interactionContextSlot:()=>v.mz,interpolationLookup:()=>Xt,isCategoricalDomain:()=>k,isDateDomain:()=>T,isFiniteNumber:()=>b,isInvertedDomain:()=>B,isInvertedDomainForScale:()=>N,isSingleValueX:()=>qt,isSingleValueY:()=>Wt,isValidDomain:()=>S,isValidDomain2D:()=>C,joinCategoricalDomains:()=>E,joinContinuousDomains:()=>O,joinDateDomains:()=>R,joinDomains:()=>D,labelSettingChangeContext:()=>di,mergeScaleSettingsWithDefault:()=>Lo,mouseEventContext:()=>v.XY,rawShape:()=>Te,rawShapeMap:()=>Me,renderShape:()=>ke,scaleDomainToMinimumRange:()=>F,shapeMap:()=>Se,shapeRawCircle:()=>ye,shapeRawCross:()=>_e,shapeRawDiamond:()=>ge,shapeRawPentagon:()=>me,shapeRawRectangle:()=>fe,shapeRawReversedTriangle:()=>be,shapeRawStar:()=>xe,shapeRawTriangle:()=>ve});var s=i(5298),n=i(72660);var r=i(77691),o=i(63696);function a(t){return"number"===typeof t&&!isNaN(t)}function l(t){return a(t)&&t!==1/0&&t!==-1/0}function h(t){return"string"===typeof t&&Boolean(t.length)}function c(t){return"object"===typeof t&&t instanceof Date}function d(t){return l(t)||h(t)||c(t)}const u=t=>d(t.x)&&d(t.y);var p,f,g=i(47805),v=i(99821);!function(t){t.Horizontal="horizontal",t.Vertical="vertical"}(p||(p={})),function(t){t.Up="up",t.Down="down",t.Left="left",t.Right="right"}(f||(f={}));var y=i(78478),m=i(84679),x=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},_=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};function b(t){return a(t)&&t!==1/0&&t!==-1/0}let w=class extends((0,v.cm)((0,o.ID)((0,y.OP)(s.OC)))){constructor(){super(),this._mouseOver=!1,this.scaleX="zoomX",this.scaleY="zoomY",this.zoomStrategy=y.PS.Viewport,this._scrollDragState=null,this._getViewbox=()=>{var t,e,i,s,n,r;if("Viewport"===this.zoomStrategy)return this.viewbox;const o=m.j;if(this._hoverAxis){const i=null!==(e=null===(t=this.scaleZoomMap)||void 0===t?void 0:t[this._hoverAxis.scaleKey])&&void 0!==e?e:o;return"horizontal"===this._hoverAxis.orientation?{x:i,y:o}:{x:o,y:i}}return{x:null!==(s=null===(i=this.scaleZoomMap)||void 0===i?void 0:i[this.scaleX])&&void 0!==s?s:o,y:null!==(r=null===(n=this.scaleZoomMap)||void 0===n?void 0:n[this.scaleY])&&void 0!==r?r:o}},this._handleScrollDrag=t=>e=>{e.stopPropagation(),this._scrollDragState={prevX:e.clientX,prevY:e.clientY,dir:t},this._panState={prevX:e.clientX,prevY:e.clientY,scaleKey:null,slot:""},this._cursorOverlay="dragging",window.addEventListener("mousemove",this._handleScrollDragMove),window.addEventListener("mouseup",this._handleScrollDragUp)},this._handleScrollDragMove=t=>{t.preventDefault();const e=this._getViewbox();if(this._scrollDragState&&e){const[i,s]=this.getScales(),{clientX:n,clientY:r}=t,o=n-this._scrollDragState.prevX,a=r-this._scrollDragState.prevY,{x:[l,h],y:[c,d]}=e,u=Math.max(1e-9,h-l),f=Math.max(1e-9,d-c),g=i.invert(i(l)+o/u),v=i.invert(i(h)+o/u),y=s.invert(s(c)+a/f),m=s.invert(s(d)+a/f),[x,_]=this.boundsX,[b,w]=this.boundsY;let M,S;this._scrollDragState.dir===p.Horizontal?(M=this._getBoundValue(g,x,v,_,e.x),S=e.y):(M=e.x,S=this._getBoundValue(y,b,m,w,e.y));const C={x:M,y:S},k=this.panOnViewport(n,r,this._panState);this._panState=Object.assign(Object.assign({},this._panState),{prevX:n,prevY:r}),this._scrollDragState=Object.assign(Object.assign({},this._scrollDragState),{prevX:t.clientX,prevY:t.clientY}),this._dispatchPanEvent({zoomState:k,viewbox:C})}},this._handleScrollDragUp=()=>{this._scrollDragState=null,this._panState=null,window.removeEventListener("mousemove",this._handleScrollDragMove),window.removeEventListener("mouseup",this._handleScrollDragUp),this._cursorOverlay=void 0,this._panState=null},this._handleScrollDrag=this._handleScrollDrag.bind(this),this._handleScrollDragMove=this._handleScrollDragMove.bind(this),this._handleScrollDragUp=this._handleScrollDragUp.bind(this)}outerEvent(t){"wheel"===t.type?(this.wheelHandler(t),t.preventDefault(),t.stopPropagation()):"mousedown"===t.type?this.mouseDownHandler(t):"mouseenter"===t.type?this._mouseOver=!0:"mouseleave"===t.type&&(this._mouseOver=!1)}render(){if(!this.size)return;const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{[`${this._cursorOverlay}`]:!!this._cursorOverlay,normal:!!this.viewbox&&0===this.viewbox.x[0]&&1===this.viewbox.x[1]&&0===this.viewbox.y[0]&&1===this.viewbox.y[1]}),[i,n]=this.size;return s.qy`
            <div class=${t+"-cursor-overlay"}></div>
            <svg width=${i} height=${n} class="${e}">${this.renderScrollbar()}</svg>
        `}renderScrollbar(){var t;if(!this.size||!this.viewbox||this.hideScrollbarX&&this.hideScrollbarY)return;const[e,i]=this.size,n=null!==(t=this.customDomainBounds)&&void 0!==t?t:{x:this.boundsX,y:this.boundsY},r=this._getViewbox(),[o,a]=U(r,n),l=Math.max(e/o,6),h=Math.max(i/a,6),{x:[c,d],y:[u,f]}=n,{x:[g],y:[,v]}=r,y=(g-c)/(d-c)*e,m=i-(v-u)/(f-u)*i,x=!this.disableX&&!this.hideScrollbarX&&b(l),_=!this.disableY&&!this.hideScrollbarY&&b(h),w=this._mouseOver||this._panState||this._scrollDragState;return[x&&s.JW`<g class=${"horizontal-scroll"+(w?" active":"")}
                transform='translate(0,${i})'>
                <rect x='0' y='0' height='${6}' fill='${s.Lb.color_secondary_2}' width='${e}'/>
                <rect @mousedown='${this._handleScrollDrag(p.Horizontal)}'
                      class='scroll-slider horizontal'
                      x='${y}'
                      y='0'
                      height='${6}'
                      width='${l}' />
            </g>`,_&&s.JW`<g class=${"vertical-scroll"+(w?" active":"")} transform='translate(${-6},0)'>
                <rect x='0' y='0' height='${i}' fill='${s.Lb.color_secondary_2}' width='${6}'/>
                <rect @mousedown='${this._handleScrollDrag(p.Vertical)}' class='scroll-slider vertical' x='0' y='${m}' height='${h}' width='${6}'/>
            </g>`]}_getBoundValue(t,e,i,s,n){return t>=e&&i<=s?[t,i]:t>=e?[n[0],s]:t<=s?[e,n[1]]:n}};x([(0,s.MZ)({type:Boolean,attribute:"hide-scrollbar-x",reflect:!1,converter:s.Bs}),_("design:type",Boolean)],w.prototype,"hideScrollbarX",void 0),x([(0,s.MZ)({type:Boolean,attribute:"hide-scrollbar-y",reflect:!1,converter:s.Bs}),_("design:type",Boolean)],w.prototype,"hideScrollbarY",void 0),x([(0,s.wk)(),_("design:type",Object)],w.prototype,"_mouseOver",void 0),w=x([(0,s.eV)({tagName:(0,g.o)("zoom-and-pan"),styles:t=>{const{root:e,child:i,is:n}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: 100%;
                height: 100%;
                overflow: visible;
            }

            ${e} {
                width: 100%;
                height: 100%;
                overflow: visible;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                user-select: none;
            }

            .scroll-slider:hover,
            .scroll-slider-edge:hover {
                filter: brightness(50%);
            }

            :host(:hover) .horizontal-scroll,
            .horizontal-scroll.active :host(:hover) .vertical-scroll,
            .horizontal-scroll.active,
            .vertical-scroll.active,
            .scroll-active {
                opacity: 0.75 !important;
                transition: opacity 0.4s;
            }

            .horizontal-scroll,
            .vertical-scroll {
                opacity: 0;
                transition: opacity 0.4s;
            }

            .scroll-slider {
                fill: ${(0,s.Jy)("color_secondary_4")};
                cursor: all-scroll;
            }

            .scroll-slider-edge {
                fill: ${(0,s.Jy)("color_secondary_4")};
            }

            .scroll-slider-edge.left,
            ${i("cursor-overlay")}.left {
                cursor: ew-resize;
            }

            .scroll-slider-edge.right,
            ${i("cursor-overlay")}.right {
                cursor: ew-resize;
            }

            .scroll-slider-edge.up,
            ${i("cursor-overlay")}.up {
                cursor: ns-resize;
            }

            .scroll-slider-edge.down,
            ${i("cursor-overlay")}.down {
                cursor: ns-resize;
            }

            ${i("cursor-overlay")} {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                cursor: grab;
            }

            ${i("cursor-overlay")}:has(+ ${n("normal")}) {
                cursor: default !important;
            }

            ${i("cursor-overlay")}:has(+ ${n("grabbing")}) {
                cursor: grabbing !important;
            }

            ${i("cursor-overlay")}:has(+ ${n("dragging")}) {
                cursor: all-scroll !important;
            }
        `]},version:n.r}),_("design:paramtypes",[])],w);var M=i(46283);const S=t=>(null===t||void 0===t?void 0:t.every(b))||(null===t||void 0===t?void 0:t.every(h))||(null===t||void 0===t?void 0:t.every(c)),C=t=>{let{x:e,y:i}=t;return S(e)&&S(i)},k=t=>t&&(t.length>2||t.some((t=>"string"===typeof t))),T=t=>t&&(t.length>2||t.every((t=>"object"===typeof t)));function $(t){let e=1/0,i=-1/0,s=1/0,n=-1/0;return t.forEach((t=>{let{x:r,y:o}=t;a(r)&&r<e&&(e=r),a(r)&&r>i&&(i=r),a(o)&&o<s&&(s=o),a(o)&&o>n&&(n=o)})),{x:[e,i],y:[s,n]}}function A(t){return t.reduce(((t,e)=>(e<t[0]&&(t[0]=e),e>t[1]&&(t[1]=e),t)),[new Date("3000-01-01"),new Date("1000-01-01")])}function P(t){let e=1/0,i=-1/0;return t.forEach((t=>{a(t)&&t<e&&(e=t),a(t)&&t>i&&(i=t)})),[e,i]}function O(t){const e=t.filter(S).flat(1);let i=1/0,s=-1/0;return e.forEach((t=>{t<i&&(i=t),t>s&&(s=t)})),[i,s]}function R(t){const e=t.filter(S).flat(1);let i=new Date("3000-01-01"),s=new Date("1000-01-01");return e.forEach((t=>{t<i&&(i=t),t>s&&(s=t)})),[i,s]}function E(t){return[...new Set(t.flat(1))]}function D(t){return t.some(k)?E(t):t.some(T)?R(t):O(t)}const I=t=>{let{x:[e,i],y:[s,n]}=t;return t=>t.x>=e&&t.x<=i&&t.y>=s&&t.y<=n},L=(t,e)=>{if(!t||!e)return!1;const{x:[i,s],y:[n,r]}=t,{x:[o,a],y:[l,h]}=e;return i===o&&s===a&&n===l&&r===h},z=(t,e)=>{if(!(0,M.O9)(t)||!(0,M.O9)(e))return!1;const i=Object.keys(t),s=Object.keys(e);return!(i.length!==s.length||!i.every((t=>s.includes(t))))&&i.every((i=>t[i].every((t=>e[i].includes(t)))))},j=t=>{if(!t)return[NaN,NaN];const{x:[e,i],y:[s,n]}=t;return[i-e,n-s]},U=(t,e)=>{if(!t||!e)return[NaN,NaN];const{x:[i,s],y:[n,r]}=t,{x:[o,a],y:[l,h]}=e;return[(a-o)/(s-i),(h-l)/(r-n)]},B=t=>"number"===typeof t[0]&&t[0]>t[1],N=t=>B(t.domain()),F=(t,e)=>{if(Math.abs(t[1]-t[0])<e){const i=(t[0]+t[1])/2,s=e/2,n=i-s,r=i+s;return B(t)?[r,n]:[n,r]}return t};var V=i(96857);var H=i(42280),G=i(12525),Y=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},X=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const W=(t,e)=>e.some((e=>t.has(e))),q=t=>{class e extends t{constructor(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];super(e),this.data=[],this.displayLabels=!1,this.plotData=[],this.includeInDomain=!0,this.accessor=t=>t,this.xVals=()=>this.accessor(this.data).flat().map((t=>t.x)),this.yVals=()=>this.accessor(this.data).flat().map((t=>t.y)),this.plotUniqueId=`plot-${(0,G.k)()}`}getDomain2D(){return $(this.accessor(this.data))}getDomainX(t){const e=this.xVals();return"band"===t?e:"timescale"===t?A(e):"auto"===t?e.some((t=>t instanceof Date))?A(e):e.some((t=>"string"===typeof t))?e:P(e):P(e)}getDomainY(t){const e=this.yVals();return"band"===t?e:"timescale"===t?A(e):"auto"===t?e.some((t=>t instanceof Date))?A(e):e.some((t=>"string"===typeof t))?e:P(e):P(e)}getLabelSettings(t,e){if(!this.labelSettings)return e;if("function"===typeof this.labelSettings){const i=this.labelSettings(t);return i&&Object.assign(Object.assign({},e),i)||e}return e&&this.labelSettings&&Object.assign(Object.assign({},e),this.labelSettings)||e}exportSVG(){return console.warn(this.tagName,"does not support SVG export"),""}willUpdate(t){if(super.willUpdate(t),(t.has("data")||t.has("accessor"))&&this.data&&this.accessor&&(this.plotData=this.accessor(this.data)),W(t,["plotData","includeInDomain"])&&this.includeInDomain&&this.data){const t=this.getDomain2D();this.dispatchEvent(new CustomEvent("datachange",{bubbles:!0,detail:{data:this.data,domain:t}}))}W(t,["displayLabels","labelSettings"])&&this.dispatchEvent(new CustomEvent("labelsettingchange",{bubbles:!0,detail:this.id}))}}return Y([(0,s.MZ)({type:Object,reflect:!1,attribute:!1,hasChanged:H.O}),X("design:type",Object)],e.prototype,"data",void 0),Y([(0,s.MZ)(),X("design:type",Object)],e.prototype,"displayLabels",void 0),Y([(0,s.MZ)(),X("design:type",Object)],e.prototype,"labelSettings",void 0),Y([(0,s.wk)(),X("design:type",Array)],e.prototype,"plotData",void 0),Y([(0,s.MZ)(),X("design:type",Object)],e.prototype,"includeInDomain",void 0),Y([(0,s.MZ)(),X("design:type",Object)],e.prototype,"accessor",void 0),e},Z=(t,e)=>{if(0===t)return t;const i=Math.pow(10,e-Math.ceil(Math.log10(Math.abs(t)))),s=Math.round(t*i)/i;return parseFloat(s.toPrecision(e))},J=t=>Math.round(100*t)/100,K=t=>{const{root:e,is:i}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
                pointer-events: none;
                transition:
                    fill 0s,
                    stroke-width 0.2s,
                    opacity 0.2s,
                    r 0.2s;
            }

            :host {
                display: block;
                width: 100%;
                height: 100%;
            }

            ${e} {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            ${i("dashed")} .line {
                stroke-dasharray: 3 3;
            }

            svg {
                display: block;
                width: 100%;
                height: 100%;
            }

            ${i("overflow")} {
                overflow: visible;
            }

            .hover-target {
                opacity: 0;
                pointer-events: initial;
                cursor: default;
            }
            .hover-target:hover {
                opacity: initial;
            }
        `]},Q=t=>{const{is:e}=(0,s.zz)(t);return[K(t),s.AH`
            ${e("canvas","hover")} {
                cursor: var(--plot-cursor, pointer);
            }
        `]};function tt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}class et extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[i,s]of t)this.set(i,s)}get(t){return super.get(it(this,t))}has(t){return super.has(it(this,t))}set(t,e){return super.set(st(this,t),e)}delete(t){return super.delete(nt(this,t))}}Set;function it(t,e){let{_intern:i,_key:s}=t;const n=s(e);return i.has(n)?i.get(n):e}function st(t,e){let{_intern:i,_key:s}=t;const n=s(e);return i.has(n)?i.get(n):(i.set(n,e),e)}function nt(t,e){let{_intern:i,_key:s}=t;const n=s(e);return i.has(n)&&(e=i.get(n),i.delete(n)),e}function rt(t){return null!==t&&"object"===typeof t?t.valueOf():t}const ot=Symbol("implicit");function at(){var t=new et,e=[],i=[],s=ot;function n(n){let r=t.get(n);if(void 0===r){if(s!==ot)return s;t.set(n,r=e.push(n)-1)}return i[r%i.length]}return n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new et;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return n},n.range=function(t){return arguments.length?(i=Array.from(t),n):i.slice()},n.unknown=function(t){return arguments.length?(s=t,n):s},n.copy=function(){return at(e,i).unknown(s)},tt.apply(n,arguments),n}function lt(){var t,e,i=at().unknown(void 0),s=i.domain,n=i.range,r=0,o=1,a=!1,l=0,h=0,c=.5;function d(){var i=s().length,d=o<r,u=d?o:r,p=d?r:o;t=(p-u)/Math.max(1,i-l+2*h),a&&(t=Math.floor(t)),u+=(p-u-t*(i-l))*c,e=t*(1-l),a&&(u=Math.round(u),e=Math.round(e));var f=function(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;for(var s=-1,n=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(n);++s<n;)r[s]=t+s*i;return r}(i).map((function(e){return u+t*e}));return n(d?f.reverse():f)}return delete i.unknown,i.domain=function(t){return arguments.length?(s(t),d()):s()},i.range=function(t){return arguments.length?([r,o]=t,r=+r,o=+o,d()):[r,o]},i.rangeRound=function(t){return[r,o]=t,r=+r,o=+o,a=!0,d()},i.bandwidth=function(){return e},i.step=function(){return t},i.round=function(t){return arguments.length?(a=!!t,d()):a},i.padding=function(t){return arguments.length?(l=Math.min(1,h=+t),d()):l},i.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),d()):l},i.paddingOuter=function(t){return arguments.length?(h=+t,d()):h},i.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),d()):c},i.copy=function(){return lt(s(),[r,o]).round(a).paddingInner(l).paddingOuter(h).align(c)},tt.apply(d(),arguments)}var ht,ct,dt=i(28591),ut=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},pt=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};class ft extends(q((0,o.ID)(s.OC))){constructor(){var t;super(...arguments),t=this,this.mode="svg",this.clipping=!0,this.simplify=!1,this.interactable=!0,this.hide=!1,this.highlight=!1,this.hideLabel=!1,this._propsImpactCanvasRendering=t=>t.has("viewbox")||t.has("size")||t.has("data")||t.has("mode")||t.has("scaleMap"),this._isVisibilityHidden=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t._varFunc(t.hide,e,i)},this._isLabelHidden=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t._varFunc(t.hideLabel,e,i)},this._isHighlight=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t._varFunc(t.highlight,e,i)},this._isInteractable=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t._varFunc(t.interactable,e,i)},this._isFunc=t=>!!t&&"function"===typeof t,this._getDefaultStyle=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;return Object.assign(Object.assign({},i),t._style(null!==(s=t.defaultStyle)&&void 0!==s?s:{},e))},this._getHoverStyle=t=>{var e;return this._style(null!==(e=this.hoverStyle)&&void 0!==e?e:{},t)},this._getStyle=(t,e,i)=>t&&t[e]?t[e]:i,this._varFunc=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;var i;return"boolean"===typeof t?t:"number"===typeof t?t===e:"function"===typeof t?null!==(i=t(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1))&&void 0!==i&&i:!!(Array.isArray(t)&&t.length>0)&&t.indexOf(e)>-1},this._style=(t,e)=>{var i,s;return Object.fromEntries(Object.entries(this._isFunc(t)?null!==(i=t(e))&&void 0!==i?i:{}:null!==(s=t)&&void 0!==s?s:{}).filter((t=>{let[e,i]=t;return null!==i&&void 0!==i&&""!==i})))}}sceneGroup(){}async updated(t){super.updated(t);const{mode:e}=this;this._propsImpactCanvasRendering(t)&&("canvas"!==e&&"webgl"!==e||(await this.updateComplete,this.dispatchEvent(new CustomEvent("request-rerender",{bubbles:!0,detail:{target:this}}))))}_generateStyle(t,e){let{fillColor:i,fillOpacity:s,strokeColor:n,strokeWidth:r,strokeOpacity:o,strokeDashArray:a}=e,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const h=this._getHoverStyle(t);return`${(0,dt.wb)({"--plot-hover-fill":this._getStyle(h,"fillColor",i),"--plot-hover-opacity":this._getStyle(h,"fillOpacity",s),"--plot-hover-stroke":this._getStyle(h,"strokeColor",n),"--plot-hover-stroke-width":this._getStyle(h,"strokeWidth",r),"--plot-hover-stroke-opacity":this._getStyle(h,"strokeOpacity",o),"--plot-hover-stroke-dasharray":this._getStyle(h,"strokeDashArray",a)})}${l}`}_defsSlotchange(t){const e=t.target.assignedNodes();if(e.length>0){const t=e[0].children,i=this.shadowRoot.querySelector("#custom-defs");Array.from(t).forEach((t=>{i.appendChild(t.cloneNode(!0))}))}}}ut([(0,s.MZ)({type:String,reflect:!1}),pt("design:type",String)],ft.prototype,"mode",void 0),ut([(0,s.MZ)({type:Boolean,reflect:!0,converter:s.Bs}),pt("design:type",Object)],ft.prototype,"clipping",void 0),ut([(0,s.MZ)({type:Boolean,reflect:!0,converter:s.Bs}),pt("design:type",Object)],ft.prototype,"simplify",void 0),ut([(0,s.MZ)({type:Function,reflect:!1,attribute:!1,hasChanged:H.i}),pt("design:type",Object)],ft.prototype,"defaultStyle",void 0),ut([(0,s.MZ)({type:Function,reflect:!1,attribute:!1,hasChanged:H.i}),pt("design:type",Object)],ft.prototype,"hoverStyle",void 0),ut([(0,s.MZ)({type:Function,reflect:!1,attribute:!1,hasChanged:H.i}),pt("design:type",Function)],ft.prototype,"xAdjust",void 0),ut([(0,s.MZ)({type:Function,reflect:!1,attribute:!1,hasChanged:H.i}),pt("design:type",Function)],ft.prototype,"yAdjust",void 0),ut([(0,s.MZ)({type:Object,reflect:!1,converter:s.Bs,hasChanged:H.i}),pt("design:type",Object)],ft.prototype,"interactable",void 0),ut([(0,s.MZ)({type:Object,reflect:!1,hasChanged:H.i}),pt("design:type",Object)],ft.prototype,"hide",void 0),ut([(0,s.MZ)({type:Object,reflect:!1,hasChanged:H.i}),pt("design:type",Object)],ft.prototype,"highlight",void 0),ut([(0,s.MZ)({type:Object,reflect:!1,hasChanged:H.i}),pt("design:type",Object)],ft.prototype,"hideLabel",void 0),ut([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),pt("design:type",Object)],ft.prototype,"metadata",void 0),ut([(0,s.P)("canvas"),pt("design:type",HTMLCanvasElement)],ft.prototype,"_canvasRef",void 0),function(t){t[t.CLICK=0]="CLICK",t[t.GLOBAL_MOUSE_MOVE=1]="GLOBAL_MOUSE_MOVE",t[t.GLOBAL_POINTER_MOVE=2]="GLOBAL_POINTER_MOVE",t[t.GLOBAL_TOUCH_MOVE=3]="GLOBAL_TOUCH_MOVE",t[t.MOUSE_DOWN=4]="MOUSE_DOWN",t[t.MOUSE_ENTER=5]="MOUSE_ENTER",t[t.MOUSE_LEAVE=6]="MOUSE_LEAVE",t[t.MOUSE_MOVE=7]="MOUSE_MOVE",t[t.MOUSE_OUT=8]="MOUSE_OUT",t[t.MOUSE_OVER=9]="MOUSE_OVER",t[t.MOUSE_UP=10]="MOUSE_UP",t[t.MOUSE_UP_OUTSIDE=11]="MOUSE_UP_OUTSIDE",t[t.POINTER_CANCEL=12]="POINTER_CANCEL",t[t.POINTER_DOWN=13]="POINTER_DOWN",t[t.POINTER_ENTER=14]="POINTER_ENTER",t[t.POINTER_LEAVE=15]="POINTER_LEAVE",t[t.POINTER_MOVE=16]="POINTER_MOVE",t[t.POINTER_OUT=17]="POINTER_OUT",t[t.POINTER_OVER=18]="POINTER_OVER",t[t.POINTER_TAP=19]="POINTER_TAP",t[t.POINTER_UP=20]="POINTER_UP",t[t.POINTER_UP_OUTSIDE=21]="POINTER_UP_OUTSIDE",t[t.RIGHT_CLICK=22]="RIGHT_CLICK",t[t.RIGHT_DOWN=23]="RIGHT_DOWN",t[t.RIGHT_UP=24]="RIGHT_UP",t[t.RIGHT_UP_OUTSIDE=25]="RIGHT_UP_OUTSIDE",t[t.TAP=26]="TAP",t[t.TOUCH_CANCEL=27]="TOUCH_CANCEL",t[t.TOUCH_END=28]="TOUCH_END",t[t.TOUCH_END_OUTSIDE=29]="TOUCH_END_OUTSIDE",t[t.TOUCH_MOVE=30]="TOUCH_MOVE",t[t.TOUCH_START=31]="TOUCH_START",t[t.WHEEL=32]="WHEEL"}(ht||(ht={})),function(t){t[t.PATH=0]="PATH",t[t.CIRCLE=1]="CIRCLE",t[t.RECTANGLE=2]="RECTANGLE",t[t.SVG=3]="SVG",t[t.SPRITE=4]="SPRITE",t[t.REF=5]="REF"}(ct||(ct={}));var gt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},vt=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const yt={index:0,totalCount:1,offsetY:void 0};let mt=class extends ft{constructor(){var t;super(...arguments),t=this,this.group=yt,this.vertical=!1,this.bandwidth=1,this.spacing=0,this.targetSize=6,this.targetColor="black",this.targetOpacity=.2,this._elementFill=[],this._elementRect=[],this._hoverIndex=-1,this._totalOffset=[],this.yVals=()=>{const{data:e}=this,i=function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var n,r,o,a;if("string"===typeof e.y)return[e.y];const l=t._group(i),h=t._offset(l,i,s);let c=0;s>-1&&l.totalCount<2&&!t.vertical&&(c=null!==(n=t._totalOffset[s])&&void 0!==n?n:0,t._totalOffset[s]=c+Math.abs((null!==(r=e.y1)&&void 0!==r?r:0)-e.y));const d=e.y+(c||h);if(t.vertical&&(!e.y1||e.y1===e.y)){const e=(null!==(o=t.bandwidth)&&void 0!==o?o:0)/2;return[d-e,d+e]}return[d,(null!==(a=e.y1)&&void 0!==a?a:0)+(c||h)]};return this._totalOffset=[],this.accessor(e).flatMap(((t,e)=>Array.isArray(t)?t.flatMap(((t,s)=>i(t,e,s))):i(t,e)))},this.xVals=()=>{const{data:e}=this,i=function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var n,r,o,a;if("string"===typeof e.x)return[e.x];const l=t._group(i),h=t._offset(l,i,s);let c=0;s>-1&&l.totalCount<2&&t.vertical&&(c=null!==(n=t._totalOffset[s])&&void 0!==n?n:0,t._totalOffset[s]=c+Math.abs((null!==(r=e.x1)&&void 0!==r?r:0)-e.x));const d=e.x+(c||h);if(!t.vertical&&(!e.x1||e.x1===e.x)){const e=(null!==(o=t.bandwidth)&&void 0!==o?o:0)/2;return[d-e,d+e]}return[d,(null!==(a=e.x1)&&void 0!==a?a:0)+h]};return this._totalOffset=[],this.accessor(e).flatMap(((t,e)=>Array.isArray(t)?t.flatMap(((t,s)=>i(t,e,s))):i(t,e)))},this._mergedStyle=(t,e)=>{const i=this._isHighlight(t,e);let s=this._getDefaultStyle({index:t},{fillColor:"black",fillOpacity:1,strokeOpacity:1,strokeColor:"",strokeWidth:1,strokeDashArray:""});return(this._hoverIndex===t||i)&&(s=Object.assign(Object.assign({},s),this._getHoverStyle({index:t}))),s},this._calculateBars=()=>{var t;const e=(null===(t=this.data)||void 0===t?void 0:t.length)&&(Array.isArray(this.data[0])?this.data:[this.data]);if(!e)return[];const i=!Array.isArray(this.data[0]),s=this.getScales();if(!s)return[];const[n,r]=s,o=this.findBandwidths(n,r),a=e.map((t=>t.map(((t,e)=>Object.assign(Object.assign({},t),{pointIndex:e}))).filter((t=>u(t))))),l=N(r);return a.map(((t,e)=>t.map((t=>{const n=this._lowHigh(t.x,t.x1,this.vertical),r=this._lowHigh(t.y,t.y1,!this.vertical),{x:a,y:h,w:c,h:d}=this._calcFromXYtoXY(s,l,n,r,i?t.pointIndex:e,i?void 0:t.pointIndex,o);return{x:a,y:h,width:c,height:d,pointIndex:t.pointIndex}}))))},this._invalidRect=(t,e,i)=>isNaN(t.x)||isNaN(t.y)||isNaN(t.w)||isNaN(t.h)||this.clipping&&(t.x>e||t.x+t.w<0||t.y>i||t.y+t.h<0),this._lowHigh=(t,e,i)=>{const s="number"===typeof t,n=null!==e&&void 0!==e?e:i&&s?0:t;return s?[Math.min(t,n),Math.max(t,n)]:[t,n]},this._group=t=>{var e,i;const{group:s}=this;return s?"function"===typeof s?null!==(e=s(t))&&void 0!==e?e:yt:Array.isArray(s)?t<s.length&&null!==(i=s[t])&&void 0!==i?i:yt:null!==s&&void 0!==s?s:yt:yt},this._calcFromXYtoXY=(t,e,i,s,n,r,o)=>{let[a,l]=t,[h,c]=i,[d,u]=s;var p;const f=this._group(n),g=this._offset(f,n,r),v="string"===typeof d?"":g,y=a(h),m=l(d+v),x=a(c),_=l(u+v),[b,w]=this.xAdjust?this.xAdjust({v:y,v1:x,bandwidth:o[0],index:n}):this._adjust(n,y,x,o[0],this.spacing,!this.vertical),[M,S]=this.yAdjust?this.yAdjust({v:m,v1:_,bandwidth:o[1],index:n}):this._adjust(n,m,_,o[1],this.spacing,this.vertical,!1),C=Math.abs(w-b),k=Math.abs(S-M),T={x:b,y:e?M:M-k,w:C,h:k};if(r>-1&&f.totalCount<2){const t=null!==(p=this._totalOffset[r])&&void 0!==p?p:0;this.vertical?(T.x+=t,this._totalOffset[r]=t+C):(T.y-=t,this._totalOffset[r]=t+k)}return this._normalizeRect(T)},this._offset=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var s,n;return null!==(n=null===(s=t.offsetY)||void 0===s?void 0:s[i>-1?i:e])&&void 0!==n?n:0},this._targetSize=t=>{var e,i;return"function"===typeof this.targetSize?null!==(e=this.targetSize(t))&&void 0!==e?e:6:null!==(i=this.targetSize)&&void 0!==i?i:6},this._targetColor=t=>{var e,i;return"function"===typeof this.targetColor?null!==(e=this.targetColor(t))&&void 0!==e?e:"black":null!==(i=this.targetColor)&&void 0!==i?i:"black"},this._targetOpacity=t=>{var e,i;return"function"===typeof this.targetOpacity?null!==(e=this.targetOpacity(t))&&void 0!==e?e:.2:null!==(i=this.targetOpacity)&&void 0!==i?i:.2}}sceneGroup(){var t;const e=(null===(t=this.data)||void 0===t?void 0:t.length)&&Array.isArray(this.data[0]),i=this._calculateBars().flatMap(((t,i)=>{const s=e&&this._getDefaultStyle({index:i},{fillColor:"black",fillOpacity:1,strokeColor:"transparent",strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"});return t.filter((t=>{const s=e?i:t.pointIndex;return!this._isVisibilityHidden(s)})).map((t=>{const{interactable:n,useStyle:r,hoverStyle:o}=this._determineStyle(e,i,t,s),{mouseClicked:a,mouseOver:l,mouseLeave:h}=this._canvasEventHandlers(n,i,o,r),c={id:`bar-${this.plotUniqueId}-${i}-${t.pointIndex}`,kind:ct.RECTANGLE,rectangle:t,fill:{color:r.fillColor,opacity:r.fillOpacity},stroke:{color:r.strokeColor,opacity:r.strokeOpacity,width:r.strokeWidth}};return c.on={[ht.POINTER_DOWN]:a,[ht.POINTER_ENTER]:l,[ht.POINTER_LEAVE]:h},c}))}));return{id:`bar-${this.plotUniqueId}`,children:i}}exportSVG(){const[t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return this._renderSVG(t)}getDomain2D(){var t;return $(null===(t=this.accessor)||void 0===t?void 0:t.call(this,this.data).flatMap((t=>{let{x:e,y:i,x1:s,y1:n}=t;const r=[{x:e,y:i}];return s&&n?r.push({x:s,y:n}):n?r.push({x:e,y:n}):s&&r.push({x:s,y:i}),r})))}findBandwidths(t,e){var i,s;return[t.bandwidth?t.bandwidth():2*lt().domain(["1","2"]).range([t(0),t(this.bandwidth)]).padding(null!==(i=this.spacing)&&void 0!==i?i:0).bandwidth(),e.bandwidth?e.bandwidth():2*lt().domain(["1","2"]).range([e(0),e(this.bandwidth)]).padding(null!==(s=this.spacing)&&void 0!==s?s:0).bandwidth()]}render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{canvas:"svg"!==this.mode,hover:this._hoverIndex>-1});if(!this.size||!this.getScales())return;const[i,n]=this.size;return"svg"!==this.mode?s.qy``:s.qy`
            <svg width=${i} height=${n} class="${e}">
                <defs id="custom-defs"></defs>
                ${this._renderSVG(t)}
            </svg>
            <slot name="defs" @slotchange=${this._defsSlotchange}></slot>
        `}_invalidateCanvas(t){const[e,i]=this.getScales();t.scale(this._dpi,this._dpi),this._elementFill.splice(0,this._elementFill.length),this._elementRect=[],this._renderBars(e,i,((e,i,s)=>this._canvasRect(e,i,s,t)))}_invalidateGl(t){const[e,i]=this.getScales();t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clear(t.COLOR_BUFFER_BIT),this._renderBars(e,i,((e,i,s)=>this._webglRect(e,i,s,t)))}_determineStyle(t,e,i,s){const n=t?e:i.pointIndex,r=this._isHighlight(n),o=this._isInteractable(n);t||(s=this._getDefaultStyle({index:i.pointIndex},{fillColor:"black",fillOpacity:1,strokeColor:"transparent",strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"}));let a=s;const l=Object.assign(Object.assign({},s),this._getHoverStyle({index:n}));return r&&(a=l),{interactable:o,useStyle:a,hoverStyle:l}}_canvasEventHandlers(t,e,i,s){return{mouseClicked:i=>{let{event:s,target:n}=i;t&&this._handleSvgRectClick(s,e,n.rectangle.pointIndex)},mouseOver:s=>{let{event:n,target:r,updateShapes:o}=s;o(Object.assign(Object.assign({},r),{stroke:{color:i.strokeColor,opacity:i.strokeOpacity,width:i.strokeWidth},fill:{color:i.fillColor,opacity:i.fillOpacity}})),t&&this._handleSvgRectMouseEnter(n,e,r.rectangle.pointIndex)},mouseLeave:i=>{let{event:n,target:r,updateShapes:o}=i;o(Object.assign(Object.assign({},r),{stroke:{color:s.strokeColor,opacity:s.strokeOpacity,width:s.strokeWidth},fill:{color:s.fillColor,opacity:s.fillOpacity}})),t&&this._handleSvgRectMouseLeave(n,e,r.rectangle.pointIndex)}}}_renderSVG(t){const[e,i]=this.getScales();return i&&e?this._renderBars(e,i,((e,i,s)=>this._svgRect(t,e,i,s))):null}_renderBars(t,e,i){var s=this;const[n,r]=this.size,o=N(e),a=this.findBandwidths(t,e),{data:l}=this;this._totalOffset=[];const h=function(l,h){let c,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(d(l.x)&&d(l.y)){const d=s._lowHigh(l.x,l.x1,s.vertical),p=s._lowHigh(l.y,l.y1,!s.vertical);return c=s._calcFromXYtoXY([t,e],o,d,p,h,u,a),s._invalidRect(c,n,r)?(s._elementFill.push(null),s._elementRect.push(null),null):i(h,u,c,l.x,l.y)}return null};return l.map(((t,e)=>Array.isArray(t)?t.flatMap(((t,i)=>h(t,e,i))):h(t,e)))}_normalizeRect(t){return{x:J(t.x),y:J(t.y),w:J(t.w),h:J(t.h)}}_adjust(t,e,i,s,n,r){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e===i&&r){const r=this._group(t);if(r.totalCount>1){const t=1,i=s/r.totalCount,a=i*t-(null!==n&&void 0!==n?n:0),l=(i-a+(null!==n&&void 0!==n?n:0))/2+i*r.index,h=o?e-s/2+l:e+s/2-l;return[h,h+a]}const a=s/2,l=2*n>=a?0:n;return o?[e-a+l,i+a-l]:[e+a+l,i-a-l]}return[e,i]}_svgRect(t,e,i,n){const r=this._getDefaultStyle({index:e,subIndex:i},{fillColor:"black",fillOpacity:1,strokeColor:"none",strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"}),o=this._isHighlight(e),a=this._isVisibilityHidden(e),l=this._isInteractable(e),h=!a&&l?this._hoverTarget(t,e,i,n,r):null;return s.JW`
                <rect class='${t}-target${o?" highlight":""}${l?" interactable":""}'
                    x=${n.x} 
                    y=${n.y}
                    width=${n.w}
                    height=${n.h} 
                    data-testid='plot-data-point'
                    @click=${t=>this._handleSvgRectClick(t,e,i)} 
                    @mouseenter=${t=>this._handleSvgRectMouseEnter(t,e,i)} 
                    @mouseleave=${t=>this._handleSvgRectMouseLeave(t,e,i)}
                    
                    fill=${r.fillColor}
                    fill-opacity=${r.fillOpacity}                    
                    stroke=${r.strokeColor}
                    stroke-width=${r.strokeWidth}
                    stroke-opacity=${r.strokeOpacity}
                    stroke-dasharray=${r.strokeDashArray}
                    
                    visibility=${(0,s.JR)(a?"hidden":void 0)}
                    
                    style=${this._generateStyle({index:e},r)}
                />${h}`}_hoverTarget(t,e,i,n,r){const o=this._targetSize(e);if(o>0&&(!this.vertical&&n.h<o||this.vertical&&n.w<o)){const a=n.x-(this.vertical?(o-n.w)/2:0),l=n.y-(this.vertical?0:(o-n.h)/2),h=this.vertical?o:n.w,c=this.vertical?n.h:o;return s.JW`
                <rect class='${t}-target interactable'
                    x=${a} 
                    y=${l}
                    width=${h}
                    height=${c} 
                    @click=${t=>this._handleSvgRectClick(t,e,i)} 
                    @mouseenter=${t=>this._handleSvgRectMouseEnter(t,e,i)} 
                    @mouseleave=${t=>this._handleSvgRectMouseLeave(t,e,i)}
                    
                    fill=${this._targetColor(e)}
                    fill-opacity=${this._targetOpacity(e)}                    
                    stroke=${r.strokeColor}
                    stroke-width=${r.strokeWidth}
                    stroke-opacity=${r.strokeOpacity}
                    stroke-dasharray=${r.strokeDashArray}
                    style=${this._generateStyle({index:e},r)}
                />`}return null}_canvasRect(t,e,i,s){var n;const r=this._mergedStyle(t,e),o=new Path2D,a=new Path2D,l=this._isVisibilityHidden(t);if(this._elementFill.push(o),this._elementRect.push(i),!l){const t=null!==(n=r.strokeWidth)&&void 0!==n?n:1;o.rect(i.x,i.y,i.w,i.h),a.rect(i.x+t/2,i.y+t/2,i.w-t,i.h-t),this._canvasFill(s,o,r),r.strokeColor&&i.w>0&&i.h>0&&this._canvasStroke(s,a,r)}}_webglRect(t,e,i,s){return window.console.error(`support webgl not yet implemented ${t}, ${e},${i}, ${s}`),null}_canvasFill(t,e,i){t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor,t.fill(e),t.globalAlpha=1}_canvasStroke(t,e,i){t.globalAlpha=i.strokeOpacity,t.strokeStyle=i.strokeColor,t.lineWidth=i.strokeWidth;const s=i.strokeDashArray;t.setLineDash(s?s.split(" ").map((t=>Number(t))):[]),t.stroke(e),t.globalAlpha=1}_handleSvgRectClick(t,e,i){const[s,n]=this.getScalesWithMeta(),r={x:this.data[e].x,x1:this.data[e].x1,y:this.data[e].y,y1:this.data[e].y1},o={x:s.scale(r.x),x1:s.scale(r.x1),y:n.scale(r.y),y1:n.scale(r.y1)};this._dispatchClick(t,e,i,r,o),this.requestUpdate()}_handleSvgRectMouseEnter(t,e,i){const[s,n]=this.getScalesWithMeta(),r={x:this.data[e].x,x1:this.data[e].x1,y:this.data[e].y,y1:this.data[e].y1},o={x:s.scale(r.x),x1:s.scale(r.x1),y:n.scale(r.y),y1:n.scale(r.y1)};this._dispatchHover(t,e,i,r,o),this.requestUpdate()}_handleSvgRectMouseLeave(t,e,i){this._dispatchHoverEnd(t,e,i),this.requestUpdate()}_dispatchClick(t,e,i,s,n){this.dispatchEvent(new CustomEvent("bar-click",{bubbles:!0,detail:{evt:t,point:s,scaled:n,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchHover(t,e,i,s,n){this.dispatchEvent(new CustomEvent("bar-hover",{bubbles:!0,detail:{evt:t,point:s,scaled:n,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchHoverEnd(t,e,i){this.dispatchEvent(new CustomEvent("bar-hover-end",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}};gt([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),vt("design:type",Object)],mt.prototype,"group",void 0),gt([(0,s.MZ)({type:Boolean,reflect:!0,converter:s.Bs}),vt("design:type",Object)],mt.prototype,"vertical",void 0),gt([(0,s.MZ)({type:Number,reflect:!1}),vt("design:type",Object)],mt.prototype,"bandwidth",void 0),gt([(0,s.MZ)({type:Number,reflect:!1,attribute:"spacing"}),vt("design:type",Object)],mt.prototype,"spacing",void 0),gt([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),vt("design:type",Object)],mt.prototype,"targetSize",void 0),gt([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),vt("design:type",Object)],mt.prototype,"targetColor",void 0),gt([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),vt("design:type",Object)],mt.prototype,"targetOpacity",void 0),gt([(0,s.wk)(),vt("design:type",Object)],mt.prototype,"_hoverIndex",void 0),mt=gt([(0,s.eV)({tagName:(0,g.o)("svg-bar"),styles:t=>{const{child:e,is:i}=(0,s.zz)(t);return[Q(t),s.AH`
            .interactable:not([visibility='hidden']) {
                pointer-events: painted;
            }

            ${i("canvas")} ${e("target")} {
                pointer-events: all;
            }

            ${i("!canvas")} ${e("target")}:hover,
            .highlight {
                fill: var(--plot-hover-fill);
                fill-opacity: var(--plot-hover-opacity);

                stroke-width: var(--plot-hover-stroke-width);
                stroke: var(--plot-hover-stroke);
                stroke-opacity: var(--plot-hover-stroke-opacity);
                stroke-dasharray: var(--plot-hover-stroke-dasharray);

                cursor: var(--plot-cursor, pointer);
            }
        `]},version:n.r})],mt);Array.prototype.slice;function xt(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function _t(t){return function(){return t}}function bt(t){this._context=t}function wt(t){return new bt(t)}bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const Mt=Math.PI,St=2*Mt,Ct=1e-6,kt=St-Ct;function Tt(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}class $t{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Tt:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Tt;const i=10**e;return function(t){this._+=t[0];for(let e=1,s=t.length;e<s;++e)this._+=Math.round(arguments[e]*i)/i+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,s){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,e,i,s,n,r){this._append`C${+t},${+e},${+i},${+s},${this._x1=+n},${this._y1=+r}`}arcTo(t,e,i,s,n){if(t=+t,e=+e,i=+i,s=+s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let r=this._x1,o=this._y1,a=i-t,l=s-e,h=r-t,c=o-e,d=h*h+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(d>Ct)if(Math.abs(c*a-l*h)>Ct&&n){let u=i-r,p=s-o,f=a*a+l*l,g=u*u+p*p,v=Math.sqrt(f),y=Math.sqrt(d),m=n*Math.tan((Mt-Math.acos((f+d-g)/(2*v*y)))/2),x=m/y,_=m/v;Math.abs(x-1)>Ct&&this._append`L${t+x*h},${e+x*c}`,this._append`A${n},${n},0,0,${+(c*u>h*p)},${this._x1=t+_*a},${this._y1=e+_*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,i,s,n,r){if(t=+t,e=+e,r=!!r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(s),a=i*Math.sin(s),l=t+o,h=e+a,c=1^r,d=r?s-n:n-s;null===this._x1?this._append`M${l},${h}`:(Math.abs(this._x1-l)>Ct||Math.abs(this._y1-h)>Ct)&&this._append`L${l},${h}`,i&&(d<0&&(d=d%St+St),d>kt?this._append`A${i},${i},0,1,${c},${t-o},${e-a}A${i},${i},0,1,${c},${this._x1=l},${this._y1=h}`:d>Ct&&this._append`A${i},${i},0,${+(d>=Mt)},${c},${this._x1=t+i*Math.cos(n)},${this._y1=e+i*Math.sin(n)}`)}rect(t,e,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function At(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(null==i)e=null;else{const t=Math.floor(i);if(!(t>=0))throw new RangeError(`invalid digits: ${i}`);e=t}return t},()=>new $t(e)}function Pt(t){return t[0]}function Ot(t){return t[1]}function Rt(t,e){var i=_t(!0),s=null,n=wt,r=null,o=At(a);function a(a){var l,h,c,d=(a=xt(a)).length,u=!1;for(null==s&&(r=n(c=o())),l=0;l<=d;++l)!(l<d&&i(h=a[l],l,a))===u&&((u=!u)?r.lineStart():r.lineEnd()),u&&r.point(+t(h,l,a),+e(h,l,a));if(c)return r=null,c+""||null}return t="function"===typeof t?t:void 0===t?Pt:_t(t),e="function"===typeof e?e:void 0===e?Ot:_t(e),a.x=function(e){return arguments.length?(t="function"===typeof e?e:_t(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:_t(+t),a):e},a.defined=function(t){return arguments.length?(i="function"===typeof t?t:_t(!!t),a):i},a.curve=function(t){return arguments.length?(n=t,null!=s&&(r=n(s)),a):n},a.context=function(t){return arguments.length?(null==t?s=r=null:r=n(s=t),a):s},a}var Et=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Dt=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const It=t=>{class e extends t{constructor(){super(...arguments),this.filter=(t,e)=>t}getFilteredData(){if(this.plotData&&this.plotData.length>0&&Array.isArray(this.plotData[0])){const t=[];return this.plotData.forEach((e=>{Array.isArray(e)&&t.push(this.filter(e,this.viewbox))})),t}return this.filter(this.plotData,this.viewbox)}willUpdate(t){super.willUpdate(t),(0,dt.TI)(t,["plotData","viewbox","filter"])&&this.plotData&&this.viewbox&&(this.filteredData=this.getFilteredData())}}return Et([(0,s.wk)(),Dt("design:type",Object)],e.prototype,"filteredData",void 0),Et([(0,s.MZ)(),Dt("design:type",Object)],e.prototype,"filter",void 0),e};function Lt(t,e){this._context=t,this._t=e}function zt(t){return t<0?-1:1}function jt(t,e,i){var s=t._x1-t._x0,n=e-t._x1,r=(t._y1-t._y0)/(s||n<0&&-0),o=(i-t._y1)/(n||s<0&&-0),a=(r*n+o*s)/(s+n);return(zt(r)+zt(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(a))||0}function Ut(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function Bt(t,e,i){var s=t._x0,n=t._y0,r=t._x1,o=t._y1,a=(r-s)/3;t._context.bezierCurveTo(s+a,n+a*e,r-a,o-a*i,r,o)}function Nt(t){this._context=t}function Ft(t){this._context=new Vt(t)}function Vt(t){this._context=t}function Ht(t,e,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function Gt(t,e){this._context=t,this._k=(1-e)/6}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}}this._x=t,this._y=e}},Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bt(this,this._t0,Ut(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Bt(this,Ut(this,i=jt(this,t,e)),i);break;default:Bt(this,this._t0,i=jt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}},(Ft.prototype=Object.create(Nt.prototype)).point=function(t,e){Nt.prototype.point.call(this,e,t)},Vt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,s,n,r){this._context.bezierCurveTo(e,t,s,i,r,n)}},Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ht(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ht(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Yt=function t(e){function i(t){return new Gt(t,e)}return i.tension=function(e){return t(+e)},i}(0),Xt={straight:wt,"last-good":function(t){return new Lt(t,1)},"interpolate-monotone":function(t){return new Nt(t)},"interpolate-curve":Yt},Wt=t=>1===t.length&&!a(t[0].x),qt=t=>1===t.length&&!a(t[0].y);var Zt=i(46821);const Jt=(t,e,i,s,n)=>{const r=i-t,o=s-e;if(Math.abs(r)<1e-9)return{angleTop:1/0,angleBottom:-1/0};const a=Math.atan2(o,r);return{angleTop:a+n,angleBottom:a-n}},Kt=(t,e,i,s,n)=>{if(e>=t.length-1)return;const r=s(t[e],e,t),o=n(t[e],e,t);let a=s(t[e+1],e+1,t),l=n(t[e+1],e+1,t),{angleTop:h,angleBottom:c}=Jt(r,o,i,a,l);for(let d=e+2;d<t.length;++d){const e=s(t[d],d,t),u=n(t[d],d,t),{angleTop:p,angleBottom:f}=Jt(r,o,e,u,i),{angleTop:g,angleBottom:v}=Jt(a,l,e,u,i);if(h=Math.min(h,p,g),c=Math.max(c,f,v),h<c)return d-1;a=e,l=u}return t.length-1},Qt=(t,e)=>{const i=t.length;return t.reduce(((t,s,n)=>{const r=e[n];return r<s.min?t|1<<n:r>s.max?t|1<<n+i:t}),0)},te=(t,e,i,s,n)=>i+(s-i)*(n-t)/(e-t),ee=(t,e,i,s,n,r)=>{const o=t?e[i].min:e[i].max;for(let a=0;a<e.length;++a)a!==i&&(s[a]=te(n[i],r[i],n[a],r[a],o));s[i]=o};function ie(t,e){return t.reduce(((t,i,s,n)=>{if(0===s)return t;const r=((t,e,i,s)=>{const n=t.length,r=new Array(t.length),o=new Array(t.length);((t,e,i,s,n,r)=>{for(let o=0;o<t.length;++o)e[o]=t[o].accessor(i[s],s,i),n[o]=t[o].accessor(i[r],r,i)})(t,r,e,i,o,s);let a=Qt(t,r),l=Qt(t,o);for(;;){if(0===a&&0===l)return!0;if(a&l)break;const e=0!==a?r:o,i=(h=0!==a?a:l,31-Math.clz32(h)),s=i%n;if(r[s]===o[s])break;ee(i<n,t,s,e,r,o),0!==a?a=Qt(t,r):l=Qt(t,o)}var h;return!1})(e,n,s,s-1);return r?(t.lastInVolume?t.paths[t.paths.length-1].push(i):t.paths.push([n[s-1],i]),t.lastInVolume=!0):t.lastInVolume=!1,t}),{lastInVolume:!1,paths:[]}).paths}const se=(t,e,i)=>t?e.max>=i:e.min<=i,ne=(t,e,i)=>t?e.min>i:e.max<i,re=(t,e)=>{if(!(null===t||void 0===t?void 0:t.length))return[];if(!(null===e||void 0===e?void 0:e.length))return[t];let i=[t];if(t.length>=2){const s=((t,e)=>e.find((e=>((t,e)=>{if(t.length<2)return!0;let i=e.accessor(t[0],0,t);const s=e.accessor(t[t.length-1],t.length-1,t)>=i;for(let n=1;n<t.length;++n){const r=e.accessor(t[n],n,t);if(s?r<i:r>i)return!1;i=r}return!0})(t,e))))(t,e);s&&(i=((t,e)=>{const i=t.accessor(e[0],0,e),s=t.accessor(e[e.length-1],e.length-1,e),n=s<i;if(((t,e,i,s)=>t?e.min>i||e.max<s:e.min>s||e.max<i)(n,t,s,i)){let i=-1,s=-1;for(let r=0;r<e.length;++r){const o=t.accessor(e[r],r,e);if(-1===i&&se(n,t,o)&&(i=Math.max(0,r-1)),-1===s&&ne(n,t,o)){s=r+1;break}}return-1===i?[]:[e.slice(i,-1===s?e.length:s)]}return[e]})(s,t))}return i.flatMap((t=>ie(t,e)))};var oe=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ae=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const le=(0,M.Fs)((t=>{const[e]=Array.from(t.matchAll(/var\(--(.+)\)/g),(t=>t[1]));return e?s.Lb[e.replace(/-/g,"_")]:t}),(t=>{const[e]=Array.from(t.matchAll(/rgb\((.+)\)/g),(t=>t[1]));return e?"#"+e.split(",").map((t=>Number(t))).map((t=>t.toString(16))).map((t=>t.length<2?`0${t}`:t)).join(""):t}),(t=>{const[e]=Array.from(t.matchAll(/rgba\((.+)\)/g),(t=>t[1]));if(e){const[t,i,s,n]=e.split(",").map((t=>Number(t)));return"#"+[t,i,s,Math.floor(255*n)].map((t=>t.toString(16))).map((t=>t.length<2?`0${t}`:t)).join("")}return t})),he=t=>{class e extends t{constructor(){super(...arguments),this._color="black",this._opacity=1}set color(t){const e=this._color;if(e!==t){const i=le(t),[s,n]=(t=>{if(t.startsWith("#")&&t.length>7){const e=t.slice(7);return[t.slice(0,7),Number.parseInt(e,16)/255]}return[t,1]})(i);this._color=s,this._opacity=n,this.requestUpdate("color",e)}}get color(){return this._color}get opacity(){return this._opacity}get exportOpacity(){return(this.style.opacity?Number(this.style.opacity):1)*this._opacity}}return oe([(0,s.MZ)(),ae("design:type",Function)],e.prototype,"colorFunc",void 0),oe([(0,s.MZ)(),ae("design:type",Function)],e.prototype,"opacityFunc",void 0),oe([(0,s.MZ)(),ae("design:type",String),ae("design:paramtypes",[String])],e.prototype,"color",null),e};var ce=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},de=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const ue=(t,e)=>{t(...e)};let pe=class extends(he(It(ft))){constructor(){super(...arguments),this.lineWidth=1,this.lineStyle="solid",this.interpolation="straight",this.draggable=!1,this.targetRadius=9,this.targetColor="black",this.targetOpacity=.2,this.drawAsTrend=!1,this._missing=[],this._bandwidth=t=>t.bandwidth?t.bandwidth():void 0,this._targetRadius=t=>{var e,i;return"function"===typeof this.targetRadius?null!==(e=this.targetRadius(t))&&void 0!==e?e:9:null!==(i=this.targetRadius)&&void 0!==i?i:9},this._targetColor=t=>{var e,i;return"function"===typeof this.targetColor?null!==(e=this.targetColor(t))&&void 0!==e?e:"black":null!==(i=this.targetColor)&&void 0!==i?i:"black"},this._targetOpacity=t=>{var e,i;return"function"===typeof this.targetOpacity?null!==(e=this.targetOpacity(t))&&void 0!==e?e:.2:null!==(i=this.targetOpacity)&&void 0!==i?i:.2},this._preprocessData=()=>{this._preprocessed=this._simplifyData()},this._simplifyData=()=>{var t;const e=(null===(t=this.data)||void 0===t?void 0:t.length)&&(Array.isArray(this.data[0])?this.data:[this.data])||[],i=this.getScales();if(!this.simplify||!this.viewbox||!i||!e.length)return e;const[s,n]=i,r=this._bandwidth(s),o=this._bandwidth(n),a=this._xAdjustedFn(s,r),l=this._yAdjustedFn(n,o);return e.reduce(((t,e)=>{if(this._isSingleValueOrTrendLine(e))return t.push(e),t;const i=e.filter((t=>u(t)));return this._isSparse(i)?(t.push(i),t):(t.push(function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t=>t.x,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t=>t.y;const n=[];let r=0;for(;void 0!==r;)n.push(r),r=Kt(t,r,e,i,s);return n.map((e=>t[e]))}(i,Math.PI/30,a,l)),t)}),[])},this._isSingleValueOrTrendLine=t=>Wt(t)||qt(t)||2===t.length&&u(t[0])&&u(t[1])&&this.drawAsTrend,this._unifyPaths=(t,e)=>e?[t.join(" ")]:t,this._roundedXAdjustedFn=(t,e)=>(i,s,n)=>J(this._xAdjustedFn(t,e)(i,s,n)),this._roundedYAdjustedFn=(t,e)=>(i,s,n)=>J(this._yAdjustedFn(t,e)(i,s,n))}sceneGroup(){const t=this._getPaths(!0);if(!(null===t||void 0===t?void 0:t.length))return{id:`line-${this.plotUniqueId}`,children:[]};const e=t.flatMap((t=>{let{paths:e,seriesIdx:i}=t;const s=(0,Zt.Ae)(this.lineStyle,this.lineWidth),n=this._getDefaultStyle({index:i},{fillColor:"none",fillOpacity:this.opacity,strokeColor:this.color,strokeWidth:this.lineWidth,strokeOpacity:1,strokeDashArray:s["stroke-dasharray"],strokeLinecap:s["stroke-linecap"]});return e.map(((t,e)=>({id:`line-${this.plotUniqueId}-path-${i}-${e}`,stroke:{color:n.strokeColor,opacity:n.strokeOpacity,width:n.strokeWidth,dashArray:this._convertToDashArray(n.strokeDashArray)},kind:ct.PATH,path:{svgPath:t}})))})),i=t.flatMap((t=>{let{paths:e,seriesIdx:i}=t;if(!this._isInteractable(i))return[];const s=e.map(((t,e)=>({id:`line-target-${this.plotUniqueId}-path-${i}-${e}`,stroke:{color:this._targetColor(i),opacity:0,width:this._targetRadius(i)},kind:ct.PATH,path:{svgPath:t}}))),n=function(t,e){let i,s,n=Date.now()-e;return function(){i&&clearTimeout(i);const r=Date.now(),o=Math.max(0,n-r+e);return i=setTimeout((()=>{s=t(...arguments),n=Date.now(),i=null}),o),s}}(ue,100),r=t=>{let{event:e,updateShapes:r}=t;const o=s.map((t=>Object.assign(Object.assign({},t),{stroke:{color:this._targetColor(i),opacity:.2,width:this._targetRadius(i)}})));n(r,o),r(...o),this._handleSvgLineMouseOver(e,i)},o=t=>{let{event:e,updateShapes:r}=t;const o=s.map((t=>Object.assign(Object.assign({},t),{stroke:{color:this._targetColor(i),opacity:0,width:this._targetRadius(i)}})));n(r,o),this._handleSvgLineMouseLeave(e,i)},a=t=>{let{event:e}=t;this._handleSvgLineDown(e,i)};return s.forEach((t=>{t.on={[ht.POINTER_ENTER]:r,[ht.POINTER_LEAVE]:o,[ht.POINTER_DOWN]:a}})),s}));return{id:`line-${this.plotUniqueId}`,children:[...e,...i]}}exportSVG(){return this.renderLine()}getPath(){if(!this.size||!this.getScales())return;const t=this._getPaths();return(null===t||void 0===t?void 0:t.length)?t[0].paths[0]:void 0}willUpdate(t){super.willUpdate(t),(t.has("data")||t.has("scaleMap")||t.has("simplify"))&&this._preprocessData()}render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{dashed:"dashed"===this.lineStyle,interactable:"boolean"===typeof this.interactable&&this.interactable});if(!this.size||!this.getScales())return;const[i,n]=this.size;return"svg"!==this.mode?s.qy``:s.qy`
            <svg width=${i} height=${n} class="${e}">
                <defs id="custom-defs"></defs>
                ${this._discontinuousLine(t)}
            </svg>
            <slot name="defs" @slotchange=${this._defsSlotchange}></slot>
        `}renderLine(){const t=this._getPaths(),e=(0,Zt.Ae)(this.lineStyle,this.lineWidth);return s.JW`
            ${t.flatMap((t=>{let{paths:i,seriesIdx:n}=t;return i.map((t=>{const i=this._getDefaultStyle({index:n})||{},r=(null===i||void 0===i?void 0:i.strokeDashArray)||e["stroke-dasharray"],o=(null===i||void 0===i?void 0:i.strokeLinecap)||e["stroke-linecap"],a=(null===i||void 0===i?void 0:i.strokeColor)||this.color,l=(null===i||void 0===i?void 0:i.strokeWidth)||this.lineWidth;return s.JW`
                            <path
                                class="line"
                                d=${t}
                                opacity=${this.exportOpacity}
                                fill="none"
                                stroke-width=${l}
                                stroke=${a}
                                stroke-dasharray="${r}"
                                stroke-linecap="${null!==o&&void 0!==o?o:"butt"}"
                            />`}))}))}`}_invalidateCanvas(t){throw new Error("not implemented"+t)}_invalidateGl(t){throw new Error("not implemented"+t)}_discontinuousLine(t){const e=this._getPaths(),i=(0,Zt.Ae)(this.lineStyle,this.lineWidth);return e.flatMap((e=>{let{paths:n,seriesIdx:r}=e;const o=this._getDefaultStyle({index:r},{fillColor:"none",fillOpacity:this.opacity,strokeColor:this.color,strokeWidth:this.lineWidth,strokeOpacity:1,strokeDashArray:i["stroke-dasharray"],strokeLinecap:i["stroke-linecap"]}),a=n.map(((e,i)=>{const n=o.fillColor&&"none"!==o.fillColor?"currentColor":"none",[a]=this._renderMissingSvg(t,r,n,o),l=this._isVisibilityHidden(r);return s.JW`<defs>
                    <g id="${"line-p-"+r}-${i}" color="${o.fillColor}">
                        <path
                            class="${t}-p${l?" hidden":""}"
                            d="${e}"
                            fill='${n}'></path>
                     </g>
                    </defs>
                    ${a}
                    <use
                        href="#line-p-${r}-${i}" class="${t}-target"
                        fill-opacity="${o.fillOpacity}"
                        stroke="${o.strokeColor}"
                        stroke-width="${o.strokeWidth}"
                        stroke-opacity="${o.strokeOpacity}"
                        stroke-dasharray=${o.strokeDashArray}
                        stroke-linecap=${o.strokeLinecap}
                        visibility=${(0,s.JR)(l?"hidden":void 0)}
                        style=${this._generateStyle({index:r},o)}></use>`})),l=n.map(((e,i)=>{const n=o.fillColor&&"none"!==o.fillColor?"currentColor":"none",[,a]=this._renderMissingSvg(t,r,n,o),l=this._isHighlight(r)?" highlight":"";return this._isInteractable(r)?s.JW`<g class="${t}-hover-target${l}"
                        stroke-width="${this._targetRadius(r)}"
                        stroke="${this._targetColor(r)}"
                        @mousedown=${t=>this._handleSvgLineDown(t,r)}
                        @click=${t=>this._dispatchClick(t,r)}
                        @mouseenter=${t=>this._handleSvgLineMouseOver(t,r)}
                        @mouseleave=${t=>this._handleSvgLineMouseLeave(t,r)}>
                    <use href="#line-p-${r}-${i}"></use>
                    ${a}
                </g>`:null}));return s.JW`${a}<g class="${t}-hover-container" stroke-opacity="${this._targetOpacity(r)}">${l}</g>`}))}_convertToDashArray(t){if(!t)return;const e=t.split(" ").map(Number);return e.some((t=>isNaN(t)))?void 0:e}_renderMissingSvg(t,e,i,n){let r,o;return this._missing&&null!=this._missing[e]?(r=this._missing[e].map((e=>e?s.JW`<path
                            class="${t}-p"
                            d="${e}"
                            stroke='${this.missingColor}'
                            stroke-width="${n.strokeWidth}"
                            stroke-opacity="${n.strokeOpacity}"
                            stroke-dasharray='3 3'
                            fill='${i}'></path>`:null)),o=this._missing[e].map((e=>e?s.JW`<path class="${t}-p" d="${e}" fill='none'></path>`:null))):(r=null,o=null),[r,o]}_getPaths(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e;const i=this.getScales();if(!(null===i||void 0===i?void 0:i.length))return[];const[s,n]=i,r=this._bandwidth(s),o=this._bandwidth(n),[a,l]=this.size;this._missing=[];const h=this._roundedXAdjustedFn(s,r),c=this._roundedYAdjustedFn(n,o),d=[{accessor:h,min:0,max:a},{accessor:c,min:0,max:l}],p=this._setupLinegen(h,c),f=this._setupInterpolation(p);return(this._preprocessed||((null===(e=this.data)||void 0===e?void 0:e.length)&&Array.isArray(this.data[0])?this.data:[this.data])||[]).map(((e,i)=>{if(Wt(e))return{paths:[`M 0 ${J(n(e[0].y))} H ${a}`],seriesIdx:i};if(qt(e))return{paths:[`M ${J(s(e[0].x))} 0 V ${l}`],seriesIdx:i};if(2===e.length&&u(e[0])&&u(e[1])&&this.drawAsTrend)return{paths:[this._generateTrendPath(e)],seriesIdx:i};const r=e.filter((t=>u(t))),o=this._generatePaths(f,p,i,r,d);return{paths:this._unifyPaths(o,t),seriesIdx:i}})).filter((t=>{var e;return!!(null===(e=t.paths)||void 0===e?void 0:e.length)}))}_isSparse(t){if(!this.viewbox||!this.size)return!0;const[e,i]=this.size,[s,n]=[Math.abs(this.viewbox.x[1]-this.viewbox.x[0]),Math.abs(this.viewbox.y[1]-this.viewbox.y[0])],r=t.length;return e>=r*s||i>=r*n}_generatePaths(t,e,i,s,n){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var o;let a;t?(a=null!==(o=t(i))&&void 0!==o?o:"straight",e.curve(Xt[a])):a=this.interpolation;const l=this._genMissingValuePath(s,e);l&&this._missing.push(l);let h=[s];return this.clipping&&"straight"===a&&(h=re(s,n)),r?h:h.map((t=>e(t)))}_generateTrendPath(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[i,s]=this.size,[n,r]=this.getScales(),o=this._bandwidth(n),a=this._bandwidth(r),l=this._xAdjustedFn(n,o),h=this._yAdjustedFn(r,a),[c,d]=t,u={x:l(c,0,t),y:h(c,0,t)},p={x:l(d,1,t),y:h(d,1,t)};if(u.x===p.x)return`M ${J(u.x)} 0 V ${J(s)}`;if(u.y===p.y)return`M 0 ${J(u.y)} H ${J(i)}`;const f=u.x<p.x?u:p,g=u.x<p.x?p:u,v=(g.y-f.y)/(g.x-f.x),y=(g.x-f.x)/(g.y-f.y),m=[[{x:0,y:f.y-f.x*v},{x:f.x-f.y*y,y:0},{x:f.x+(s-f.y)*y,y:s}].find((t=>t.x>=0&&t.x<=i&&t.y>=0&&t.y<=s)),[{x:i,y:g.y+(i-g.x)*v},{x:g.x+(s-g.y)*y,y:s},{x:g.x-g.y*y,y:0}].find((t=>t.x>=0&&t.x<=i&&t.y>=0&&t.y<=s))].map((t=>{let{x:e,y:i}=t;return{x:J(e),y:J(i)}}));return e?m:`M ${m[0].x} ${m[0].y} L ${m[1].x} ${m[1].y}`}_setupInterpolation(t){var e;let i;return this._isFunc(this.interpolation)?i=this.interpolation:t.curve(Xt[null!==(e=this.interpolation)&&void 0!==e?e:"straight"]),i}_xAdjustedFn(t,e){const{xAdjust:i}=this;return(s,n,r)=>{const o=t(s.x);return!i||0!==n&&n!==r.length-1?o:i({v:o,bandwidth:null!==e&&void 0!==e?e:0,index:n})[0]}}_yAdjustedFn(t,e){const{yAdjust:i}=this;return(s,n,r)=>{const o=t(s.y);return!i||0!==n&&n!==r.length-1?o:i({v:o,bandwidth:null!==e&&void 0!==e?e:0,index:n})[0]}}_setupLinegen(t,e){const i=Rt();return i.defined((t=>null!=t.x&&null!=t.y)),i.x(t),i.y(e),i}_genMissingValuePath(t,e){if(this.missingColor){const i=t=>null!=t.x&&null!=t.y,s=t.reduce(((t,e,s)=>(i(e)||t.push(s),t)),[]);if(s.length>0){const n=s.map((e=>{const s=t.slice(0,e).reverse().find((t=>i(t))),n=t.slice(e).find((t=>i(t)));return s&&n?[s,n]:null})).filter((t=>null!==t));return e.curve(Xt.straight),[...new Set(n)].map((t=>e(t)))}}return null}_handleSvgLineMouseOver(t,e){this._dispatchHover(t,e)}_handleSvgLineMouseLeave(t,e){this._dispatchHoverEnd(t,e)}_handleSvgLineDown(t,e){this.draggable&&(this._drag={prevX:t.clientX,prevY:t.clientY,drag:!1},window.addEventListener("mousemove",(t=>this._handleMouseMove(t,e)),{once:!0}),window.addEventListener("mouseup",(t=>this._handleMouseUp(t)),{once:!0}))}_handleMouseMove(t,e){if(this._drag){t.target.style.cursor="grab";const{clientX:i,clientY:s}=t;t.preventDefault();const n=i-this._drag.prevX,r=s-this._drag.prevY;this._drag={prevX:i,prevY:s,drag:!0},this.dispatchEvent(new CustomEvent("line-move",{bubbles:!0,detail:{e:t,metadata:this.metadata,target:this,deltaX:n,deltaY:r}})),window.addEventListener("mousemove",(t=>this._handleMouseMove(t,e)),{once:!0})}}_handleMouseUp(t){t.target.style.cursor="",this._drag=void 0}_dispatchClick(t,e){(0,Zt.hh)(this,this.getScalesWithMeta(),t,this,e)}_dispatchHover(t,e){(0,Zt.jd)(this,this.getScalesWithMeta(),t,this,e)}_dispatchHoverEnd(t,e){(0,Zt.o6)(this,t,e)}};ce([(0,s.MZ)(),de("design:type",Object)],pe.prototype,"lineWidth",void 0),ce([(0,s.MZ)({type:String,reflect:!1,attribute:"line-style"}),de("design:type",String)],pe.prototype,"lineStyle",void 0),ce([(0,s.MZ)({type:String,reflect:!1}),de("design:type",Object)],pe.prototype,"interpolation",void 0),ce([(0,s.MZ)({type:Boolean,reflect:!1,converter:s.Bs}),de("design:type",Object)],pe.prototype,"draggable",void 0),ce([(0,s.MZ)({type:Number,reflect:!1,attribute:"hover-radius"}),de("design:type",Object)],pe.prototype,"targetRadius",void 0),ce([(0,s.MZ)({type:String,reflect:!1,attribute:"hover-color"}),de("design:type",Object)],pe.prototype,"targetColor",void 0),ce([(0,s.MZ)({type:Number,reflect:!1,attribute:"hover-opacity"}),de("design:type",Object)],pe.prototype,"targetOpacity",void 0),ce([(0,s.MZ)({type:String,reflect:!1,attribute:"missing-color"}),de("design:type",Object)],pe.prototype,"missingColor",void 0),ce([(0,s.MZ)({type:Boolean,reflect:!1,attribute:"draw-as-trend"}),de("design:type",Object)],pe.prototype,"drawAsTrend",void 0),pe=ce([(0,s.eV)({tagName:(0,g.o)("svg-line"),styles:t=>{const{child:e,is:i}=(0,s.zz)(t);return[Q(t),s.AH`
            ${e("target")} {
                pointer-events: none;
            }

            ${e("hover-container")}:not(:has(> .highlight)) {
                opacity: 0;
            }

            ${e("hover-container")}:has(> ${e("hover-target")}:hover) {
                opacity: initial;
            }

            ${e("hover-target")} {
                opacity: inherit;
                pointer-events: painted;
                cursor: var(--plot-cursor, pointer);
            }

            ${i("interactable")} ${e("p")}:not(.hidden) {
                pointer-events: painted;
            }

            ${e("target")}:has(+ ${e("hover-target")}:hover) {
                fill: var(--plot-hover-fill);
                fill-opacity: var(--plot-hover-opacity);

                stroke-width: var(--plot-hover-stroke-width);
                stroke: var(--plot-hover-stroke);
                stroke-opacity: var(--plot-hover-stroke-opacity);
                stroke-dasharray: var(--plot-hover-stroke-dasharray);
            }
        `]},version:n.r})],pe);const fe='<path d="M -5 -5 L 5 -5 L 5 5 L -5 5 Z" />',ge='<path d="M 0 -6 L 4.5 0 L 0 6 L -4.5 0 Z" />',ve='<path d="M -5 3.75 L 0 -6.25 L 5 3.75 Z" />',ye='<circle cx="0" cy="0" r="5" />',me='<path d="M -5 -1 L 0 -5 L 5 -1 L 3 4 L -3 4 Z" />',xe='<path d="M 0 -5.8322 L 1.7303 -2.3232 L 5.6023 -1.7545 L 2.8072 0.9801 L 3.4727 4.84 L 0.0121 3.025 L -3.4485 4.84 L -2.783 0.9801 L -5.5781 -1.7545 L -1.7061 -2.3232 Z" />',_e='<path d="M -4.466 2.706 L -1.826 0 L -4.51 -2.64 L -2.607 -4.543 L 0 -1.859 L 2.728 -4.499 L 4.554 -2.673 L 1.914 0 L 4.598 2.662 L 2.695 4.565 L 0.011 1.881 L -2.64 4.521 Z" />',be='<path d="M -5 -3.75 L 0 6.25 L 5 -3.75 Z" />';var we;!function(t){t.rectangle="rectangle",t.diamond="diamond",t.triangle="triangle",t.circle="circle",t.pentagon="pentagon",t.star="star",t.cross="cross",t.reversedTriangle="reversedTriangle",t.custom="custom"}(we||(we={}));const Me={[we.rectangle]:fe,[we.diamond]:ge,[we.triangle]:ve,[we.circle]:ye,[we.pentagon]:me,[we.star]:xe,[we.cross]:_e,[we.reversedTriangle]:be},Se={[we.rectangle]:s.JW`${(0,s.TE)(fe)}`,[we.diamond]:s.JW`${(0,s.TE)(ge)}`,[we.triangle]:s.JW`${(0,s.TE)(ve)}`,[we.circle]:s.JW`${(0,s.TE)(ye)}`,[we.pentagon]:s.JW`${(0,s.TE)(me)}`,[we.star]:s.JW`${(0,s.TE)(xe)}`,[we.cross]:s.JW`${(0,s.TE)(_e)}`,[we.reversedTriangle]:s.JW`${(0,s.TE)(be)}`},Ce=5;function ke(t,e){const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ce)/Ce,n=t===we.custom?s.JW`<path d="${null===e||void 0===e?void 0:e.d}" transform=${(null===e||void 0===e?void 0:e.transform)||s.s6}>`:Se[t];return s.JW`
        <g stroke-width=${1/i} transform="scale(${i} ${i})">
            ${n}
        </g>
    `}const Te=t=>Me[t];var $e=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ae=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Pe=class extends(he(It(ft))){constructor(){super(...arguments),this.shape=we.circle,this.targetRadius=9,this.targetColor="black",this.targetOpacity=.2,this.overflow=!1,this.outline=!1,this._elementFill=[],this._hoverIndex=-1,this.pointSize=function(t,e){return 5},this.pointStyle=function(t,e){return""},this._dataTestId=t=>{if(!t)return;const e=[{lab:"x",val:t.x},{lab:"y",val:t.y}].filter((t=>void 0!==t.val&&null!==t.val)).map((t=>{let{lab:e,val:i}=t;return{lab:e,val:i}})).map((t=>{let{lab:e,val:i}=t;return{lab:e,val:"number"===typeof i?Z(i,5):i}})).map((t=>`${t.lab}: ${t.val}`)).join(",");return e?`(${e})`:void 0},this._targetRadius=t=>"function"===typeof this.targetRadius?this.targetRadius(t):this.targetRadius,this._targetColor=t=>"function"===typeof this.targetColor?this.targetColor(t):this.targetColor,this._targetOpacity=t=>"function"===typeof this.targetOpacity?this.targetOpacity(t):this.targetOpacity,this._dispatchClick=(t,e)=>this.dispatchEvent(new CustomEvent("scatter-click",{bubbles:!0,detail:{evt:t,metadata:this.metadata,point:this.data[e],index:e}})),this._dispatchHover=(t,e)=>this.dispatchEvent(new CustomEvent("scatter-hover",{bubbles:!0,detail:{evt:t,metadata:this.metadata,point:this.data[e],index:e}})),this._dispatchHoverEnd=(t,e)=>this.dispatchEvent(new CustomEvent("scatter-hover-end",{bubbles:!0,detail:{evt:t,metadata:this.metadata,point:this.data[e],index:e}})),this._mergedStyle=(t,e)=>{let i=this._getDefaultStyle({index:t},e);return this._hoverIndex===t&&(i=Object.assign(Object.assign({},i),this._getHoverStyle({index:t}))),i}}sceneGroup(){var t;const e=this.getScales();if(!e)return;const[i,s]=e,n=(null===(t=this.data)||void 0===t?void 0:t.length)&&(Array.isArray(this.data[0])?this.data:[this.data])||[],r=Te(this.shape),o=this.outline?"transparent":this.color,a=this.outline?this.color:"transparent",l=n.map(((t,e)=>{const n=this._getDefaultStyle({index:e},{fillColor:o,fillOpacity:this.opacity,strokeColor:a,strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"}),l=`scatter-${this.plotUniqueId}-texture-${e}`,h=this.pointSize({x:0,y:0},0,e)/Ce,c={id:l,options:{svg:`<svg \n                        xmlns="http://www.w3.org/2000/svg"\n                        stroke="${n.strokeColor}" \n                        stroke-width="${n.strokeWidth}" \n                        stroke-opacity="${n.strokeOpacity}" \n                        fill="${n.fillColor}"\n                        fill-opacity="${n.fillOpacity}"\n                        viewBox="${-6*h} ${-6*h} ${12*h} ${12*h}"\n                        width="${12*h}"\n                        height="${12*h}">${r}</svg>`}};return{series:t.filter((t=>u(t))).map(((t,n)=>({id:`scatter-${this.plotUniqueId}-point-${e}-${n}`,kind:ct.SPRITE,ref:{sharedId:l},transform:[{type:"translate",x:i(t.x),y:s(t.y)}]}))),texture:c}})),h=n.flatMap(((t,e)=>{if(!this._isInteractable(e))return[];const n=t=>{let{event:i,updateShapes:s,target:n}=t;s(Object.assign(Object.assign({},n),{fill:Object.assign(Object.assign({},n.fill),{opacity:this._targetOpacity(e)})}));const r=n;this._handleSvgCircleMouseOver(i,r.point,e)},r=t=>{let{event:i,updateShapes:s,target:n}=t;s(Object.assign(Object.assign({},n),{fill:Object.assign(Object.assign({},n.fill),{opacity:0})}));const r=n;this._handleSvgCircleMouseLeave(i,r.point,e)},o=t=>{let{event:i,target:s}=t;const n=s;this._handleSvgCircleClick(i,n.point,e)};return t.filter((t=>u(t))).map(((t,a)=>({id:`scatter-${this.plotUniqueId}-point-target-${e}-${a}`,on:{[ht.POINTER_OVER]:n,[ht.POINTER_LEAVE]:r,[ht.POINTER_DOWN]:o},point:t,kind:ct.CIRCLE,circle:{x:i(t.x),y:s(t.y),radius:this._targetRadius(e)},fill:{color:this._targetColor(e),opacity:0},stroke:{opacity:0}})))}));return{id:`scatter-${this.plotUniqueId}`,shared:[],textures:l.map((t=>t.texture)),children:[...l.flatMap((t=>t.series)),...h]}}exportSVG(){if(!this.size||!this.getScales())return"";const[t,e]=this.getScales();return this.renderPoints("scatter",t,e,!1)}render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{overflow:this.overflow,canvas:"svg"!==this.mode,hover:this._hoverIndex>-1});if(!this.size||!this.getScales())return;const[i,n]=this.size,[r,o]=this.getScales();return"svg"!==this.mode?s.qy``:s.qy`
            <svg width=${i} height=${n} class="${e}">
                ${this.renderPoints(t,r,o,!0)}
            </svg>
        `}_invalidateCanvas(t){const[e,i]=this.getScales();this._elementFill.splice(0,this._elementFill.length),t.reset(),t.scale(this._dpi,this._dpi),this.plotData.forEach(((s,n)=>{this.interactable&&this._renderCanvasHoverTarget(n,t,e,s,i),this._renderCanvasTarget(s,n,t,e,i)}))}_invalidateGl(t){throw new Error("not implemented"+t)}renderPoints(t,e,i,s){const n=this.outline?"none":this.color,r=this.outline?this.color:"none";return this.data.filter((t=>u(t)||t.length>0)).map(((o,a)=>{var l;const h=this._getDefaultStyle({index:a},{fillColor:n,fillOpacity:this.opacity,strokeColor:r,strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"}),c=this.pointStyle&&null!==(l=this.pointStyle(o,a))&&void 0!==l?l:"",d=this._isVisibilityHidden(a),p=this._isInteractable(a),f=this._generateStyle({index:a},h,c),g=ke(this.shape,this.customShape,this.pointSize(o,a));return Array.isArray(o)?o.filter((t=>u(t))).map((n=>this._renderPoint(t,e,i,n,a,{style:h,generatedStyle:f,shape:g,hidden:d,includeHoverTarget:s,interactable:p}))):this._renderPoint(t,e,i,o,a,{style:h,generatedStyle:f,shape:g,hidden:d,includeHoverTarget:s,interactable:p})}))}_renderPoint(t,e,i,n,r,o){let{style:a,generatedStyle:l,shape:h,hidden:c,includeHoverTarget:d,interactable:u}=o;const p=J(e(n.x)),f=J(i(n.y)),g=`translate(${p} ${f})`;return isNaN(p)||isNaN(f)?s.s6:s.JW`

                <g 
                class='${t}-target'
                data-testid=${this._dataTestId(n)}
                    fill="${a.fillColor}" 
                    fill-opacity="${a.fillOpacity}"  
                    stroke="${a.strokeColor}"
                    stroke-width="${a.strokeWidth}"
                    stroke-opacity="${a.strokeOpacity}"
                    stroke-dashArray=${a.strokeDashArray}
                    visibility=${(0,s.JR)(c?"hidden":void 0)}
                    transform=${g}
                    style=${l}
                >
                     ${h}
                </g>
                ${d&&u?this._renderHoverTarget(t,p,f,n,r,c):null}
            `}_renderHoverTarget(t,e,i,n,r,o){var a,l,h;const c=this._isHighlight(r);return s.JW`
            <circle class='${t}-hover-target${c?" highlight":""}${o?" hidden":""}' 
                @click=${t=>this._handleSvgCircleClick(t,n,r)} 
                @mouseenter=${t=>this._handleSvgCircleMouseOver(t,n,r)}
                @mouseleave=${t=>this._handleSvgCircleMouseLeave(t,n,r)}
                cx=${e} 
                cy=${i} 
                
                r=${null!==(a=this._targetRadius(r))&&void 0!==a?a:9} 
                fill="${null!==(l=this._targetColor(r))&&void 0!==l?l:"black"}" 
                fill-opacity="${null!==(h=this._targetOpacity(r))&&void 0!==h?h:.2}"
            />
        `}_handleSvgCircleClick(t,e,i){this.handleScatterClick?this.handleScatterClick(t,e,i,this.metadata):this._dispatchClick(t,i)}_handleSvgCircleMouseOver(t,e,i){this.handleScatterHover?this.handleScatterHover(t,e,i,this.metadata):this._dispatchHover(t,i)}_handleSvgCircleMouseLeave(t,e,i){this.handleScatterHoverEnd?this.handleScatterHoverEnd(t,e,i,this.metadata):this._dispatchHoverEnd(t,i)}_renderCanvasTarget(t,e,i,s,n){var r,o;const a=this._mergedStyle(e,{fillColor:null!==(r=this.color)&&void 0!==r?r:"black",fillOpacity:null!==(o=this.opacity)&&void 0!==o?o:1});i.beginPath(),i.fillStyle=a.fillColor,i.globalAlpha=a.fillOpacity,i.arc(s(t.x),n(t.y),this.pointSize?this.pointSize(t,e):5,0,2*Math.PI),i.fill()}_renderCanvasHoverTarget(t,e,i,s,n){var r,o,a;const l=new Path2D;this._hoverIndex===t?(e.fillStyle=null!==(r=this._targetColor(t))&&void 0!==r?r:"black",e.globalAlpha=null!==(o=this._targetOpacity(t))&&void 0!==o?o:"0.2"):(e.fillStyle="transparent",e.globalAlpha=1),l.arc(i(s.x),n(s.y),null!==(a=this._targetRadius(t))&&void 0!==a?a:9,0,2*Math.PI),e.fill(l),this._elementFill.push(l)}};$e([(0,s.MZ)({type:String,reflect:!1}),Ae("design:type",Object)],Pe.prototype,"shape",void 0),$e([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),Ae("design:type",Object)],Pe.prototype,"customShape",void 0),$e([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),Ae("design:type",Object)],Pe.prototype,"targetRadius",void 0),$e([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),Ae("design:type",Object)],Pe.prototype,"targetColor",void 0),$e([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),Ae("design:type",Object)],Pe.prototype,"targetOpacity",void 0),$e([(0,s.MZ)({type:Boolean,reflect:!1,converter:s.Bs}),Ae("design:type",Object)],Pe.prototype,"overflow",void 0),$e([(0,s.MZ)({type:Boolean,reflect:!1,converter:s.Bs}),Ae("design:type",Object)],Pe.prototype,"outline",void 0),$e([(0,s.MZ)({type:Function,reflect:!1,attribute:!1}),Ae("design:type",Function)],Pe.prototype,"handleScatterClick",void 0),$e([(0,s.MZ)({type:Function,reflect:!1,attribute:!1}),Ae("design:type",Function)],Pe.prototype,"handleScatterHover",void 0),$e([(0,s.MZ)({type:Function,reflect:!1,attribute:!1}),Ae("design:type",Function)],Pe.prototype,"handleScatterHoverEnd",void 0),$e([(0,s.wk)(),Ae("design:type",Object)],Pe.prototype,"_hoverIndex",void 0),$e([(0,s.MZ)({type:Function,reflect:!1,attribute:!1}),Ae("design:type",Object)],Pe.prototype,"pointSize",void 0),$e([(0,s.MZ)({type:Function,reflect:!1,attribute:!1}),Ae("design:type",Object)],Pe.prototype,"pointStyle",void 0),Pe=$e([(0,s.eV)({tagName:(0,g.o)("svg-scatter"),styles:t=>{const{child:e,is:i}=(0,s.zz)(t);return[Q(t),s.AH`
            ${e("hover-target")} {
                opacity: 0;
                pointer-events: initial;
                cursor: var(--plot-cursor, pointer);
            }

            ${e("hover-target")}:hover {
                opacity: initial;
            }
            .highlight {
                opacity: initial;
            }
            .hidden {
                pointer-events: none;
            }
            ${i("canvas")} ${e("target")} {
                pointer-events: painted;
            }

            ${e("target")}:has(+ ${e("hover-target")}:hover) {
                fill: var(--plot-hover-fill);
                fill-opacity: var(--plot-hover-opacity);

                stroke-width: var(--plot-hover-stroke-width);
                stroke: var(--plot-hover-stroke);
                stroke-opacity: var(--plot-hover-stroke-opacity);
                stroke-dasharray: var(--plot-hover-stroke-dasharray);
            }
        `]},version:n.r})],Pe);var Oe=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Re=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Ee=class extends ft{constructor(){super(...arguments),this.useRawScales=!1,this.yVals=()=>{var t;return(null!==(t=this.data)&&void 0!==t?t:[]).flatMap((t=>t.coordinates.flatMap((t=>t.flatMap((t=>t.flatMap((t=>t[1]))))))))},this.xVals=()=>{var t;return(null!==(t=this.data)&&void 0!==t?t:[]).flatMap((t=>t.coordinates.flatMap((t=>t.flatMap((t=>t.flatMap((t=>t[0]))))))))},this._renderContour=(t,e,i,n,r)=>{const o=this._getDefaultStyle({index:i},{fillColor:"black",fillOpacity:1,filter:"",strokeOpacity:1,strokeColor:"",strokeWidth:1,strokeDashArray:""}),a=this._isHighlight(i),l=this._isVisibilityHidden(i),h=this._isInteractable(i);return s.JW`<g 
                    class='${t}-target${a?" highlight":""}${h?" interactable":""}'
                    fill=${o.fillColor}
                    fill-opacity=${o.fillOpacity}
                    filter=${o.filter}                    
                    stroke=${o.strokeColor}
                    stroke-width=${o.strokeWidth}
                    stroke-opacity=${o.strokeOpacity}
                    stroke-dasharray=${o.strokeDashArray}
                    visibility=${(0,s.JR)(l?"hidden":void 0)}
                    style=${this._generateStyle({index:i},o)} data-dbg-index='${i}' data-dbg-length='${e.coordinates.length}' data-dbg-value='${e.value}'>${e.coordinates.map((s=>this._renderCoordinate(t,s,n,r,i,e.value)))}</g>`},this._renderCoordinate=(t,e,i,n,r,o)=>s.JW`
            <path class='${t}-path' 
                d='M${e.map((t=>this._renderPolygon(t,i,n))).join("M")}'
                                    
                @click=${t=>this._handleSVGPolygonClick(t,r,0)} 
                @mouseenter=${t=>this._handleSVGPolygonMouseEnter(t,r,0)} 
                @mouseleave=${t=>this._handleSVGPolygonMouseLeave(t,r,0)}
                @mousemove=${t=>this._handleSVGPolygonMouseMove(t,r,0,o)}
                />`,this._renderPolygon=(t,e,i)=>t.map((t=>this._renderPoint(t,e,i))).join("L"),this._renderPoint=(t,e,i)=>`${J(e(t[0]))},\n        ${J(i(t[1]))}`,this._calcScaleFactor=(t,e)=>this._domainLen(t)/e,this._domainLen=t=>Math.abs(t[1]-t[0])}exportSVG(){const[t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return this._renderSVG(t)}render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{canvas:"svg"!==this.mode});if(!this.size||!this.getScales())return;const[i,n]=this.size;return"svg"!==this.mode?s.qy`
                <div class="${e}">
                    <canvas class="${t}-target"></canvas>
                </div>
            `:s.qy`
            <svg width=${i} height=${n} class="${e}">
                <defs id="custom-defs"></defs>
                ${this._renderSVG(t)}
            </svg>
            <slot name="defs" @slotchange=${this._defsSlotchange}></slot>
        `}_invalidateCanvas(t){throw new Error("Arc 2d canvas not implemented"+t)}_invalidateGl(t){throw new Error("Arc gl canvas not implemented"+t)}_renderSVG(t){var e;const[i,n]=this.getScales(),r=i.domain(),o=n.domain(),a=o[0]>o[1],l=this._calcScaleFactor(r,this.width),h=this._calcScaleFactor(o,this.height),c=r[0],d=a?o[1]:o[0],u=null!==(e=this.inset)&&void 0!==e?e:`${50/this.width}% ${50/this.height}%`;return s.JW`
                <g clip-path='inset(${u})'>
                    ${this.data?this.data.map(((e,s)=>this._renderContour(t,e,s,(t=>this.useRawScales?i(t):i(t*l+c)),(t=>this.useRawScales?n(t):n(t*h+d))))):null}
                </g>`}_handleSVGPolygonClick(t,e,i){this._dispatchClick(t,e,i)}_handleSVGPolygonMouseEnter(t,e,i){this._dispatchHover(t,e,i)}_handleSVGPolygonMouseLeave(t,e,i){this._dispatchHoverEnd(t,e,i)}_handleSVGPolygonMouseMove(t,e,i,s){this._dispatchMouseMove(t,e,i,s)}_dispatchClick(t,e,i){this.dispatchEvent(new CustomEvent("polygon-click",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchHover(t,e,i){this.dispatchEvent(new CustomEvent("polygon-hover",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchHoverEnd(t,e,i){this.dispatchEvent(new CustomEvent("polygon-hover-end",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchMouseMove(t,e,i,s){this.dispatchEvent(new CustomEvent("polygon-move",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i,point:Object.assign(Object.assign({},(0,Zt.BM)(this,this.getScalesWithMeta(),t)),{z:s})}}))}};Oe([(0,s.MZ)({type:Number,reflect:!0,attribute:"width"}),Re("design:type",Object)],Ee.prototype,"width",void 0),Oe([(0,s.MZ)({type:Number,reflect:!0,attribute:"height"}),Re("design:type",Object)],Ee.prototype,"height",void 0),Oe([(0,s.MZ)({type:String,reflect:!0,attribute:"inset"}),Re("design:type",Object)],Ee.prototype,"inset",void 0),Oe([(0,s.MZ)({type:Boolean,reflect:!0,converter:s.Bs}),Re("design:type",Object)],Ee.prototype,"ring",void 0),Oe([(0,s.MZ)({type:Boolean,reflect:!0,attribute:"use-raw-scales"}),Re("design:type",Object)],Ee.prototype,"useRawScales",void 0),Ee=Oe([(0,s.eV)({tagName:(0,g.o)("svg-multi-polygon"),styles:t=>{const{root:e,child:i,is:n}=(0,s.zz)(t);return[Q(t),s.AH`
            ${e} {
                shape-rendering: crispEdges;
            }

            .interactable:not([visibility='hidden']) > path {
                pointer-events: all;
            }

            ${n("!canvas")} ${i("target")}:hover,
          .highlight {
                fill: var(--plot-hover-fill);
                fill-opacity: var(--plot-hover-opacity);

                stroke-width: var(--plot-hover-stroke-width);
                stroke: var(--plot-hover-stroke);
                stroke-opacity: var(--plot-hover-stroke-opacity);
                stroke-dasharray: var(--plot-hover-stroke-dasharray);

                cursor: var(--plot-cursor, pointer);
            }
        `]},version:n.r})],Ee);const De=["top","left","bottom","right","center"];class Ie{constructor(){this.generatorType=Je.BAR}calculateLabels(t,e,i,s){const n=s&&s({points:t.data,vertical:t.vertical}),r=(null===n||void 0===n?void 0:n.points)||t.data,o=t.getScales();if(!o)return{items:[],plotSurface:[]};const[a,l]=o,h=a.domain(),c=l.domain(),d="number"===typeof h[0],u="number"===typeof c[0],p=u&&c[0]>c[1],f=(null===r||void 0===r?void 0:r.flatMap(((e,i)=>{const s=`bar-plot-label-${t.id}-${i}`,n=e.x,r=e.userData;if(e.x1||e.y1){const o=e.x1||(d&&t.vertical?0:n),a=Math.min(n,o),l=Math.max(n,o),h=(n+o)/2,c=e.y,f=e.y1||(u&&!t.vertical?0:c),g=Math.min(c,f),v=Math.max(c,f),y=(c+f)/2;return[t.vertical?{point:{x:a,y:y},originalPoint:e,id:s,userData:r,pointIdx:i,seriesIdx:0,forceAlignment:"left",angle:Math.PI/2}:{point:{x:h,y:p?v:g},originalPoint:e,id:s,userData:r,pointIdx:i,seriesIdx:0,forceAlignment:"bottom",angle:0},t.vertical?{point:{x:l,y:y},originalPoint:e,id:s,userData:r,pointIdx:i,seriesIdx:0,forceAlignment:"right",angle:Math.PI/2}:{point:{x:h,y:p?g:v},originalPoint:e,id:s,userData:r,pointIdx:i,seriesIdx:0,forceAlignment:"top",angle:0}]}return t.vertical?{point:e,originalPoint:e,userData:r,id:s,pointIdx:i,seriesIdx:0,forceAlignment:e.x>0?"right":"left",angle:Math.PI/2}:p?{point:e,originalPoint:e,userData:r,id:s,pointIdx:i,seriesIdx:0,forceAlignment:e.y>0?"bottom":"top",angle:0}:{point:e,originalPoint:e,userData:r,id:s,pointIdx:i,seriesIdx:0,forceAlignment:e.y>0?"top":"bottom",angle:0}})).map((e=>Object.assign(Object.assign({},e),{value:t.vertical?e.point.x:e.point.y}))))||[];return{items:f,plotSurface:[]}}extremes(t){var e;if(((null===(e=null===t||void 0===t?void 0:t.points)||void 0===e?void 0:e.length)||0)<2)return t;return{points:t.points.reduce(((t,e)=>t.length?t[0].y>e.y?[e,t[1]]:t[1].y<e.y?[t[0],e]:t:[e,e]),[]),vertical:t.vertical}}}const Le=1e-9,ze=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le;return Math.abs(t-e)<i},je=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Le;return function(t,e){return t>e||ze(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le)}(t,e,s)&&function(t,e){return t<e||ze(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le)}(t,i,s)},Ue=function(t,e){return t<=e-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le)},Be=function(t,e){return t>=e+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le)},Ne=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le;return(je(e.minX,t.minX,t.maxX,i)||je(t.minX,e.minX,e.maxX,i))&&(je(e.minY,t.minY,t.maxY,i)||je(t.minY,e.minY,e.maxY,i))},Fe=(t,e)=>e.topLeft.x<=t.x&&e.topLeft.y<=t.y&&e.bottomRight.x>=t.x&&e.bottomRight.y>=t.y,Ve=(t,e)=>Fe(t.topLeft,e)&&Fe(t.topRight,e)&&Fe(t.bottomRight,e)&&Fe(t.bottomLeft,e);class He{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this._boundary=t,this._capacity=e,this._boxes=[],this._divided=!1}size(){return this._boxes.length+(this._divided?this._northeast.size()+this._northwest.size()+this._southeast.size()+this._southwest.size():0)}insert(t){if(!Ne(t,this._boundary))return!1;if(!this._divided&&this._boxes.length<this._capacity)return this._boxes.push(Object.assign({},t)),!0;this._divided||this._subdivide();return[this._northwest,this._northeast,this._southeast,this._southwest].filter((e=>null===e||void 0===e?void 0:e._surrounds(t))).some((e=>null===e||void 0===e?void 0:e.insert(t)))||this._boxes.push(Object.assign({},t)),!0}hasIntersectingBoxesWith(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return!!Ne(this._boundary,t)&&(this._boxes.some((i=>Ne(i,t)&&e(i)))||this._divided&&(this._northeast.hasIntersectingBoxesWith(t,e)||this._northwest.hasIntersectingBoxesWith(t,e)||this._southeast.hasIntersectingBoxesWith(t,e)||this._southwest.hasIntersectingBoxesWith(t,e)))}query(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;if(!Ne(this._boundary,t))return[];const i=this._boxes.filter((e=>Ne(e,t))).filter(e);return this._divided?[...i,...this._northwest.query(t,e),...this._northeast.query(t,e),...this._southeast.query(t,e),...this._southwest.query(t,e)]:i}_subdivide(){const{minX:t,maxX:e,minY:i,maxY:s}=this._boundary,n=(e+t)/2+1e-9,r=(s+i)/2+1e-9,o={minX:n,maxX:e,minY:i,maxY:r},a={minX:t,maxX:n,minY:i,maxY:r},l={minX:n,maxX:e,minY:r,maxY:s},h={minX:t,maxX:n,minY:r,maxY:s};this._northeast=new He(o,this._capacity),this._northwest=new He(a,this._capacity),this._southeast=new He(l,this._capacity),this._southwest=new He(h,this._capacity);const c=[this._northeast,this._northwest,this._southeast,this._southwest];this._boxes=this._boxes.reduce(((t,e)=>{const i=c.find((t=>t._surrounds(e)));return i&&i.insert(e)||t.push(e),t}),[]),this._divided=!0}_surrounds(t){const{minX:e,maxX:i,minY:s,maxY:n}=this._boundary;return Be(t.minX,e)&&Ue(t.maxX,i)&&Be(t.minY,s)&&Ue(t.maxY,n)}}function Ge(t){return`${t}px Roboto, Arial`}class Ye{constructor(){this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d")}measureTextLength(t,e){return this._context?(this._context.font=e,this._context.measureText(t).width):0}}class Xe{constructor(){this.generatorType=Je.MULTI_POLY,this.calculateLabels=(t,e,i,s)=>{t.id||console.warn("Please provide the multi polygon with a unique ID in order to properly track generated labels");const n=t.getScales();if(!n)return{items:[],plotSurface:[]};const[r,o]=n,a=t.fittedDomain||t.getDomain2D();if(!a)return{items:[],plotSurface:[]};const l={topLeft:{x:Math.min(r(a.x[0]),r(a.x[1])),y:Math.min(o(a.y[0]),o(a.y[1]))},bottomRight:{x:Math.max(r(a.x[0]),r(a.x[1])),y:Math.max(o(a.y[0]),o(a.y[1]))}},{width:h,height:c}=t.getBoundingClientRect(),d={topLeft:{x:0,y:0},bottomRight:{x:h,y:c}},u=r.domain(),p=o.domain(),f=p[0]>p[1],g=t.width&&Math.abs(u[1]-u[0])/t.width||1,v=t.height&&Math.abs(p[1]-p[0])/t.height||1,y=u[0],m=f?p[1]:p[0],x=t.data,_=(s&&s(x)||x).flatMap(((i,s)=>{const n=i.value,a=i.userData,l=t.getLabelSettings({index:s,metadata:t.metadata,plotId:t.id},e),h=l.labelFormatter(n,a),c=Xe._textMeasurer.measureTextLength(h,Ge(12))+4,d=c/2;return(i.lineCoordinates||i.coordinates).flatMap((e=>e.map((e=>e.map((e=>({x:t.useRawScales?e[0]:e[0]*g+y,y:t.useRawScales?e[1]:e[1]*v+m}))).map((t=>Object.assign(Object.assign({},t),{screen:{x:r(t.x)+l.offsetHorizontal,y:o(t.y)+l.offsetVertical,offset:{x:d,y:8},horizontalLabels:l.horizontalLabels},label:h,pointIdx:0,seriesIdx:s,value:n,userData:a,type:"multiPolyPoint"}))).map(Xe.calculateTangentAngle).map((t=>Object.assign(Object.assign(Object.assign({},t),ri(t.screen,l.noAngle?0:t.angleInRadians,t.screen.offset.x,t.screen.offset.y)),{noAngle:l.noAngle})))))))})),b=_.reduce(((t,e)=>{if(!e.length)return t;const s=this.choseFrom(e,t,l,d,i,r,o);if(!s)return t;const n={minX:Math.min(s.topLeft.x,s.topRight.x,s.bottomLeft.x,s.bottomRight.x),maxX:Math.max(s.topLeft.x,s.topRight.x,s.bottomLeft.x,s.bottomRight.x),minY:Math.min(s.topLeft.y,s.topRight.y,s.bottomLeft.y,s.bottomRight.y),maxY:Math.max(s.topLeft.y,s.topRight.y,s.bottomLeft.y,s.bottomRight.y)};return i.insert(n),[...t,s]}),[]).map(((e,i)=>({point:{x:e.x,y:e.y},originalPoint:{x:e.x,y:e.y},value:e.value,id:"contour-"+t.id+"-"+i,userData:e.userData,pointIdx:e.pointIdx,seriesIdx:e.seriesIdx,angle:e.angleInRadians,type:e.type})));return{items:b,plotSurface:[]}},this.extremes=t=>(null===t||void 0===t?void 0:t.length)?1===t.length?t:t.reduce(((t,e)=>t.length?e.value<t[0].value?[e,t[1]]:e.value>t[1].value?[t[0],e]:t:[e,e]),[]):[]}choseFrom(t,e,i,s,n,r,o){let a=t.filter((t=>Ve(t,i))).filter((t=>Ve(t,s)));if((null===a||void 0===a?void 0:a.length)||(a=this._findSegmentMidpoints(t,r,o,s)),null===a||void 0===a?void 0:a.length)return a.reduce(((t,i)=>{let s=(null===e||void 0===e?void 0:e.length)?((t,e)=>{let i=1/0;for(const r of e){const e=(s=t.screen,n=r.screen,Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2)));if(e<i&&(i=e,0===i))break}var s,n;return i})(i,e):500;const r={minX:Math.min(i.topLeft.x,i.topRight.x,i.bottomLeft.x,i.bottomRight.x),maxX:Math.max(i.topLeft.x,i.topRight.x,i.bottomLeft.x,i.bottomRight.x),minY:Math.min(i.topLeft.y,i.topRight.y,i.bottomLeft.y,i.bottomRight.y),maxY:Math.max(i.topLeft.y,i.topRight.y,i.bottomLeft.y,i.bottomRight.y)};return n.hasIntersectingBoxesWith(r)||(s+=1e5),i.screen.horizontalLabels&&(s+=Math.PI-1e4*Math.abs(i.angleInRadians)),!t||s>t.score?Object.assign(Object.assign({},i),{score:s}):t}),void 0)}_findSegmentMidpoints(t,e,i,s){return t.reduce(((n,r,o)=>{if(0===o)return n;const a=this._findLineMidpoint([t[o-1],r],e,i,s);return a&&n.push(a),n}),[])}_findLineMidpoint(t,e,i,s){let n;const r=t[0],o=t[1],a={x:(r.x+o.x)/2,y:(r.y+o.y)/2},l={x:e(a.x),y:i(a.y)},h=Object.assign(Object.assign(Object.assign(Object.assign({},r),a),{screen:Object.assign(Object.assign({},r.screen),l)}),ri(l,r.angleInRadians,r.screen.offset.x,r.screen.offset.y));return Ve(h,s)&&(n=h),n}}Xe._textMeasurer=new Ye,Xe.calculateTangentAngle=(t,e,i)=>{const s=i.length;let n;if(1===s)n=0;else if(0===e){const s=i[e+1];n=(s.screen.y-t.screen.y)/(s.screen.x-t.screen.x)}else if(e===s-1){const s=i[e-1];n=(t.screen.y-s.screen.y)/(t.screen.x-s.screen.x)}else{const s=i[e-1],r=i[e+1];n=((t.screen.y-s.screen.y)/(t.screen.x-s.screen.x)+(r.screen.y-t.screen.y)/(r.screen.x-t.screen.x))/2}return Object.assign(Object.assign({},t),{angleInRadians:Math.atan(n)})};class We{constructor(){this.generatorType=Je.SCATTER}calculateLabels(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t=>t,n=t.data;if(!(null===n||void 0===n?void 0:n.length))return{items:[],plotSurface:[]};n[0]instanceof Array||(n=[n]);const r=t.getScales();if(!r)return{items:[],plotSurface:[]};const[o,a]=r;if(!(t.fittedDomain||t.getDomain2D()))return{items:[],plotSurface:[]};const l=n.map((t=>t.filter((t=>u(t))))).map(s).flatMap(((e,i)=>e.map(((e,s)=>{const n=e.userData,r=t.pointSize(e,s,i);return{point:e,originalPoint:e,id:`scatter-plot-label-${t.id}-${s}`,pointIdx:s,seriesIdx:i,value:e,userData:n,type:"scatterPoint",pointSize:r}})).filter((t=>t.point)))),h=l.map((t=>{const e={x:o(t.point.x),y:a(t.point.y)};return ni({x:0,y:0},e,t.pointSize,t.pointSize)}));return{items:l.map((t=>{const e=Object.assign({},t);return delete e.pointSize,e})),plotSurface:h}}extremes(t){return t.reduce(((t,e)=>t.length?e.y<t[0].y?[e,t[1]]:e.y>t[1].y?[t[0],e]:t:[e,e]),[])}}const qe={items:[],plotSurface:[]};class Ze{constructor(){this.generatorType=Je.LINE}calculateLabels(t,e,i,s){var n,r,o;if(!(null===(n=t.data)||void 0===n?void 0:n.length))return qe;const{width:l,height:h}=t.getBoundingClientRect(),c=t.fittedDomain||t.getDomain2D();if(!c)return qe;if(!(null===(r=c.x)||void 0===r?void 0:r.length)||!(null===(o=c.y)||void 0===o?void 0:o.length))return qe;const d=[Math.min(c.x[0],c.x[1]),Math.max(c.x[0],c.x[1])],p=[Math.min(c.y[0],c.y[1]),Math.max(c.y[0],c.y[1])];let f=t.data;if(!(null===f||void 0===f?void 0:f.length))return qe;f[0]instanceof Array||(f=[f]);const g=t.getScalesWithMeta();if(!g)return qe;const[v,y]=g,m=f.map((t=>(1===t.length&&a(t[0].x)||a(t[0].y))&&t||t.filter((t=>u(t))))).map(s).flatMap(((i,s)=>{let n;if(qt(i)){const r=i[0].userData,o=i[0].x;n=t.getLabelSettings({index:s,pointIndex:0,point:i[0],metadata:t.metadata,plotId:t.id},e);const a=n.labelFormatter(o,r),l=Ze._textMeasurer.measureTextLength(a,Ge(12))+4,c=li(n.placement,h,l);let d=(p[1]-p[0])*(1-c)+p[0];return"band"!==y.scaleType&&(d=y.scale.invert((h-1)*(1-c)+1)),[{value:o,userData:r,id:`line-plot-label-${t.id}-${s}-0`,point:{x:o,y:d},originalPoint:i[0],pointIdx:0,seriesIdx:s,angle:Math.PI/2,type:"lineLimitX"}]}if(Wt(i)){const r=i[0].userData,o=i[0].y;n=t.getLabelSettings({index:s,pointIndex:0,point:i[0],metadata:t.metadata,plotId:t.id},e);const a=n.labelFormatter(o,r),h=Ze._textMeasurer.measureTextLength(a,Ge(12))+4,c=li(n.placement,l,h);let u=(d[1]-d[0])*c+d[0];return"band"!==v.scaleType&&(u=v.scale.invert((l-1)*c+1)),[{value:o,userData:r,id:`line-plot-label-${t.id}-${s}-0`,pointIdx:0,seriesIdx:s,point:{x:u,y:i[0].y},originalPoint:i[0],type:"lineLimitY"}]}return i.map(((e,i)=>({point:e,originalPoint:e,userData:e.userData,value:e,id:`line-plot-label-${t.id}-${s}-${i}`,pointIdx:i,seriesIdx:s,type:"linePoint"})))}));return{items:m,plotSurface:[]}}extremes(t){return(null===t||void 0===t?void 0:t.length)?t.length<=2?t:t.reduce(((t,e)=>t.length?e.y<t[0].y?[e,t[1]]:e.y>t[1].y?[t[0],e]:t:[e,e]),[]):[]}}var Je;Ze._textMeasurer=new Ye,function(t){t[t.BAR=0]="BAR",t[t.LINE=1]="LINE",t[t.MULTI_POLY=2]="MULTI_POLY",t[t.SCATTER=3]="SCATTER"}(Je||(Je={}));const Ke=t=>t instanceof mt?new Ie:t instanceof pe?new Ze:t instanceof Pe?new We:t instanceof Ee?new Xe:void 0,Qe=new Ye,ti=(t,e,i,s,n)=>(null===e||void 0===e?void 0:e.calculateLabels(t,s,n,i))||{items:[],plotSurface:[]},ei=t=>t,ii=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(t){case"top":return{x:0,y:-i/2-4-s/2};case"bottom":return{x:0,y:i/2+4+s/2};case"left":return{x:-e/2-4-s/2,y:0};case"right":return{x:e/2+4+s/2,y:0};default:return{x:0,y:0}}},si=(t,e,i)=>{const s=t.x-i.x,n=t.y-i.y;return{x:s*Math.cos(e)-n*Math.sin(e)+i.x,y:n*Math.cos(e)+s*Math.sin(e)+i.y}},ni=(t,e,i,s)=>({topLeft:{x:e.x+t.x-i/2,y:e.y+t.y-s/2},topRight:{x:e.x+t.x+i/2,y:e.y+t.y-s/2},bottomLeft:{x:e.x+t.x-i/2,y:e.y+t.y+s/2},bottomRight:{x:e.x+t.x+i/2,y:e.y+t.y+s/2}}),ri=(t,e,i,s)=>0===e?ni({x:0,y:0},t,2*i,2*s):{topLeft:si({x:t.x-i,y:t.y-s},e,t),topRight:si({x:t.x+i,y:t.y-s},e,t),bottomRight:si({x:t.x+i,y:t.y+s},e,t),bottomLeft:si({x:t.x-i,y:t.y+s},e,t)},oi=t=>{const{w:e,h:i}=t.reduce(((t,e)=>{const{width:i,height:s}=e.getBoundingClientRect();return t?{w:Math.max(i,t.w),h:Math.max(s,t.h)}:{w:i,h:s}}),void 0);return{minX:0,minY:0,maxX:e,maxY:i}},ai=(t,e,i)=>{const s=t.filter((t=>!!t.plotLabelData.items));if(!(null===s||void 0===s?void 0:s.length))return[];t.forEach((t=>{const e=t.plotLabelData.plotSurface;(null===e||void 0===e?void 0:e.length)&&e.forEach((t=>{i.insert({minX:Math.min(t.topLeft.x,t.topRight.x),maxX:Math.max(t.topLeft.x,t.topRight.x),minY:Math.min(t.topLeft.y,t.bottomLeft.y),maxY:Math.max(t.topLeft.y,t.bottomLeft.y)})}))}));return t.slice().reverse().map((t=>{const s=t.type;if(void 0===s||!t.plotLabelData.items.length)return{id:t.plot.id,labels:[]};const n=t.plot,r=n instanceof mt&&n.vertical,{width:o,height:a}=n.getBoundingClientRect(),l={topLeft:{x:0,y:0},bottomRight:{x:o,y:a}},{id:h,metadata:c}=n,[d,u]=n.getScales(),p=t.plotLabelData.items.reduce(((o,a)=>{const p=t.plot.getLabelSettings({index:a.seriesIdx,pointIndex:a.pointIdx,point:a.point,plotId:h,metadata:c},e),f=p.labelFormatter(a.value,a.userData),g={x:d(a.point.x),y:u(a.point.y)},v=!p.noAngle&&a.angle||0,y=p.offsetHorizontal,m=p.offsetVertical,x=Qe.measureTextLength(f,Ge(12))+4,_=16,b=x/2,w=((t,e,i)=>t===Je.SCATTER?e.pointSize(i.point,i.pointIdx,i.seriesIdx):0)(s,n,a);let M,S;if(n instanceof Ee)M={x:0,y:0},S=v?ri(g,v,x/2,8):ni({x:y,y:y},g,x,_);else if(p.collisionAvoidance||p.hideCollisions){const t=[a.forceAlignment||p.alignment,...!a.forceAlignment&&p.collisionAvoidance?De.filter((t=>t!==p.alignment)):[]].filter((t=>"lineLimitX"===a.type?["left","right","center"].includes(t):"lineLimitY"!==a.type||["top","bottom","center"].includes(t))),e="lineLimitX"===a.type||r?_:x,s="lineLimitX"===a.type||r?x:_,n=t.map((t=>({offset:ii(t,e,s,w)}))).map((t=>{let{offset:i}=t;return{offset:i,coordinates:ni({x:i.x+y,y:i.y+m},g,e,s)}})),o=n.filter((t=>{let{coordinates:e}=t;return Ve(e,l)})),h=o.filter((t=>{let{coordinates:e}=t;const s={minX:Math.min(e.topLeft.x,e.topRight.x),maxX:Math.max(e.topLeft.x,e.topRight.x),minY:Math.min(e.topLeft.y,e.bottomLeft.y),maxY:Math.max(e.topLeft.y,e.bottomLeft.y)};return!i.hasIntersectingBoxesWith(s)})).find(Boolean);M=(null===h||void 0===h?void 0:h.offset)||!p.hideCollisions&&(o.length&&o[0].offset||n[0].offset)||void 0,S=(null===h||void 0===h?void 0:h.coordinates)||!p.hideCollisions&&(o.length&&o[0].coordinates||n[0].coordinates)||void 0}else{const t=a.forceAlignment||p.alignment,e=a.angle&&0!==a.angle?_:x,i=a.angle&&0!==a.angle?x:_;M=ii(t,e,i,w),S=ni({x:M.x+y,y:M.y+m},g,e,i)}return M?(i.insert({minX:Math.min(S.topLeft.x,S.topRight.x),maxX:Math.max(S.topLeft.x,S.topRight.x),minY:Math.min(S.topLeft.y,S.bottomLeft.y),maxY:Math.max(S.topLeft.y,S.bottomLeft.y)}),o=[...o,Object.assign(Object.assign({},a),{label:f,textOpacity:p.textOpacity,textColor:p.textColor,backgroundColor:p.backgroundColor,hoverBackgroundColor:p.hoverBackgroundColor,angleInRadians:v,originOffsetX:b,originOffsetY:8,offsetHorizontal:y+M.x,offsetVertical:m+M.y,editable:!!p.editable})]):o}),[]).map((t=>{const e=Object.assign({},t);return delete e.value,delete e.userData,delete e.pointIdx,delete e.seriesIdx,delete e.forceAlignment,delete e.type,delete e.angle,e}));return{id:n.id,labels:p}}))},li=(t,e,i)=>{const s=e-i;let n;if("pixel"===t.type)n=t.amount>=0?Math.min(s,t.amount):Math.max(0,s+t.amount);else{n=s*Math.min(1,Math.max(0,t.amount/100))}return(n+i/2)/e};var hi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ci=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const di=(0,r.q6)("label-setting-change"),ui=t=>"number"===typeof t?((t,e)=>{const i=Number(t+"e"+e).valueOf();return Number(Math.round(i)+"e-"+e)})(t,2):t.toString(),pi={horizontalLabels:!0,noAngle:!1,labelFormatter:(t,e)=>{if(void 0!==(null===e||void 0===e?void 0:e.label)&&null!==e.label)return e.label;if(void 0===t||null===t)return"";if(u(t)){const e=t;return`(${ui(e.x)}, ${ui(e.y)})`}return b(t)?`${t.toFixed(2)}`:t.toString()},offsetVertical:0,offsetHorizontal:0,textColor:"var(--color-text-default)",textOpacity:1,backgroundColor:"transparent",hoverBackgroundColor:"var(--color-primary-2)",alignment:"center",placement:{type:"percent",amount:50},hideCollisions:!1,collisionAvoidance:!0,editable:!1};let fi=class extends(q((0,V.c)((0,o.ID)(s.OC)))){constructor(){super(...arguments),this.editable=!1,this.hide=!1,this.data=[],this.defaultLabelSettings={},this.offsetHorizontal=0,this.offsetVertical=0,this.changing="",this.plotLabelData={},this.includeInDomain=!1,this.labelData=[],this.inputRef=(0,s._3)(),this._dataTestId=t=>{if(!t)return;const e=[{lab:"x",val:t.x},{lab:"y",val:t.y},{lab:"x1",val:t.x1},{lab:"y1",val:t.y1}].filter((t=>void 0!==t.val&&null!==t.val)).map((t=>{let{lab:e,val:i}=t;return{lab:e,val:i}})).map((t=>{let{lab:e,val:i}=t;return{lab:e,val:"number"===typeof i?Z(i,5):i}})).map((t=>`${t.lab}: ${t.val}`)).join(",");return e?`(${e})`:void 0},this._unique=(t,e,i)=>{let{point:s}=t;return i.findIndex((t=>t.point.x===s.x&&t.point.y===s.y))===e},this._onInputBlur=(t,e,i)=>{const s=t.target;if(!s)return;const n=s.value;this._updateLabel(i,e,n)}}showExtremes(){const{allDataElements:t}=this;t||(this.plotLabelData={},this.labelData=this._mergeLabels());const e=((t,e)=>{if(!(null===t||void 0===t?void 0:t.length))return[];const i=new He(oi(t)),s=t.map((t=>{const s=Ke(t);return{plot:t,plotLabelData:ti(t,s,null===s||void 0===s?void 0:s.extremes,e,i),type:null===s||void 0===s?void 0:s.generatorType}}));return ai(s,e,i)})((null===t||void 0===t?void 0:t.filter((t=>t.displayLabels)))||[],this._getLabelSettings());this.plotLabelData=e.reduce(((t,e)=>(t[e.id]=e.labels,t)),{})||{},this.labelData=this._mergeLabels()}showAll(){const{allDataElements:t}=this;t||(this.plotLabelData={},this.labelData=this._mergeLabels());const e=((t,e)=>{if(!(null===t||void 0===t?void 0:t.length))return[];const i=new He(oi(t)),s=t.map((t=>{const s=Ke(t);return{plot:t,plotLabelData:ti(t,s,ei,e,i),type:null===s||void 0===s?void 0:s.generatorType}}));return ai(s,e,i)})((null===t||void 0===t?void 0:t.filter((t=>t.displayLabels)))||[],this._getLabelSettings());this.plotLabelData=e.reduce(((t,e)=>(t[e.id]=e.labels,t)),{})||{},this.labelData=this._mergeLabels()}remove(){this.plotLabelData={},this.data=[],this.labelData=this._mergeLabels()}exportSVG(){const t=this.getScales();if(!t)return s.s6;const[e,i]=t,n=this.labelData.map((t=>{let{point:n,label:r,visible:o,textColor:a,textOpacity:l,backgroundColor:h,originOffsetX:c,originOffsetY:d,offsetHorizontal:u,offsetVertical:p,angleInRadians:f}=t;if(!1===o||!r)return s.s6;if(!e(n.x)||!i(n.y))return s.s6;const g=e(n.x)+u+this.offsetHorizontal,v=i(n.y)+p+this.offsetVertical,y=(f||0)*(180/Math.PI);return s.JW`<g transform="translate(${g-c}, ${v-d}) rotate(${y})"
                    style="background-color:${h};transform-origin: ${c}px ${d}px;">
                    <text x="0" y="0" style="color: ${a};opacity: ${l||1};">${r}</text></g>
                `}));return s.JW`<g style="font-size: 0.75rem;dominant-baseline: hanging;">${n}</g>`}updated(t){var e;t.has("allDataElements")&&(null===(e=this.allDataElements)||void 0===e||e.forEach((t=>{t&&(t.id||(t.id=`plottable-${(0,G.k)()}`))})),this.showAll()),t.has("scaleMap")&&this.showAll(),t.has("changing")&&this.changing&&this._focusInput()}willUpdate(t){(t.has("editable")||t.has("labelSettingChange"))&&(this.defaultLabelSettings.editable=this.editable,this.showAll()),(t.has("data")||t.has("plotLabelData"))&&(this.labelData=this._mergeLabels(),this.dispatchEvent(new CustomEvent("labels-updated",{detail:{data:this.labelData}})))}render(){if(this.hide)return;const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{}),i=this.getScales();if(!i)return null;const[n,r]=i;return s.qy` <div class="${e}">
            ${this.labelData.map((e=>{let{point:i,originalPoint:o,label:a,id:l,visible:h,textColor:c,textOpacity:d,hoverBackgroundColor:u,backgroundColor:p,originOffsetX:f,originOffsetY:g,offsetHorizontal:v,offsetVertical:y,angleInRadians:m,editable:x}=e;if(!1===h||!a)return null;if(!n(i.x)||!r(i.y))return null;const _={transformOrigin:`${f}px ${g}px`,transform:`translate(${n(i.x)+v+this.offsetHorizontal-f}px, ${r(i.y)+y+this.offsetVertical-g}px) rotate(${m||0}rad)`,color:c,opacity:d||1},b={"--label-background-color":p,"--label-hover-background-color":u};return s.qy`
                        <div style=${(0,s.Wy)(_)} class="${t} label-wrapper">
                            ${this.changing===l?s.qy`<input
                                      data-testid=${this._dataTestId(o)}
                                      style=${(0,s.Wy)(b)}
                                      ${(0,s.KR)(this.inputRef)}
                                      value=${a}
                                      class="${t} label-input"
                                      type="text"
                                      @blur=${t=>this._onInputBlur(t,i,l)}
                                      @keydown=${t=>this._onInputKeydown(t,l,i)}
                                  />`:s.qy` <div
                                      data-testid=${this._dataTestId(o)}
                                      class="${t} label-text${x?" editable":" read-only"}"
                                      style=${(0,s.Wy)(b)}
                                      @click=${x?()=>this._onLabelClick(l):void 0}
                                  >
                                      ${a}
                                  </div>`}
                        </div>
                    `}))}
        </div>`}_mergeLabels(){return[...Object.keys(this.plotLabelData).flatMap((t=>this.plotLabelData[t])).filter((t=>!this.data.some((e=>e.id===t.id||e.point.x===t.point.x&&e.point.y===t.point.y)))).filter(((t,e,i)=>this._unique(t,e,i))),...this.data]}_updateLabel(t,e,i){if(!this.changing)return;const s=this.labelData.find((e=>{let{id:i}=e;return t===i}));if(s){const e=-1!==this.data.findIndex((e=>e.id===t));this.data=e?[...this.data.map((e=>t===e.id?Object.assign(Object.assign({},s),{label:i}):e))]:[...this.data,Object.assign(Object.assign({},s),{label:i})]}else this.data=[...this.data,{point:e,originalPoint:e,label:i,id:t,textColor:"black",originOffsetX:0,originOffsetY:0,offsetHorizontal:0,offsetVertical:0,editable:this.editable}];this.changing===t&&(this.changing="")}_onLabelClick(t){this.editable&&(this.changing=t)}_focusInput(){var t;null===(t=this.inputRef.value)||void 0===t||t.select()}_onInputKeydown(t,e,i){var s;if("Enter"===t.key){t.preventDefault();const n=(null===(s=this.inputRef.value)||void 0===s?void 0:s.value)||"";this._updateLabel(e,i,n)}else"Escape"===t.key&&(t.preventDefault(),this.changing="")}_getLabelSettings(){return Object.assign(Object.assign({},pi),this.defaultLabelSettings)}};hi([(0,s.MZ)(),ci("design:type",Object)],fi.prototype,"editable",void 0),hi([(0,s.MZ)(),ci("design:type",Object)],fi.prototype,"hide",void 0),hi([(0,s.MZ)({hasChanged:(t,e)=>(null===t||void 0===t?void 0:t.length)!==(null===e||void 0===e?void 0:e.length)||(null===t||void 0===t?void 0:t.some((t=>!e.some((e=>e.id===t.id&&e.label===t.label)))))}),ci("design:type",Array)],fi.prototype,"data",void 0),hi([(0,s.MZ)(),ci("design:type",Object)],fi.prototype,"defaultLabelSettings",void 0),hi([(0,s.MZ)(),ci("design:type",Object)],fi.prototype,"offsetHorizontal",void 0),hi([(0,s.MZ)(),ci("design:type",Object)],fi.prototype,"offsetVertical",void 0),hi([(0,s.wk)(),ci("design:type",Object)],fi.prototype,"changing",void 0),hi([(0,s.wk)(),ci("design:type",Object)],fi.prototype,"plotLabelData",void 0),hi([(0,r.Fg)({context:di,subscribe:!0}),(0,s.wk)(),ci("design:type",String)],fi.prototype,"labelSettingChange",void 0),fi=hi([(0,s.eV)({tagName:(0,g.o)("data-labels"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
                --text-size: 0.75rem;
                --label-background-color: transparent;
                --label-hover-background-color: var(--color-primary-2);
            }

            :host {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            ${e} {
                position: relative;
                overflow: hidden;
                width: 100%;
                height: 100%;
            }

            .label-wrapper {
                position: absolute;
                display: inline-block;
                white-space: nowrap;
                overflow: visible;
                background-color: transparent;
                width: 100px;
                height: 20px;
            }

            .label-wrapper:hover {
                z-index: 2;
            }

            .label-wrapper:has(.label-input) {
                z-index: 3;
            }

            .label-wrapper > .label-text,
            .label-wrapper > .label-input {
                font-size: var(--text-size);
                vertical-align: top;
                display: inline-block;
                pointer-events: all;
            }

            .label-wrapper > .label-text {
                padding: 2px;
                transition: background-color 0.5s ease-out;
                background-color: var(--label-background-color);
            }

            .label-wrapper > .label-text.read-only {
                pointer-events: none;
            }

            .label-wrapper > .label-text.editable:hover {
                padding: 1px;
                cursor: pointer;
                border: 1px solid var(--color-border-action-hover);
                background-color: var(--label-hover-background-color);
            }

            .label-wrapper > .label-input {
                position: absolute;
                top: 0;
                left: 0;
                padding-inline: 1px;
                width: 100%;
                color: inherit;
                border: 1px solid var(--color-border-action-hover);
                background-color: var(--label-hover-background-color);
                outline: none;
            }

            .label-wrapper > .label-input:focus {
                outline: none;
            }
        `]},version:n.r})],fi);var gi=i(10431),vi=i(5588);const yi={heading:{fontSize:14},axis:{x:{tickFontSize:12,titleFontSize:14},y:{tickFontSize:12,titleFontSize:14}},traceSize:{line:1,point:1}};function mi(t,e){const i=Object.assign({},t);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const n=e[s],r=t[s];n&&"object"===typeof n&&!Array.isArray(n)&&r&&"object"===typeof r&&!Array.isArray(r)?i[s]=mi(r,n):void 0!==n&&(i[s]=n)}return i}var xi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},_i=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const bi=(0,r.q6)("settings-context"),wi=t=>{class e extends t{}return xi([(0,r.Fg)({context:bi,subscribe:!0}),(0,s.MZ)({attribute:!1}),_i("design:type",Object)],e.prototype,"settings",void 0),e},Mi=Math.sqrt(50),Si=Math.sqrt(10),Ci=Math.sqrt(2);function ki(t,e,i){const s=(e-t)/Math.max(0,i),n=Math.floor(Math.log10(s)),r=s/Math.pow(10,n),o=r>=Mi?10:r>=Si?5:r>=Ci?2:1;let a,l,h;return n<0?(h=Math.pow(10,-n)/o,a=Math.round(t*h),l=Math.round(e*h),a/h<t&&++a,l/h>e&&--l,h=-h):(h=Math.pow(10,n)*o,a=Math.round(t/h),l=Math.round(e/h),a*h<t&&++a,l*h>e&&--l),l<a&&.5<=i&&i<2?ki(t,e,2*i):[a,l,h]}function Ti(t,e,i){if(!((i=+i)>0))return[];if((t=+t)===(e=+e))return[t];const s=e<t,[n,r,o]=s?ki(e,t,i):ki(t,e,i);if(!(r>=n))return[];const a=r-n+1,l=new Array(a);if(s)if(o<0)for(let h=0;h<a;++h)l[h]=(r-h)/-o;else for(let h=0;h<a;++h)l[h]=(r-h)*o;else if(o<0)for(let h=0;h<a;++h)l[h]=(n+h)/-o;else for(let h=0;h<a;++h)l[h]=(n+h)*o;return l}function $i(t,e,i){return ki(t=+t,e=+e,i=+i)[2]}function Ai(t,e,i){i=+i;const s=(e=+e)<(t=+t),n=s?$i(e,t,i):$i(t,e,i);return(s?-1:1)*(n<0?1/-n:n)}function Pi(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Oi(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ri(t){let e,i,s;function n(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(n<r){if(0!==e(s,s))return r;do{const e=n+r>>>1;i(t[e],s)<0?n=e+1:r=e}while(n<r)}return n}return 2!==t.length?(e=Pi,i=(e,i)=>Pi(t(e),i),s=(e,i)=>t(e)-i):(e=t===Pi||t===Oi?t:Ei,i=t,s=t),{left:n,center:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=n(t,e,i,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return r>i&&s(t[r-1],e)>-s(t[r],e)?r-1:r},right:function(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(n<r){if(0!==e(s,s))return r;do{const e=n+r>>>1;i(t[e],s)<=0?n=e+1:r=e}while(n<r)}return n}}}function Ei(){return 0}const Di=Ri(Pi),Ii=Di.right,Li=(Di.left,Ri((function(t){return null===t?NaN:+t})).center,Ii);function zi(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function ji(t,e){var i=Object.create(t.prototype);for(var s in e)i[s]=e[s];return i}function Ui(){}var Bi=.7,Ni=1/Bi,Fi="\\s*([+-]?\\d+)\\s*",Vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gi=/^#([0-9a-f]{3,8})$/,Yi=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),Xi=new RegExp(`^rgb\\(${Hi},${Hi},${Hi}\\)$`),Wi=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Vi}\\)$`),qi=new RegExp(`^rgba\\(${Hi},${Hi},${Hi},${Vi}\\)$`),Zi=new RegExp(`^hsl\\(${Vi},${Hi},${Hi}\\)$`),Ji=new RegExp(`^hsla\\(${Vi},${Hi},${Hi},${Vi}\\)$`),Ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qi(){return this.rgb().formatHex()}function ts(){return this.rgb().formatRgb()}function es(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Gi.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?is(e):3===i?new rs(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?ss(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?ss(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Yi.exec(t))?new rs(e[1],e[2],e[3],1):(e=Xi.exec(t))?new rs(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Wi.exec(t))?ss(e[1],e[2],e[3],e[4]):(e=qi.exec(t))?ss(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Zi.exec(t))?ds(e[1],e[2]/100,e[3]/100,1):(e=Ji.exec(t))?ds(e[1],e[2]/100,e[3]/100,e[4]):Ki.hasOwnProperty(t)?is(Ki[t]):"transparent"===t?new rs(NaN,NaN,NaN,0):null}function is(t){return new rs(t>>16&255,t>>8&255,255&t,1)}function ss(t,e,i,s){return s<=0&&(t=e=i=NaN),new rs(t,e,i,s)}function ns(t,e,i,s){return 1===arguments.length?((n=t)instanceof Ui||(n=es(n)),n?new rs((n=n.rgb()).r,n.g,n.b,n.opacity):new rs):new rs(t,e,i,null==s?1:s);var n}function rs(t,e,i,s){this.r=+t,this.g=+e,this.b=+i,this.opacity=+s}function os(){return`#${cs(this.r)}${cs(this.g)}${cs(this.b)}`}function as(){const t=ls(this.opacity);return`${1===t?"rgb(":"rgba("}${hs(this.r)}, ${hs(this.g)}, ${hs(this.b)}${1===t?")":`, ${t})`}`}function ls(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cs(t){return((t=hs(t))<16?"0":"")+t.toString(16)}function ds(t,e,i,s){return s<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new ps(t,e,i,s)}function us(t){if(t instanceof ps)return new ps(t.h,t.s,t.l,t.opacity);if(t instanceof Ui||(t=es(t)),!t)return new ps;if(t instanceof ps)return t;var e=(t=t.rgb()).r/255,i=t.g/255,s=t.b/255,n=Math.min(e,i,s),r=Math.max(e,i,s),o=NaN,a=r-n,l=(r+n)/2;return a?(o=e===r?(i-s)/a+6*(i<s):i===r?(s-e)/a+2:(e-i)/a+4,a/=l<.5?r+n:2-r-n,o*=60):a=l>0&&l<1?0:o,new ps(o,a,l,t.opacity)}function ps(t,e,i,s){this.h=+t,this.s=+e,this.l=+i,this.opacity=+s}function fs(t){return(t=(t||0)%360)<0?t+360:t}function gs(t){return Math.max(0,Math.min(1,t||0))}function vs(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}function ys(t,e,i,s,n){var r=t*t,o=r*t;return((1-3*t+3*r-o)*e+(4-6*r+3*o)*i+(1+3*t+3*r-3*o)*s+o*n)/6}zi(Ui,es,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qi,formatHex:Qi,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return us(this).formatHsl()},formatRgb:ts,toString:ts}),zi(rs,ns,ji(Ui,{brighter(t){return t=null==t?Ni:Math.pow(Ni,t),new rs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Bi:Math.pow(Bi,t),new rs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new rs(hs(this.r),hs(this.g),hs(this.b),ls(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:os,formatHex:os,formatHex8:function(){return`#${cs(this.r)}${cs(this.g)}${cs(this.b)}${cs(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:as,toString:as})),zi(ps,(function(t,e,i,s){return 1===arguments.length?us(t):new ps(t,e,i,null==s?1:s)}),ji(Ui,{brighter(t){return t=null==t?Ni:Math.pow(Ni,t),new ps(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Bi:Math.pow(Bi,t),new ps(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*e,n=2*i-s;return new rs(vs(t>=240?t-240:t+120,n,s),vs(t,n,s),vs(t<120?t+240:t-120,n,s),this.opacity)},clamp(){return new ps(fs(this.h),gs(this.s),gs(this.l),ls(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ls(this.opacity);return`${1===t?"hsl(":"hsla("}${fs(this.h)}, ${100*gs(this.s)}%, ${100*gs(this.l)}%${1===t?")":`, ${t})`}`}}));const ms=t=>()=>t;function xs(t,e){return function(i){return t+i*e}}function _s(t){return 1===(t=+t)?bs:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(s){return Math.pow(t+s*e,i)}}(e,i,t):ms(isNaN(e)?i:e)}}function bs(t,e){var i=e-t;return i?xs(t,i):ms(isNaN(t)?e:t)}const ws=function t(e){var i=_s(e);function s(t,e){var s=i((t=ns(t)).r,(e=ns(e)).r),n=i(t.g,e.g),r=i(t.b,e.b),o=bs(t.opacity,e.opacity);return function(e){return t.r=s(e),t.g=n(e),t.b=r(e),t.opacity=o(e),t+""}}return s.gamma=t,s}(1);function Ms(t){return function(e){var i,s,n=e.length,r=new Array(n),o=new Array(n),a=new Array(n);for(i=0;i<n;++i)s=ns(e[i]),r[i]=s.r||0,o[i]=s.g||0,a[i]=s.b||0;return r=t(r),o=t(o),a=t(a),s.opacity=1,function(t){return s.r=r(t),s.g=o(t),s.b=a(t),s+""}}}Ms((function(t){var e=t.length-1;return function(i){var s=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),n=t[s],r=t[s+1],o=s>0?t[s-1]:2*n-r,a=s<e-1?t[s+2]:2*r-n;return ys((i-s/e)*e,o,n,r,a)}})),Ms((function(t){var e=t.length;return function(i){var s=Math.floor(((i%=1)<0?++i:i)*e),n=t[(s+e-1)%e],r=t[s%e],o=t[(s+1)%e],a=t[(s+2)%e];return ys((i-s/e)*e,n,r,o,a)}}));function Ss(t,e){var i,s=e?e.length:0,n=t?Math.min(s,t.length):0,r=new Array(n),o=new Array(s);for(i=0;i<n;++i)r[i]=Rs(t[i],e[i]);for(;i<s;++i)o[i]=e[i];return function(t){for(i=0;i<n;++i)o[i]=r[i](t);return o}}function Cs(t,e){var i=new Date;return t=+t,e=+e,function(s){return i.setTime(t*(1-s)+e*s),i}}function ks(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function Ts(t,e){var i,s={},n={};for(i in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)i in t?s[i]=Rs(t[i],e[i]):n[i]=e[i];return function(t){for(i in s)n[i]=s[i](t);return n}}var $s=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,As=new RegExp($s.source,"g");function Ps(t,e){var i,s,n,r=$s.lastIndex=As.lastIndex=0,o=-1,a=[],l=[];for(t+="",e+="";(i=$s.exec(t))&&(s=As.exec(e));)(n=s.index)>r&&(n=e.slice(r,n),a[o]?a[o]+=n:a[++o]=n),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:ks(i,s)})),r=As.lastIndex;return r<e.length&&(n=e.slice(r),a[o]?a[o]+=n:a[++o]=n),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var i,s=0;s<e;++s)a[(i=l[s]).i]=i.x(t);return a.join("")})}function Os(t,e){e||(e=[]);var i,s=t?Math.min(e.length,t.length):0,n=e.slice();return function(r){for(i=0;i<s;++i)n[i]=t[i]*(1-r)+e[i]*r;return n}}function Rs(t,e){var i,s,n=typeof e;return null==e||"boolean"===n?ms(e):("number"===n?ks:"string"===n?(i=es(e))?(e=i,ws):Ps:e instanceof es?ws:e instanceof Date?Cs:(s=e,!ArrayBuffer.isView(s)||s instanceof DataView?Array.isArray(e)?Ss:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Ts:ks:Os))(t,e)}function Es(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}function Ds(t){return+t}var Is=[0,1];function Ls(t){return t}function zs(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:(i=isNaN(e)?NaN:.5,function(){return i});var i}function js(t,e,i){var s=t[0],n=t[1],r=e[0],o=e[1];return n<s?(s=zs(n,s),r=i(o,r)):(s=zs(s,n),r=i(r,o)),function(t){return r(s(t))}}function Us(t,e,i){var s=Math.min(t.length,e.length)-1,n=new Array(s),r=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)n[o]=zs(t[o],t[o+1]),r[o]=i(e[o],e[o+1]);return function(e){var i=Li(t,e,1,s)-1;return r[i](n[i](e))}}function Bs(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ns(){var t,e,i,s,n,r,o=Is,a=Is,l=Rs,h=Ls;function c(){var t=Math.min(o.length,a.length);return h!==Ls&&(h=function(t,e){var i;return t>e&&(i=t,t=e,e=i),function(i){return Math.max(t,Math.min(e,i))}}(o[0],o[t-1])),s=t>2?Us:js,n=r=null,d}function d(e){return null==e||isNaN(e=+e)?i:(n||(n=s(o.map(t),a,l)))(t(h(e)))}return d.invert=function(i){return h(e((r||(r=s(a,o.map(t),ks)))(i)))},d.domain=function(t){return arguments.length?(o=Array.from(t,Ds),c()):o.slice()},d.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},d.rangeRound=function(t){return a=Array.from(t),l=Es,c()},d.clamp=function(t){return arguments.length?(h=!!t||Ls,c()):h!==Ls},d.interpolate=function(t){return arguments.length?(l=t,c()):l},d.unknown=function(t){return arguments.length?(i=t,d):i},function(i,s){return t=i,e=s,c()}}function Fs(){return Ns()(Ls,Ls)}var Vs,Hs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gs(t){if(!(e=Hs.exec(t)))throw new Error("invalid format: "+t);var e;return new Ys({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ys(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Xs(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,s=t.slice(0,i);return[s.length>1?s[0]+s.slice(2):s,+t.slice(i+1)]}function Ws(t){return(t=Xs(Math.abs(t)))?t[1]:NaN}function qs(t,e){var i=Xs(t,e);if(!i)return t+"";var s=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}Gs.prototype=Ys.prototype,Ys.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Zs={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qs(100*t,e),r:qs,s:function(t,e){var i=Xs(t,e);if(!i)return t+"";var s=i[0],n=i[1],r=n-(Vs=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,o=s.length;return r===o?s:r>o?s+new Array(r-o+1).join("0"):r>0?s.slice(0,r)+"."+s.slice(r):"0."+new Array(1-r).join("0")+Xs(t,Math.max(0,e+r-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Js(t){return t}var Ks,Qs,tn,en=Array.prototype.map,sn=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function nn(t){var e,i,s=void 0===t.grouping||void 0===t.thousands?Js:(e=en.call(t.grouping,Number),i=t.thousands+"",function(t,s){for(var n=t.length,r=[],o=0,a=e[0],l=0;n>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),r.push(t.substring(n-=a,n+a)),!((l+=a+1)>s));)a=e[o=(o+1)%e.length];return r.reverse().join(i)}),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Js:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(en.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"\u2212":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Gs(t)).fill,i=t.align,d=t.sign,u=t.symbol,p=t.zero,f=t.width,g=t.comma,v=t.precision,y=t.trim,m=t.type;"n"===m?(g=!0,m="g"):Zs[m]||(void 0===v&&(v=12),y=!0,m="g"),(p||"0"===e&&"="===i)&&(p=!0,e="0",i="=");var x="$"===u?n:"#"===u&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_="$"===u?r:/[%p]/.test(m)?l:"",b=Zs[m],w=/[defgprs%]/.test(m);function M(t){var n,r,l,u=x,M=_;if("c"===m)M=b(t)+M,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),v),y&&(t=function(t){t:for(var e,i=t.length,s=1,n=-1;s<i;++s)switch(t[s]){case".":n=e=s;break;case"0":0===n&&(n=s),e=s;break;default:if(!+t[s])break t;n>0&&(n=0)}return n>0?t.slice(0,n)+t.slice(e+1):t}(t)),S&&0===+t&&"+"!==d&&(S=!1),u=(S?"("===d?d:h:"-"===d||"("===d?"":d)+u,M=("s"===m?sn[8+Vs/3]:"")+M+(S&&"("===d?")":""),w)for(n=-1,r=t.length;++n<r;)if(48>(l=t.charCodeAt(n))||l>57){M=(46===l?o+t.slice(n+1):t.slice(n))+M,t=t.slice(0,n);break}}g&&!p&&(t=s(t,1/0));var C=u.length+t.length+M.length,k=C<f?new Array(f-C+1).join(e):"";switch(g&&p&&(t=s(k+t,k.length?f-M.length:1/0),k=""),i){case"<":t=u+t+M+k;break;case"=":t=u+k+t+M;break;case"^":t=k.slice(0,C=k.length>>1)+u+t+M+k.slice(C);break;default:t=k+u+t+M}return a(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),M.toString=function(){return t+""},M}return{format:d,formatPrefix:function(t,e){var i=d(((t=Gs(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(Ws(e)/3))),n=Math.pow(10,-s),r=sn[8+s/3];return function(t){return i(n*t)+r}}}}function rn(t,e,i,s){var n,r=Ai(t,e,i);switch((s=Gs(null==s?",f":s)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=s.precision||isNaN(n=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ws(e)/3)))-Ws(Math.abs(t)))}(r,o))||(s.precision=n),tn(s,o);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(n=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ws(e)-Ws(t))+1}(r,Math.max(Math.abs(t),Math.abs(e))))||(s.precision=n-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(n=function(t){return Math.max(0,-Ws(Math.abs(t)))}(r))||(s.precision=n-2*("%"===s.type))}return Qs(s)}function on(){var t=Fs();return t.copy=function(){return Bs(t,on())},tt.apply(t,arguments),function(t){var e=t.domain;return t.ticks=function(t){var i=e();return Ti(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var s=e();return rn(s[0],s[s.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var s,n,r=e(),o=0,a=r.length-1,l=r[o],h=r[a],c=10;for(h<l&&(n=l,l=h,h=n,n=o,o=a,a=n);c-- >0;){if((n=$i(l,h,i))===s)return r[o]=l,r[a]=h,e(r);if(n>0)l=Math.floor(l/n)*n,h=Math.ceil(h/n)*n;else{if(!(n<0))break;l=Math.ceil(l*n)/n,h=Math.floor(h*n)/n}s=n}return t},t}(t)}function an(t,e){var i,s=0,n=(t=t.slice()).length-1,r=t[s],o=t[n];return o<r&&(i=s,s=n,n=i,i=r,r=o,o=i),t[s]=e.floor(r),t[n]=e.ceil(o),t}function ln(t){return Math.log(t)}function hn(t){return Math.exp(t)}function cn(t){return-Math.log(-t)}function dn(t){return-Math.exp(-t)}function un(t){return isFinite(t)?+("1e"+t):t<0?0:t}function pn(t){return(e,i)=>-t(-e,i)}function fn(t){const e=t(ln,hn),i=e.domain;let s,n,r=10;function o(){return s=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(r),n=function(t){return 10===t?un:t===Math.E?Math.exp:e=>Math.pow(t,e)}(r),i()[0]<0?(s=pn(s),n=pn(n),t(cn,dn)):t(ln,hn),e}return e.base=function(t){return arguments.length?(r=+t,o()):r},e.domain=function(t){return arguments.length?(i(t),o()):i()},e.ticks=t=>{const e=i();let o=e[0],a=e[e.length-1];const l=a<o;l&&([o,a]=[a,o]);let h,c,d=s(o),u=s(a);const p=null==t?10:+t;let f=[];if(!(r%1)&&u-d<p){if(d=Math.floor(d),u=Math.ceil(u),o>0){for(;d<=u;++d)for(h=1;h<r;++h)if(c=d<0?h/n(-d):h*n(d),!(c<o)){if(c>a)break;f.push(c)}}else for(;d<=u;++d)for(h=r-1;h>=1;--h)if(c=d>0?h/n(-d):h*n(d),!(c<o)){if(c>a)break;f.push(c)}2*f.length<p&&(f=Ti(o,a,p))}else f=Ti(d,u,Math.min(u-d,p)).map(n);return l?f.reverse():f},e.tickFormat=(t,i)=>{if(null==t&&(t=10),null==i&&(i=10===r?"s":","),"function"!==typeof i&&(r%1||null!=(i=Gs(i)).precision||(i.trim=!0),i=Qs(i)),t===1/0)return i;const o=Math.max(1,r*t/e.ticks().length);return t=>{let e=t/n(Math.round(s(t)));return e*r<r-.5&&(e*=r),e<=o?i(t):""}},e.nice=()=>i(an(i(),{floor:t=>n(Math.floor(s(t))),ceil:t=>n(Math.ceil(s(t)))})),e}function gn(){const t=fn(Ns()).domain([1,10]);return t.copy=()=>Bs(t,gn()).base(t.base()),tt.apply(t,arguments),t}Ks=nn({thousands:",",grouping:[3],currency:["$",""]}),Qs=Ks.format,tn=Ks.formatPrefix;const vn=1e3,yn=6e4,mn=36e5,xn=864e5,_n=6048e5,bn=2592e6,wn=31536e6,Mn=new Date,Sn=new Date;function Cn(t,e,i,s){function n(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return n.floor=e=>(t(e=new Date(+e)),e),n.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),n.round=t=>{const e=n(t),i=n.ceil(t);return t-e<i-t?e:i},n.offset=(t,i)=>(e(t=new Date(+t),null==i?1:Math.floor(i)),t),n.range=(i,s,r)=>{const o=[];if(i=n.ceil(i),r=null==r?1:Math.floor(r),!(i<s)||!(r>0))return o;let a;do{o.push(a=new Date(+i)),e(i,r),t(i)}while(a<i&&i<s);return o},n.filter=i=>Cn((e=>{if(e>=e)for(;t(e),!i(e);)e.setTime(e-1)}),((t,s)=>{if(t>=t)if(s<0)for(;++s<=0;)for(;e(t,-1),!i(t););else for(;--s>=0;)for(;e(t,1),!i(t););})),i&&(n.count=(e,s)=>(Mn.setTime(+e),Sn.setTime(+s),t(Mn),t(Sn),Math.floor(i(Mn,Sn))),n.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?n.filter(s?e=>s(e)%t===0:e=>n.count(0,e)%t===0):n:null)),n}const kn=Cn((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));kn.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Cn((e=>{e.setTime(Math.floor(e/t)*t)}),((e,i)=>{e.setTime(+e+i*t)}),((e,i)=>(i-e)/t)):kn:null);kn.range;const Tn=Cn((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*vn)}),((t,e)=>(e-t)/vn),(t=>t.getUTCSeconds())),$n=(Tn.range,Cn((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*vn)}),((t,e)=>{t.setTime(+t+e*yn)}),((t,e)=>(e-t)/yn),(t=>t.getMinutes()))),An=($n.range,Cn((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*yn)}),((t,e)=>(e-t)/yn),(t=>t.getUTCMinutes()))),Pn=(An.range,Cn((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*vn-t.getMinutes()*yn)}),((t,e)=>{t.setTime(+t+e*mn)}),((t,e)=>(e-t)/mn),(t=>t.getHours()))),On=(Pn.range,Cn((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*mn)}),((t,e)=>(e-t)/mn),(t=>t.getUTCHours()))),Rn=(On.range,Cn((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yn)/xn),(t=>t.getDate()-1))),En=(Rn.range,Cn((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/xn),(t=>t.getUTCDate()-1))),Dn=(En.range,Cn((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/xn),(t=>Math.floor(t/xn))));Dn.range;function In(t){return Cn((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yn)/_n))}const Ln=In(0),zn=In(1),jn=In(2),Un=In(3),Bn=In(4),Nn=In(5),Fn=In(6);Ln.range,zn.range,jn.range,Un.range,Bn.range,Nn.range,Fn.range;function Vn(t){return Cn((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/_n))}const Hn=Vn(0),Gn=Vn(1),Yn=Vn(2),Xn=Vn(3),Wn=Vn(4),qn=Vn(5),Zn=Vn(6),Jn=(Hn.range,Gn.range,Yn.range,Xn.range,Wn.range,qn.range,Zn.range,Cn((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()))),Kn=(Jn.range,Cn((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()))),Qn=(Kn.range,Cn((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear())));Qn.every=t=>isFinite(t=Math.floor(t))&&t>0?Cn((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,i)=>{e.setFullYear(e.getFullYear()+i*t)})):null;Qn.range;const tr=Cn((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));tr.every=t=>isFinite(t=Math.floor(t))&&t>0?Cn((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i*t)})):null;tr.range;function er(t,e,i,s,n,r){const o=[[Tn,1,vn],[Tn,5,5e3],[Tn,15,15e3],[Tn,30,3e4],[r,1,yn],[r,5,3e5],[r,15,9e5],[r,30,18e5],[n,1,mn],[n,3,108e5],[n,6,216e5],[n,12,432e5],[s,1,xn],[s,2,1728e5],[i,1,_n],[e,1,bn],[e,3,7776e6],[t,1,wn]];function a(e,i,s){const n=Math.abs(i-e)/s,r=Ri((t=>{let[,,e]=t;return e})).right(o,n);if(r===o.length)return t.every(Ai(e/wn,i/wn,s));if(0===r)return kn.every(Math.max(Ai(e,i,s),1));const[a,l]=o[n/o[r-1][2]<o[r][2]/n?r-1:r];return a.every(l)}return[function(t,e,i){const s=e<t;s&&([t,e]=[e,t]);const n=i&&"function"===typeof i.range?i:a(t,e,i),r=n?n.range(t,+e+1):[];return s?r.reverse():r},a]}const[ir,sr]=er(tr,Kn,Hn,Dn,On,An),[nr,rr]=er(Qn,Jn,Ln,Rn,Pn,$n);function or(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ar(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lr(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}var hr,cr,dr={"-":"",_:" ",0:"0"},ur=/^\s*\d+/,pr=/^%/,fr=/[\\^$*+?|[\]().{}]/g;function gr(t,e,i){var s=t<0?"-":"",n=(s?-t:t)+"",r=n.length;return s+(r<i?new Array(i-r+1).join(e)+n:n)}function vr(t){return t.replace(fr,"\\$&")}function yr(t){return new RegExp("^(?:"+t.map(vr).join("|")+")","i")}function mr(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function xr(t,e,i){var s=ur.exec(e.slice(i,i+1));return s?(t.w=+s[0],i+s[0].length):-1}function _r(t,e,i){var s=ur.exec(e.slice(i,i+1));return s?(t.u=+s[0],i+s[0].length):-1}function br(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.U=+s[0],i+s[0].length):-1}function wr(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.V=+s[0],i+s[0].length):-1}function Mr(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.W=+s[0],i+s[0].length):-1}function Sr(t,e,i){var s=ur.exec(e.slice(i,i+4));return s?(t.y=+s[0],i+s[0].length):-1}function Cr(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),i+s[0].length):-1}function kr(t,e,i){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),i+s[0].length):-1}function Tr(t,e,i){var s=ur.exec(e.slice(i,i+1));return s?(t.q=3*s[0]-3,i+s[0].length):-1}function $r(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.m=s[0]-1,i+s[0].length):-1}function Ar(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.d=+s[0],i+s[0].length):-1}function Pr(t,e,i){var s=ur.exec(e.slice(i,i+3));return s?(t.m=0,t.d=+s[0],i+s[0].length):-1}function Or(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.H=+s[0],i+s[0].length):-1}function Rr(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.M=+s[0],i+s[0].length):-1}function Er(t,e,i){var s=ur.exec(e.slice(i,i+2));return s?(t.S=+s[0],i+s[0].length):-1}function Dr(t,e,i){var s=ur.exec(e.slice(i,i+3));return s?(t.L=+s[0],i+s[0].length):-1}function Ir(t,e,i){var s=ur.exec(e.slice(i,i+6));return s?(t.L=Math.floor(s[0]/1e3),i+s[0].length):-1}function Lr(t,e,i){var s=pr.exec(e.slice(i,i+1));return s?i+s[0].length:-1}function zr(t,e,i){var s=ur.exec(e.slice(i));return s?(t.Q=+s[0],i+s[0].length):-1}function jr(t,e,i){var s=ur.exec(e.slice(i));return s?(t.s=+s[0],i+s[0].length):-1}function Ur(t,e){return gr(t.getDate(),e,2)}function Br(t,e){return gr(t.getHours(),e,2)}function Nr(t,e){return gr(t.getHours()%12||12,e,2)}function Fr(t,e){return gr(1+Rn.count(Qn(t),t),e,3)}function Vr(t,e){return gr(t.getMilliseconds(),e,3)}function Hr(t,e){return Vr(t,e)+"000"}function Gr(t,e){return gr(t.getMonth()+1,e,2)}function Yr(t,e){return gr(t.getMinutes(),e,2)}function Xr(t,e){return gr(t.getSeconds(),e,2)}function Wr(t){var e=t.getDay();return 0===e?7:e}function qr(t,e){return gr(Ln.count(Qn(t)-1,t),e,2)}function Zr(t){var e=t.getDay();return e>=4||0===e?Bn(t):Bn.ceil(t)}function Jr(t,e){return t=Zr(t),gr(Bn.count(Qn(t),t)+(4===Qn(t).getDay()),e,2)}function Kr(t){return t.getDay()}function Qr(t,e){return gr(zn.count(Qn(t)-1,t),e,2)}function to(t,e){return gr(t.getFullYear()%100,e,2)}function eo(t,e){return gr((t=Zr(t)).getFullYear()%100,e,2)}function io(t,e){return gr(t.getFullYear()%1e4,e,4)}function so(t,e){var i=t.getDay();return gr((t=i>=4||0===i?Bn(t):Bn.ceil(t)).getFullYear()%1e4,e,4)}function no(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gr(e/60|0,"0",2)+gr(e%60,"0",2)}function ro(t,e){return gr(t.getUTCDate(),e,2)}function oo(t,e){return gr(t.getUTCHours(),e,2)}function ao(t,e){return gr(t.getUTCHours()%12||12,e,2)}function lo(t,e){return gr(1+En.count(tr(t),t),e,3)}function ho(t,e){return gr(t.getUTCMilliseconds(),e,3)}function co(t,e){return ho(t,e)+"000"}function uo(t,e){return gr(t.getUTCMonth()+1,e,2)}function po(t,e){return gr(t.getUTCMinutes(),e,2)}function fo(t,e){return gr(t.getUTCSeconds(),e,2)}function go(t){var e=t.getUTCDay();return 0===e?7:e}function vo(t,e){return gr(Hn.count(tr(t)-1,t),e,2)}function yo(t){var e=t.getUTCDay();return e>=4||0===e?Wn(t):Wn.ceil(t)}function mo(t,e){return t=yo(t),gr(Wn.count(tr(t),t)+(4===tr(t).getUTCDay()),e,2)}function xo(t){return t.getUTCDay()}function _o(t,e){return gr(Gn.count(tr(t)-1,t),e,2)}function bo(t,e){return gr(t.getUTCFullYear()%100,e,2)}function wo(t,e){return gr((t=yo(t)).getUTCFullYear()%100,e,2)}function Mo(t,e){return gr(t.getUTCFullYear()%1e4,e,4)}function So(t,e){var i=t.getUTCDay();return gr((t=i>=4||0===i?Wn(t):Wn.ceil(t)).getUTCFullYear()%1e4,e,4)}function Co(){return"+0000"}function ko(){return"%"}function To(t){return+t}function $o(t){return Math.floor(+t/1e3)}function Ao(t){return new Date(t)}function Po(t){return t instanceof Date?+t:+new Date(+t)}function Oo(t,e,i,s,n,r,o,a,l,h){var c=Fs(),d=c.invert,u=c.domain,p=h(".%L"),f=h(":%S"),g=h("%I:%M"),v=h("%I %p"),y=h("%a %d"),m=h("%b %d"),x=h("%B"),_=h("%Y");function b(t){return(l(t)<t?p:a(t)<t?f:o(t)<t?g:r(t)<t?v:s(t)<t?n(t)<t?y:m:i(t)<t?x:_)(t)}return c.invert=function(t){return new Date(d(t))},c.domain=function(t){return arguments.length?u(Array.from(t,Po)):u().map(Ao)},c.ticks=function(e){var i=u();return t(i[0],i[i.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?b:h(e)},c.nice=function(t){var i=u();return t&&"function"===typeof t.range||(t=e(i[0],i[i.length-1],null==t?10:t)),t?u(an(i,t)):c},c.copy=function(){return Bs(c,Oo(t,e,i,s,n,r,o,a,l,h))},c}function Ro(){return tt.apply(Oo(nr,rr,Qn,Jn,Ln,Rn,Pn,$n,Tn,cr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}!function(t){hr=function(t){var e=t.dateTime,i=t.date,s=t.time,n=t.periods,r=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,h=yr(n),c=mr(n),d=yr(r),u=mr(r),p=yr(o),f=mr(o),g=yr(a),v=mr(a),y=yr(l),m=mr(l),x={a:function(t){return o[t.getDay()]},A:function(t){return r[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Ur,e:Ur,f:Hr,g:eo,G:so,H:Br,I:Nr,j:Fr,L:Vr,m:Gr,M:Yr,p:function(t){return n[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:To,s:$o,S:Xr,u:Wr,U:qr,V:Jr,w:Kr,W:Qr,x:null,X:null,y:to,Y:io,Z:no,"%":ko},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return r[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:ro,e:ro,f:co,g:wo,G:So,H:oo,I:ao,j:lo,L:ho,m:uo,M:po,p:function(t){return n[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:To,s:$o,S:fo,u:go,U:vo,V:mo,w:xo,W:_o,x:null,X:null,y:bo,Y:Mo,Z:Co,"%":ko},b={a:function(t,e,i){var s=p.exec(e.slice(i));return s?(t.w=f.get(s[0].toLowerCase()),i+s[0].length):-1},A:function(t,e,i){var s=d.exec(e.slice(i));return s?(t.w=u.get(s[0].toLowerCase()),i+s[0].length):-1},b:function(t,e,i){var s=y.exec(e.slice(i));return s?(t.m=m.get(s[0].toLowerCase()),i+s[0].length):-1},B:function(t,e,i){var s=g.exec(e.slice(i));return s?(t.m=v.get(s[0].toLowerCase()),i+s[0].length):-1},c:function(t,i,s){return S(t,e,i,s)},d:Ar,e:Ar,f:Ir,g:Cr,G:Sr,H:Or,I:Or,j:Pr,L:Dr,m:$r,M:Rr,p:function(t,e,i){var s=h.exec(e.slice(i));return s?(t.p=c.get(s[0].toLowerCase()),i+s[0].length):-1},q:Tr,Q:zr,s:jr,S:Er,u:_r,U:br,V:wr,w:xr,W:Mr,x:function(t,e,s){return S(t,i,e,s)},X:function(t,e,i){return S(t,s,e,i)},y:Cr,Y:Sr,Z:kr,"%":Lr};function w(t,e){return function(i){var s,n,r,o=[],a=-1,l=0,h=t.length;for(i instanceof Date||(i=new Date(+i));++a<h;)37===t.charCodeAt(a)&&(o.push(t.slice(l,a)),null!=(n=dr[s=t.charAt(++a)])?s=t.charAt(++a):n="e"===s?" ":"0",(r=e[s])&&(s=r(i,n)),o.push(s),l=a+1);return o.push(t.slice(l,a)),o.join("")}}function M(t,e){return function(i){var s,n,r=lr(1900,void 0,1);if(S(r,t,i+="",0)!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(e&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(n=(s=ar(lr(r.y,0,1))).getUTCDay(),s=n>4||0===n?Gn.ceil(s):Gn(s),s=En.offset(s,7*(r.V-1)),r.y=s.getUTCFullYear(),r.m=s.getUTCMonth(),r.d=s.getUTCDate()+(r.w+6)%7):(n=(s=or(lr(r.y,0,1))).getDay(),s=n>4||0===n?zn.ceil(s):zn(s),s=Rn.offset(s,7*(r.V-1)),r.y=s.getFullYear(),r.m=s.getMonth(),r.d=s.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?ar(lr(r.y,0,1)).getUTCDay():or(lr(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,ar(r)):or(r)}}function S(t,e,i,s){for(var n,r,o=0,a=e.length,l=i.length;o<a;){if(s>=l)return-1;if(37===(n=e.charCodeAt(o++))){if(n=e.charAt(o++),!(r=b[n in dr?e.charAt(o++):n])||(s=r(t,i,s))<0)return-1}else if(n!=i.charCodeAt(s++))return-1}return s}return x.x=w(i,x),x.X=w(s,x),x.c=w(e,x),_.x=w(i,_),_.X=w(s,_),_.c=w(e,_),{format:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}(t),cr=hr.format,hr.parse,hr.utcFormat,hr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const Eo={x:m.j,y:m.j},Do={type:"percent",start:0,end:0},Io={x:{scaleType:"auto",orientation:"horizontal"},y:{scaleType:"auto",orientation:"vertical"},zoomX:{scaleType:"auto",domain:m.j,orientation:"horizontal"},zoomY:{scaleType:"auto",domain:m.j,orientation:"vertical"}},Lo=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Io;return t?Object.assign(Object.assign({},e),(0,M.Nn)(t,(t=>{let[i,s]=t;return Object.assign(Object.assign({orientation:"vertical",scaleType:"auto"},e[i]),s)}))):e},zo=t=>{let{domain:e,range:i,orientation:s}=t;return{scaleType:"band",domain:e,scale:lt().domain(e).range(i).paddingInner(.05).paddingOuter(.5).align(1),orientation:s}},jo=t=>{let{domain:e,range:i,orientation:s,ticks:n}=t;return{scaleType:"linear",domain:e,scale:on().domain(e).range(i),ticks:n,orientation:s}},Uo=t=>{let{domain:e,range:i,orientation:s}=t;return{scaleType:"timescale",domain:e,scale:Ro().domain(e).range(i),orientation:s}},Bo=(t,e)=>{const i=(e[1]-e[0])*(1/Math.abs(t[1]-t[0])),s=-i*t[0];return[s,s+i]},No=(t,e,i,s)=>{let[n,r]=i;return(0,M.Nn)(t,(t=>{let[i,o]=t;const l=((t,e,i)=>{var s,n,r,o;if(k(t))return null!==e&&void 0!==e?e:t;if(T(t)){const[i,r]=null!==(s=t)&&void 0!==s?s:[void 0,void 0],[o,a]=null!==(n=e)&&void 0!==n?n:[void 0,void 0];return[null!==o&&void 0!==o?o:i,null!==a&&void 0!==a?a:r]}const[l,h]=null!==(r=t)&&void 0!==r?r:[void 0,void 0],[c,d]=null!==(o=e)&&void 0!==o?o:[void 0,void 0],u=[null!==c&&void 0!==c?c:l,i].filter(a),p=[null!==d&&void 0!==d?d:h,i].filter(a);return[Math.min.apply(null,u),Math.max.apply(null,p)]})(e[i],o.domain,o.includeValue),h="horizontal"===o.orientation?[0,n]:[0,r],c=((t,e,i)=>{if(k(t)||T(t))return t;const[s,n]=t,{start:r,end:o,type:a}=null!==e&&void 0!==e?e:Do;if("percent"===a){const t=Math.abs(n-s);return[s-t*r,n+t*o]}if("data"===a)return[s-r,n+o];{const[e,s]=i,n=on().domain(t).range(i);return[n.invert(e-r),n.invert(s+o)]}})(l,o.padding,h),d=s[i],u="horizontal"===o.orientation?Bo(d,[0,n]):Bo([d[1],d[0]],[r,0]);switch(o.scaleType){case"band":return zo({domain:c,range:u,orientation:o.orientation});case"linear":return jo({domain:c,range:u,orientation:o.orientation,ticks:o.ticks});case"log":return(t=>{let{domain:e,range:i,orientation:s,ticks:n}=t;if(2===e.length&&e[0]<=0&&e[1]>=0||3===e.length&&e[0]<=0&&e[2]>=0)throw Error("Log domain must not contain 0 (log(0)=-\u221e)");return{scaleType:"log",domain:e,scale:gn(e,3===e.length?[i[0],i[0]/2,i[1]]:i),ticks:n,orientation:s}})({domain:c,range:u,orientation:o.orientation,ticks:o.ticks});case"auto":return(t=>{let{domain:e,range:i,orientation:s}=t;return 2===e.length&&e.every((t=>"number"===typeof t))?jo({domain:e,range:i,orientation:s}):2===e.length&&e.every((t=>t instanceof Date))?Uo({domain:e,range:i,orientation:s}):zo({domain:e,range:i,orientation:s})})({domain:c,range:u,orientation:o.orientation});case"timescale":return Uo({domain:c,range:u,orientation:o.orientation})}}))},Fo=(0,M.d4)(s.Lb,(t=>`--${t.replace(/_/g,"-")}`)),Vo=Object.entries(Fo).map((t=>{let[e,i]=t;return`${e}:${i}`})).join(";");function Ho(t,e,i){const[n,r]=i,o=s.qy` <svg viewBox="0 0 ${n} ${r}">${(t=>s.JW`
  <style>
    :root{
      ${Vo}
    }
  </style>
  ${t}
`)(e)}</svg> `;(0,s.XX)(o,t)}function Go(t,e){const i=document.createElement("svg"),[n,r]=e;i.setAttribute("width",String(n)),i.setAttribute("height",String(r)),i.setAttribute("viewBox",`0 0 ${n} ${r}`),i.setAttribute("font-family","Roboto, Arial, Open Sans, Helvetica, sans-serif"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),(0,s.XX)(t,i);return new Blob(['<?xml version="1.0" standalone="no"?>\n',i.outerHTML.replace(/<!--.*?-->/g,"")],{type:"image/svg+xml;charset=utf-8"})}const Yo=(t,e)=>{let[i,s]=e;return new Promise(((e,n)=>{let r,o,a;const l=2*i,h=2*s;a=new Image,a.src=t,a.width=i,a.height=s,a.onload=()=>{r=document.createElement("canvas"),r.width=l,r.height=h,o=r.getContext("2d"),o.fillStyle="white",o.fillRect(0,0,l,h),o.drawImage(a,0,0,a.width,a.height,0,0,l,h),a=new Image,a.src=r.toDataURL("image/png"),a.onload=()=>{r=document.createElement("canvas"),r.width=l,r.height=h,o=r.getContext("2d"),o.drawImage(a,0,0),r.toBlob(e)}}}))};function Xo(t,e){const i=URL.createObjectURL(t),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}const Wo=t=>e=>{if(!e.exportSVG)return console.warn(e.tagName,"does not support SVG export"),"";if(null===t||void 0===t?void 0:t.useElementSize){const{width:t,height:i}=e.getBoundingClientRect();return e.exportSVG([t,i])}return e.exportSVG()};var qo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Zo=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const Jo=(0,r.q6)("render-update-context"),Ko=(t,e,i)=>i.indexOf(t)===e,Qo=t=>{class e extends t{wasUpdated(t){this.dispatchEvent(new CustomEvent("rerender-scheduled",{bubbles:!0,detail:{updated:t}}))}async willUpdate(t){var e;if(super.willUpdate(t),t.has("rerender")&&(null===(e=this.rerender)||void 0===e?void 0:e.length)){const t=this.rerender.filter(Ko),e=await this.renderUpdate(t);this.wasUpdated(e)}}}return qo([(0,r.Fg)({context:Jo,subscribe:!0}),(0,s.wk)(),Zo("design:type",Array)],e.prototype,"rerender",void 0),e};var ta,ea=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ia=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let sa=ta=class extends((0,gi.K)(s.OC)){set slotMap(t){this._slotMap=t?Object.assign(Object.assign({},ta.SLOTMAP_DEFAULT),t):ta.SLOTMAP_DEFAULT}get slotMap(){return this._slotMap}constructor(){var t;super(),t=this,this.fittedDomain=void 0,this.fittedDomainMap=void 0,this.size=void 0,this.allDataElements=void 0,this.mouseEvent=void 0,this.scaleSettings=void 0,this.watermark="",this.heading=void 0,this.viewbox=void 0,this.zoomState=void 0,this.scaleZoomMap=void 0,this.settings=void 0,this.backgroundOpacity=1,this.paddings=["8px","8px","12px","8px"],this.providedSettings=yi,this.rerender=void 0,this.mergedSettings=Lo(this.scaleSettings),this._multiSlots=[2],this.zoomStrategy=void 0,this._slotMap=ta.SLOTMAP_DEFAULT,this._updateAllDataElements=t=>{this.allDataElements&&this.allDataElements.length===t.length&&this.allDataElements.every(((e,i)=>e===t[i]))||(this.allDataElements=t)},this._renderUpdate=t=>{var e;(null===(e=this.rerender)||void 0===e?void 0:e.includes(t.detail.target.plotUniqueId))||(this.rerender=[...this.rerender||[],t.detail.target.plotUniqueId])},this._rerenderScheduled=t=>{const e=t.detail.updated;this.rerender=(this.rerender||[]).filter((t=>!e.includes(t)))},this._getScroller=()=>this.shadowRoot.querySelector('div[class="scrollbar"]'),this._exportHideScroller=async()=>{const t=this._getScroller();t&&t.getBoundingClientRect().height>0&&(t.style.setProperty("display","none"),await new Promise((t=>setTimeout(t,20))))},this._exportRestoreScroller=()=>{const t=this._getScroller();t&&t.style.removeProperty("display")},this._refElements=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t._queryAssignedElements(t._slotName(e,i))},this._mainElements=()=>{var t;const e=null!==(t=this._refElements(this._slotMap.main))&&void 0!==t?t:[];return this._multiSlots.forEach(((t,i,s)=>{if(i<s.length-1){const i=this._refElements(this._slotMap.main,t);e.push(...i)}})),e},this._axisXElements=()=>this._refElements(this._slotMap.xAxisBottom),this._axisX2Elements=()=>this._refElements(this._slotMap.xAxisTop),this._paneElements=()=>this._refElements(this._slotMap.pane),this._wheelEventHandler=this._wheelEventHandler.bind(this),this.addEventListener(y.mp,(t=>this.zoomStrategy=t.detail))}connectedCallback(){this.addEventListener("wheel",this._wheelEventHandler),this.addEventListener("mousedown",this._wheelEventHandler),this.addEventListener("scene-canvas-event-dispatch",this._wheelEventHandler),this.addEventListener("dblclick",this._wheelEventHandler),super.connectedCallback()}disconnectedCallback(){this._uninstallResizeObserver(this.mainSlotRef),this.removeEventListener("wheel",this._wheelEventHandler),this.removeEventListener("mousedown",this._wheelEventHandler),this.removeEventListener("scene-canvas-event-dispatch",this._wheelEventHandler),this.removeEventListener("dblclick",this._wheelEventHandler),super.disconnectedCallback()}async renderSVGPreview(t){const{contents:e,dimensions:i}=await this.getSVGContents();Ho(t,e,i)}async renderImagePreview(t){const{contents:e,dimensions:i}=await this.getSVGContents();!function(t,e,i){const s=Go(e,i),n=URL.createObjectURL(s),[r,o]=i;t.src=n,t.width=r,t.height=o}(t,e,i)}async exportSVG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"export.svg";const{contents:e,dimensions:i}=await this.getSVGContents();!function(t,e,i){Xo(Go(e,i),t)}(t,e,i)}async exportPNG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"export.png";const{contents:e,dimensions:i}=await this.getSVGContents();await async function(t,e,i){const s=Go(e,i);Xo(await Yo(URL.createObjectURL(s),i),t)}(t,e,i)}async copyToClipboard(){const{contents:t,dimensions:e}=await this.getSVGContents();await async function(t,e){const i=Go(t,e),s=await Yo(URL.createObjectURL(i),e);await navigator.clipboard.write([new ClipboardItem({[s.type]:s})])}(t,e)}render(){var t,e,i=this;const[,n]=(0,s.Yh)(this.tagName.toLowerCase(),{}),r=this.heading?s.qy` <h2 class="heading">${this.heading}</h2> `:null,o={"--main-background":le(this.backgroundColor||"none"),"--main-background-opacity":`${Math.min(100*(this.backgroundOpacity||1),100)}%`,"--plot-paddings":null===(e=null===(t=this.paddings)||void 0===t?void 0:t.filter((t=>null===t||void 0===t?void 0:t.length)))||void 0===e?void 0:e.join(" ")},a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=t?null:s.qy`
                      <slot
                          name="${i._slotName(i._slotMap.main,i._multiSlots[i._multiSlots.length-1])}"
                          @slotchange=${i._handleMultiSlotchange}
                      ></slot>
                  `,n=t?`-y${t}`:"",r=i._slotName(i._slotMap.main,t);return s.qy`
                <div id="axis-y" class="axis-y" style="${(0,dt.wb)({"grid-area":"y"+n})}">
                    <slot name="${i._slotName(i._slotMap.yAxisLeft,t)}"></slot>
                </div>
                <div id="axis-y2" class="axis-y2" style="${(0,dt.wb)({"grid-area":"y2"+n})}">
                    <slot name="${i._slotName(i._slotMap.yAxisRight,t)}"></slot>
                </div>

                <div
                    id="${t?r:"main-area"}"
                    class="main-area"
                    @mouseenter=${i._wheelEventHandler}
                    @mouseleave=${i._wheelEventHandler}
                    style="${(0,dt.wb)({"grid-area":"main"+n})}"
                >
                    <slot
                        name=${(0,s.JR)(r)}
                        @datachange=${i.updateFittedDomain}
                        @slotchange=${i._handleSlotchange}
                        @labelsettingchange=${i.signalLabelSettingChange}
                        @request-rerender="${i._renderUpdate}"
                        @rerender-scheduled="${i._rerenderScheduled}"
                    ></slot>
                    ${e}
                </div>
            `},l=this._multiSlots.length>1?(0,s.ux)(this._multiSlots.slice(0,-1).reverse(),(t=>t),a):null;return s.qy`
            <div class="${n}" id="root" style=${(0,dt.wb)(o)}>
                ${r} ${l} ${a()}
                <div id="axis-x" class="axis-x">
                    <slot name="${this._slotName(this._slotMap.xAxisBottom)}"></slot>
                </div>
                <div id="axis-x2" class="axis-x2">
                    <slot name="${this._slotName(this._slotMap.xAxisTop)}"></slot>
                </div>

                <div class="verscrollbar">
                    <slot name="${this._slotName(this._slotMap.verticalScrollbar)}"></slot>
                </div>

                <div class="pane">
                    <slot name="${this._slotName(this._slotMap.pane)}"></slot>
                </div>

                <div class="horscrollbar">
                    <slot name="${this._slotName(this._slotMap.scrollbar)}"></slot>
                </div>

                <div class="watermark">${this.watermark}</div>
            </div>
        `}_resizeObserverCallback(t){const[{borderBoxSize:e}]=t,[{blockSize:i,inlineSize:s}]=e;this._debouncedCallback||(this._debouncedCallback=(0,vi.Tz)(((t,e)=>this.updateSize([t,e])),10)),this._debouncedCallback(s,i)}_resizeObserverElem(){return this.mainSlotRef}firstUpdated(){const t=this.renderRoot.querySelector("#root");this.plotRootElement=t,this._uninstallResizeObserver(this),this._installResizeObserver(this.mainSlotRef)}willUpdate(t){super.willUpdate(t),t.has("settings")&&(this.providedSettings=this.settings?mi(yi,this.settings):yi),t.has("scaleSettings")&&(this.mergedSettings=Lo(this.scaleSettings),this.updateFittedDomain()||(this.scaleZoomMap=this.updateScaleZoomMap())),(t.has("fittedDomain")||t.has("viewbox")||t.has("zoomState")||t.has("zoomStrategy"))&&(this.scaleZoomMap=this.updateScaleZoomMap()),(t.has("scaleZoomMap")||t.has("fittedDomain")||t.has("size"))&&this.updateScales()}update(t){if(super.update(t),t.has("_multiSlots")){const t=this.renderRoot.querySelector("#root");if(this._multiSlots.length>1){const e=this._multiSlots.slice(0,-1).reverse().map((t=>`'y-y${t} main-y${t} y2-y${t} . pane''. . . . pane'`)).join("")+"'y main y2 . pane'";null===t||void 0===t||t.style.setProperty("--area-r3",e);const i=1/this._multiSlots.length,s=this._multiSlots.slice(0,-1).reverse().map((t=>i+"fr 16px")).join(" ")+` ${i}fr`;null===t||void 0===t||t.style.setProperty("--grid-main",s)}else null===t||void 0===t||t.style.removeProperty("--area-r3"),null===t||void 0===t||t.style.removeProperty("--grid-main")}}_slotName(t,e){return e&&"cardinalityPrefix"in t?"slotName"in t?`${t.slotName}${t.cardinalityPrefix}${e}`:`${t.cardinalityPrefix}${e}`:"slotName"in t?t.slotName:void 0}_wheelEventHandler(t){"dblclick"===t.type&&t.shiftKey?this.exportSVG():t.composedPath().find((t=>{var e;return null===(e=t.classList)||void 0===e?void 0:e.contains("main-area")}))&&(this.mouseEvent=t)}updateScaleZoomMap(){if((0,M.O9)(this.fittedDomainMap))switch(this.zoomStrategy){case y.PS.MultiAxis:return(0,M.Nn)(this.fittedDomainMap,(t=>{let[e]=t;var i,s;return null!==(s=null===(i=this.zoomState)||void 0===i?void 0:i[e])&&void 0!==s?s:m.j}));case y.PS.Viewport:default:return Object.assign(Object.assign({},this.viewbox),(0,M.Nn)(this.fittedDomainMap,(t=>{let[e]=t;var i,s,n,r;return"horizontal"===this.mergedSettings[e].orientation?null!==(s=null===(i=this.viewbox)||void 0===i?void 0:i.x)&&void 0!==s?s:m.j:null!==(r=null===(n=this.viewbox)||void 0===n?void 0:n.y)&&void 0!==r?r:m.j})))}}updateScales(){if(!(0,M.O9)(this.fittedDomainMap)||this.hasInvalidSize()||!this.scaleZoomMap)return;const t=this.fittedDomainMap,e=(0,M.J2)(this.mergedSettings,(e=>{let[i]=e;return!!t[i]}));this.scaleMap=No(e,t,this.size,this.scaleZoomMap)}updateSize(t){this.size=t}signalLabelSettingChange(){this.labelSettingChange=(0,G.k)()}_handleSlotchange(t){const e=t.target.name,i=Number(e.split("-y")[1]);0===t.target.assignedNodes().length&&(this._multiSlots=this._multiSlots.filter((t=>t!==i)),i<this._multiSlots[this._multiSlots.length-1]&&(this._multiSlots=this._multiSlots.slice(0,-1),this._multiSlots.push(i))),this.updateFittedDomain()}_handleMultiSlotchange(t){const e=t.target.name,i=this._multiSlots[this._multiSlots.length-1];if(t.target.assignedNodes().length>0&&e==="main-y"+i){this._multiSlots.sort(((t,e)=>t-e));let t=i+1;for(;this._multiSlots.includes(t);)t++;this._multiSlots=[...this._multiSlots,t]}}_plottableElements(){return this._mainElements().filter((t=>!!t.plotData))}updateFittedDomain(){const t=this._plottableElements();this._updateAllDataElements(t);const e=t.filter((t=>t.includeInDomain)),i=(0,M.$z)(e,(t=>{var e;return null!==(e=t.scaleX)&&void 0!==e?e:"x"})),s=(0,M.$z)(e,(t=>{var e;return null!==(e=t.scaleY)&&void 0!==e?e:"y"})),n=(0,M.J2)(Object.assign(Object.assign({},i),s),(t=>{let[e]=t;return null!=this.mergedSettings[e]})),r=(0,M.Nn)(n,(t=>{let[e,i]=t;const{orientation:s,scaleType:n,domain:r,symmetricDomain:o}=this.mergedSettings[e];if(r)return r;let a=D(i.map((t=>"horizontal"===s?t.getDomainX(n):t.getDomainY(n))));if(o&&"band"!==n&&"log"!==n&&2===a.length){const[t,e]=a,i=Math.max(Math.abs(t),Math.abs(e));a=[-i,i]}return a})),o=(0,M.J2)(this.mergedSettings,(t=>{let[e,i]=t;return!Object.keys(r).includes(e)&&Boolean(i.domain)})),a=(0,M.LG)(o,(t=>t.domain)),l=(0,M.J2)(Object.assign(Object.assign({},r),a),(t=>{let[,e]=t;return S(e)}));if(!(0,M.O9)(l)||z(l,this.fittedDomainMap))return!1;this.fittedDomainMap=l;const h={x:l.x,y:l.y};return this.fittedDomain=h,this.dispatchEvent(new CustomEvent("domain-fitted",{detail:{domain:h,domainMap:l}})),!0}hasInvalidSize(){return!this.size||this.size.some((t=>0===t))}async getSVGContents(){await this._exportHideScroller(),await this.updateComplete;const t=this.getBoundingClientRect(),{width:e,height:i}=t,n=this._paneElements().map(Wo()),r=this.shadowRoot.querySelector(".pane").getBoundingClientRect(),[o,a]=(0,M.gk)(r,t),l=this.shadowRoot.querySelector(".watermark").getBoundingClientRect(),[h,c]=(0,M.gk)(l,t),d=this._exportAxisElements(this._axisXElements(),"axis-x",((t,e)=>[t,e]),t),u=this._exportAxisElements(this._axisX2Elements(),"axis-x2",((t,e,i)=>[t,e+i.height]),t),[p,f]=this.size,g=[0,...this._multiSlots,0].map(((e,i,n)=>{if(i<n.length-1){const n=this._slotName(this._slotMap.main,e),r=this._slotName(this._slotMap.yAxisLeft,e),o=this._slotName(this._slotMap.yAxisRight,e),a=this._queryAssignedElements(n),l=this._queryAssignedElements(r),h=this._queryAssignedElements(o),c=(0===i?this.mainSlotRef:this.shadowRoot.querySelector(`slot[name="${n}"]`).parentElement).getBoundingClientRect(),[g,v]=(0,M.gk)(c,t),y=a.map(Wo()),m=y.length<1?null:s.JW`
                    <clipPath id="main-box">
                        <rect x="0" y="0" width="${p}" height="${f}" />
                    </clipPath>
                    <g class="main" clip-path="url(#main-box)" transform="translate(${g} ${v})">
                        <rect 
                            x="0" 
                            y="0" 
                            width="${p}" 
                            height="${f}" 
                            fill="${le(this.backgroundColor||"none")}" 
                            fill-opacity="${this.backgroundOpacity||1}"/>
                        ${y}
                    </g>`,x=this._exportAxisElements(l,"axis-y",((t,e,i)=>[t+i.width,e]),t),_=this._exportAxisElements(h,"axis-y2",((t,e)=>[t,e]),t),b=0===e?s.JW`${d}${u}`:null;return s.JW`
            ${m}
            ${x}${_}
            ${b}`}return null}));return this._exportRestoreScroller(),{dimensions:[e,i],contents:s.JW`
            ${g}
            <g class="pane" transform="translate(${o} ${a})">${n}</g>
            <g class="watermark" transform="translate(${h} ${c})">${v=this.watermark,s.JW`
      <text
          font-size='8px'
          fill=${s.Lb.color_secondary_4}
          text-anchor='start'
          dominant-baseline="hanging"
      >
          ${v}
      </text>
  `}</g>`};var v}_exportAxisElements(t,e,i,n){return t.map((t=>{const r=t.getBoundingClientRect(),[o,a]=(0,M.gk)(r,n),[l,h]=i(o,a,r);return s.JW`
        <g class="${e}" transform="translate(${l} ${h})">
        ${Wo({useElementSize:!0})(t)}
        </g>
        `}))}_queryAssignedElements(t){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(t?`slot[name="${t}"]`:"slot:not([name])");return i?i.assignedElements({flatten:!0}):[]}};sa.SLOTMAP_DEFAULT={main:{cardinalityPrefix:"main-y"},xAxisBottom:{slotName:"axis-x"},xAxisTop:{slotName:"axis-x2"},yAxisLeft:{slotName:"axis-y",cardinalityPrefix:"-y"},yAxisRight:{slotName:"axis-y2",cardinalityPrefix:"-y"},pane:{slotName:"pane"},scrollbar:{slotName:"scrollbar"},verticalScrollbar:{slotName:"vertical-scrollbar"}},ea([(0,r.Gt)({context:o.vX}),ia("design:type",HTMLElement)],sa.prototype,"plotRootElement",void 0),ea([(0,r.Gt)({context:o.Ck}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"fittedDomain",void 0),ea([(0,s.wk)(),ia("design:type",Object)],sa.prototype,"fittedDomainMap",void 0),ea([(0,r.Gt)({context:o.$S}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"size",void 0),ea([(0,r.Gt)({context:V.W}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"allDataElements",void 0),ea([(0,r.Gt)({context:v.XY}),ia("design:type",Object)],sa.prototype,"mouseEvent",void 0),ea([(0,s.MZ)({hasChanged:(t,e)=>{if(!t&&e||!e&&t)return!0;if(!t&&!e)return!1;const i=(0,M.J2)(t,(t=>{let[i,s]=t;const n=e[i];return Object.entries(s).reduce(((t,e)=>{let[i,s]=e;const r=n&&n[i];return t||r!==s}),!1)})),s=(0,M.J2)(e,(e=>{let[i]=e;return!(0,M.O9)(t[i])}));return(0,M.O9)(i)||(0,M.O9)(s)}}),ia("design:type",Object)],sa.prototype,"scaleSettings",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"watermark",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"heading",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"viewbox",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"zoomState",void 0),ea([(0,r.Gt)({context:o.D6}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"scaleZoomMap",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"settings",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"backgroundColor",void 0),ea([(0,s.MZ)(),ia("design:type",Object)],sa.prototype,"backgroundOpacity",void 0),ea([(0,s.MZ)(),ia("design:type",Array)],sa.prototype,"paddings",void 0),ea([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),ia("design:type",Object),ia("design:paramtypes",[Object])],sa.prototype,"slotMap",null),ea([(0,r.Gt)({context:bi}),ia("design:type",Object)],sa.prototype,"providedSettings",void 0),ea([(0,r.Gt)({context:o.K_}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"scaleMap",void 0),ea([(0,r.Gt)({context:di}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"labelSettingChange",void 0),ea([(0,r.Gt)({context:Jo}),(0,s.wk)(),ia("design:type",Object)],sa.prototype,"rerender",void 0),ea([(0,s.wk)(),ia("design:type",Object)],sa.prototype,"mergedSettings",void 0),ea([(0,s.P)("#main-area"),ia("design:type",Object)],sa.prototype,"mainSlotRef",void 0),ea([(0,s.wk)(),ia("design:type",Array)],sa.prototype,"_multiSlots",void 0),ea([(0,s.wk)(),ia("design:type",Object)],sa.prototype,"zoomStrategy",void 0),sa=ta=ea([(0,s.eV)({tagName:(0,g.o)("plot"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.AH`:host,:host::before,:host::after,:host *,:host *::before,:host *::after{box-sizing:border-box;}:host{display:block;width:100%;height:100%;}${e}{--area-r1:'heading heading heading . pane';--area-r2:'. x2 . verscrollbar pane';--area-r3:'y main y2 verscrollbar pane';--area-r4:'. x . . pane';--area-r5:'. horscrollbar . . .';--grid-main:1fr;--grid:auto auto var(--grid-main) auto auto / auto 1fr auto auto auto;width:100%;height:100%;display:grid;position:relative;padding:var(--plot-paddings, 0);grid-template:var(--grid);grid-template-areas:var(--area-r1)var(--area-r2)var(--area-r3)var(--area-r4)var(--area-r5);-webkit-font-smoothing:antialiased;font-synthesis:none;text-rendering:optimizeLegibility;container-type:inline-size;}.heading{grid-area:heading;display:grid;height:30px;font-size:14px;margin:0;text-align:center;place-items:center;}.main-area{grid-area:var(--grid-area, main);overflow:visible;position:relative;user-select:none;background-color:color-mix(in srgb,var(--main-background) var(--main-background-opacity),transparent);}.main-area slot::slotted(*){position:absolute;top:0;left:0;width:100%;height:100%;user-select:none;}.axis-x,.axis-x2{width:100%;display:flex;flex-direction:column;}.axis-x{grid-area:var(--grid-area, x);}.axis-x2{grid-area:var(--grid-area, x2);}.axis-y,.axis-y2{height:100%;display:flex;flex-direction:row;}.axis-y{grid-area:var(--grid-area, y);}.axis-y2{grid-area:var(--grid-area, y2);}.pane{grid-area:pane;overflow:hidden;}.horscrollbar{grid-area:horscrollbar;}.verscrollbar{grid-area:verscrollbar;}.watermark{position:absolute;right:16px;bottom:2px;font-size:8px;white-space:nowrap;color:var(--color-secondary-4);}`]},version:n.r}),ia("design:paramtypes",[])],sa);const na=["year","month","day","minute","second","millisecond"],ra=(na.slice(0,3),na.slice(3)),oa={year:4,month:7,day:10,minute:16,second:19,timezone:19,timezoneEnd:26},aa=t=>{const e=(null===t||void 0===t?void 0:t.resolution)||"minute",i=ra.includes(e)&&(null===t||void 0===t?void 0:t.showTimezoneOffset),s=new Intl.DateTimeFormat("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:null===t||void 0===t?void 0:t.timeZone,timeZoneName:i?"longOffset":void 0});return t=>{const i=(t=>null===t||void 0===t?new Date(NaN):t instanceof Date?t:new Date(t))(t);if(!((n=i)instanceof Date)||isNaN(n.valueOf()))return"";var n;const r=s.format(i);return`${r.substring(0,oa[e])}${r.substring(oa.timezone,oa.timezoneEnd).replace("GMT","UTC")}`}},la=new Ye,ha=t=>{const e=t.reduce(((t,e)=>{const i=0!==(s=e).getMilliseconds()?"millisecond":0!==s.getSeconds()?"second":0!==s.getMinutes()||0!==s.getHours()?"minute":1!==s.getDate()?"day":0!==s.getMonth()?"month":"year";var s;const n=na.indexOf(i);return n>t?n:t}),0);return na[e]},ca=t=>aa({resolution:t,showTimezoneOffset:!1}),da=(t,e,i)=>{var s,n;const r=la.measureTextLength("HH",Ge(null!==(s=t.tickFontSize)&&void 0!==s?s:12)),o=e.invert(0),a=e.invert(i),l=nr(o,a,Math.floor(i/r)),h=ha(l),c=ca(h),d=(t=>new Array(Math.floor(t)).fill(0).map((()=>"H")).join(""))(Math.max(c(o).length,c(a).length)),u=la.measureTextLength(d,Ge(null!==(n=t.tickFontSize)&&void 0!==n?n:12))+(t.labelGapMin||10);let p,f,g,v,y=Math.floor(i/u);do{if(y-=2,v=nr(o,a,y),v.length<=1)return v;p=v.slice(1).map(((t,i)=>e(t)-e(v[i]))),g=Math.max(...p),f=Math.min(...p)}while(g<u&&y>0);if(!(g-f>20))return v;const m=[v[0]];let x=e(v[0])+g;for(;x<i;)m.push(e.invert(x)),x+=g;return m},ua=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.max(i,Math.round(t/e))},pa=(t,e,i)=>{const s=[];return e.forEach(((n,r)=>{if(r<e.length-1){const o=e[r+1],a=Math.abs(t(n)-t(o));if(a>2*i){const t=Math.floor(a/i),e=(o-n)/t;for(let i=1;i<t;i++)s.push(n+i*e)}}})),s},fa=t=>{let{axisSettings:e,scale:i,scaleSize:s,viewportSize:n,scaleMeta:r}=t;const o=Math.round(Math.log10(i.domain()[1])-Math.log10(i.domain()[0])),a=ua(s,ma.y+e.tickFontSize*ma.fontScaling,1),l=i.ticks().map(i.tickFormat(o*a,"f")).filter((t=>t)).map(Number),h=pa(i,l,Math.round(n/2)),c="number"===typeof r.ticks?r.ticks:e.estimatedTickCount;return c?(t=>{let{scaleTicks:e,scale:i,viewportSize:s,estimatedTickCount:n}=t;const r=Math.round(s/n),o=[e[0]];e.slice(1).forEach((t=>{const e=o[o.length-1];Math.abs(i(e)-i(t))>r&&o.push(t)}));const a=pa(i,e,r);return[...o,...a].sort(((t,e)=>t-e))})({scaleTicks:l,scale:i,viewportSize:n,estimatedTickCount:c}):[...l,...h].sort(((t,e)=>t-e))};function ga(t,e,i,s){const n=e.scale;if(e.ticks&&Array.isArray(e.ticks))return e.ticks.map((t=>t.value));if(!(null===n||void 0===n?void 0:n.ticks))return n.domain();if("log"===e.scaleType)return fa({axisSettings:t,scale:n,scaleSize:i,viewportSize:s,scaleMeta:e});const r="number"===typeof e.ticks?e.ticks:t.estimatedTickCount,o=r?Math.round(s/r):ma.x+t.tickFontSize*ma.fontScaling;return null===n||void 0===n?void 0:n.ticks(ua(i,o))}function va(t,e,i,s){const n=e.scale;if(e.ticks&&Array.isArray(e.ticks))return e.ticks.map((t=>t.value));if(!(null===n||void 0===n?void 0:n.ticks))return n.domain();if("log"===e.scaleType)return fa({axisSettings:t,scale:n,scaleSize:i,viewportSize:s,scaleMeta:e});const r="number"===typeof e.ticks?e.ticks:t.estimatedTickCount,o=r?Math.round(s/r):ma.y+t.tickFontSize*ma.fontScaling;return null===n||void 0===n?void 0:n.ticks(ua(i,o))}const ya=new Ye,ma={x:4*yi.axis.x.tickFontSize,y:4*yi.axis.y.tickFontSize,fontScaling:4};function xa(t,e,i){const s=t.scale,n=Array.isArray(t.ticks)?t.ticks:void 0,r=(null===n||void 0===n?void 0:n.length)||-1,o=e/2/i.tickFontSize;return n?(t,e,i)=>({value:r>o&&0!==e&&e!==r-1&&e!==Math.floor(r/2)?"":n[e].label,pos:s(t)}):(t,e,i)=>({value:t,pos:s(t)})}function _a(t){const e=t.scale,i=Array.isArray(t.ticks)?t.ticks:void 0,s=(null===i||void 0===i?void 0:i.length)||-1;return i?(t,n,r)=>({value:r.length>s?"":i[n].label,pos:e(t)}):(t,i,s)=>({value:t,pos:e(t)})}const ba=(t,e,i,n,r,o)=>{let[a,l]=t;const h=e.scale.range(),c=Math.abs(h[1]-h[0]),d=o||(t=>t);return"horizontal"===n?function(t,e,i,n,r,o,a,l){const h=t.tickFontSize,c=t.titleFontSize,d=_a(e);let u=()=>ga(t,e,i,n).map(d).filter((t=>{let{pos:e}=t;return e>=0&&e<=n}));"timescale"===e.scaleType&&(u=()=>da(t,e.scale,n).map((t=>t)).map(d).filter((t=>{let{pos:e}=t;return e>=0&&e<=n})));const p=o?-6:10,f=o?"ideographic":"hanging";return{tickFontSize:h,titleFontSize:c,tickAccessor:u,tickPathTemplate:t=>{let{pos:e}=t;return`M${e} 0 v${o?-6:6}`},tickLabelTemplate:t=>{let{value:e,pos:i}=t;const n="tilt45"===l?`translate(${i+10} ${p}) rotate(45)`:`translate(${i} ${p})`,r="tilt45"!==l?"middle":void 0;return s.JW`<g transform="${n}"><text class="number" text-anchor="${(0,s.JR)(r)}" dominant-baseline="${f}">${a(e)}</text></g>`},axisLinePath:`M0,${o?-6:6} 0,0 H${n}v${o?-6:6}`,titleTransform:`translate(${n/2}, ${o?-r:r})`,titleBaseLine:o?"text-before-edge":"ideographic"}}(i.axis.x,e,c,a,l,r,d,i.axisStyle):function(t,e,i,n,r,o,a){const l=t.tickFontSize,h=t.titleFontSize,c=xa(e,i,t),d="vertical"===t.labelOrientation,u=d?"middle":o?"start":"end",p=o?10:-10,f=d?-90:0;return{tickFontSize:l,titleFontSize:h,tickAccessor:()=>va(t,e,i,r).map(c).filter((t=>{let{pos:e}=t;return e>=0&&e<=r})),tickPathTemplate:t=>{let{pos:e}=t;return`M0 ${e} ${o?6:-6} ${e}`},tickLabelTemplate:t=>{let{value:e,pos:i}=t;return s.JW`<text class="number" transform="translate(${p}, ${i}) rotate(${f})" text-anchor="${u}" dominant-baseline="middle">${a(e)}</text>`},axisLinePath:`M${o?6:-6}, ${r} H0V0H${o?6:-6}`,titleTransform:`translate(${o?n:-n}, ${r/2}) rotate(-90)`,titleBaseLine:o?"text-after-edge":"text-before-edge"}}(i.axis.y,e,c,a,l,r,d)};const wa=(t,e,i,n,r)=>{const o="vertical"===t?((t,e,i)=>{const n=`M${e?6:-6},0 H0 V${t} H${e?6:-6}`,r=`M0,0 V${t}`;return{dimensions:[t,6],translate:`translate(${e?0:6},0)`,axisPath:s.JW`<path d="${i?n:r}" stroke="currentColor" stroke-linecap="square" />`,tickPathTemplate:t=>{let{pos:i}=t;return s.JW`<path d="M0,${i} H${e?6:-6}" />`}}})(e,i,r):((t,e,i)=>{const n=`M0,${e?-6:6} V0 H${t} V${e?-6:6}`,r=`M0,0 H${t}`;return{dimensions:[6,t],translate:`translate(0,${e?6:0})`,axisPath:s.JW`<path d="${i?n:r}" stroke="currentColor" stroke-linecap="square" />`,tickPathTemplate:t=>{let{pos:i}=t;return s.JW`<path d="M${i},0 V${e?-6:6}" />`}}})(e,i,r);return s.qy`
        <svg height="${o.dimensions[0]}" width="${o.dimensions[1]}" class="ticks">
            <g fill="none" class="axis ticks ${t}-axis" transform="${o.translate}">
                ${o.axisPath}
                <g stroke="currentColor">${n.map(o.tickPathTemplate)}</g>
            </g>
        </svg>
    `};function Ma(t,e,i,s){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const r=s.filter((t=>{let{pos:i}=t;return i>0&&i<=e}));return wa(t,e,i,r,n)}const Sa=(t,e)=>{var i,s;const n=Ge(null!==(i=e.tickFontSize)&&void 0!==i?i:12);if("auto"===e.labelWidth){const i=(e.breakNewLine?t.split(/\r\n|\r|\n/):[t]).map((t=>ya.measureTextLength(t,n)));return Math.max(...i)}return null!==(s=e.labelWidth)&&void 0!==s?s:0},Ca=t=>{let{labelWidth:e,pos:i,labelGapMin:s,containerWidth:n}=t;const r=i+e/2,o=i-e/2;let a=i;r>n&&(a=i-(r-n)),o<0&&(a=i+Math.abs(o));const l=e/2+s/2;return{pos:a,left:a-l,right:a+l}},ka=(t,e,i)=>{t.dispatchEvent(new CustomEvent("label-clicked",{detail:{label:null!==i&&void 0!==i?i:e,scale:"horizontal"===t.orientation?t.scaleX:t.scaleY},bubbles:!0}))};const Ta=(t,e,i,n)=>{var r;const o=null!==(r=e.labelGapMin)&&void 0!==r?r:5;return t?function(t,e,i,n){return"vertical"!==(null===e||void 0===e?void 0:e.labelOrientation)?t=>t.map((t=>{let{value:e,pos:i,original:r}=t;return s.qy` <div
                        class="number"
                        style="transform: translateY(${i}px)"
                        @click="${()=>ka(n,e,r)}"
                    >
                        ${e}
                    </div>`})):n=>{let r;return n.map((n=>{let{value:o,pos:a}=n;const l=Sa(o,e),{pos:h,left:c,right:d}=Ca({labelWidth:l,pos:a,labelGapMin:i,containerWidth:t});return r&&r<=d?s.s6:(r=c,s.qy` <div
                class="number"
                style="transform: ${`translateY(calc(${h}px - 50%)) rotate(180deg)`}"
            >
                ${o}
            </div>`)}))}}(i,e,o,n):function(t,e,i,n){return r=>{let o;return r.map((r=>{let{value:a,pos:l,original:h}=r;const c=Sa(a,e),{pos:d,left:u,right:p}=Ca({labelWidth:c,pos:l,labelGapMin:i,containerWidth:t});return o&&o>=u?s.s6:(o=p,s.qy`
                <div class="number-wrapper" style="left: ${d}px">
                    <div class="number" @click="${()=>ka(n,a,h)}">${a}</div>
                </div>
            `)}))}}(i,e,o,n)};var $a,Aa=i(45901),Pa=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Oa=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},Ra=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};const Ea=Math.PI/4,Da={AXIS:s.Lb.color_secondary_5,TICK:s.Lb.color_secondary_5,LABEL:"black"};let Ia=$a=class extends(wi((0,o.ID)(s.OC))){constructor(){super(...arguments),this.orientation="horizontal",this.numberFormatter=(0,Aa.wC)(6),this.flip=!1,this._axisStyle="default",this._truncatedLabels=[],this._labelHeight=0,this._onMouseLeave=t=>{var e;const i=this.shadowRoot.querySelector(".axis-numbers");if(!i)return;const{left:s,top:n}=i.getBoundingClientRect();this._dispatch({event:t,orientation:this.orientation,dx:null,dy:null,mouseX:t.clientX-s,mouseY:t.clientY-n,type:"leave",scaleKey:null!==(e="horizontal"===this.orientation?this.scaleX:this.scaleY)&&void 0!==e?e:""})},this._onMouseMoveAndEnter=t=>{var e,i;const s=this.shadowRoot.querySelector(".axis-numbers");if(!s)return;const{left:n,top:r}=s.getBoundingClientRect(),o="horizontal"===this.orientation,a=t.clientX-n,l=t.clientY-r;let h,c;if("band"===(null===(e=this.scaleWithMeta)||void 0===e?void 0:e.scaleType))h=null,c=null;else{const t=this.scale;h=o?t.invert(a):null,c=o?null:t.invert(l)}const d={orientation:this.orientation,dx:h,dy:c,mouseX:a,mouseY:l,scaleKey:null!==(i="horizontal"===this.orientation?this.scaleX:this.scaleY)&&void 0!==i?i:""};this._dispatch(Object.assign({event:t,type:"mouseenter"===t.type?"enter":"move"},d))},this._spacePerLabel=(t,e)=>(t-$a.config.flipBufferAreaLength)/(e+2),this._truncateLabel=(t,e)=>{if(t.length>e){const i=t.length+3-e,s=t.length/2;return t.slice(0,s-i/2)+"..."+t.slice(s+i/2)}return t}}get isVertical(){return"vertical"===this.orientation}get scaleKey(){return this.isVertical?this.scaleY:this.scaleX}get scaleWithMeta(){var t;return null===(t=this.scaleMap)||void 0===t?void 0:t[this.scaleKey]}get scale(){var t;return null===(t=this.scaleWithMeta)||void 0===t?void 0:t.scale}get axisSettings(){var t,e;return this.isVertical?null===(t=this.settings)||void 0===t?void 0:t.axis.y:null===(e=this.settings)||void 0===e?void 0:e.axis.x}connectedCallback(){super.connectedCallback(),this.addEventListener("mousemove",this._onMouseMoveAndEnter),this.addEventListener("mouseenter",this._onMouseMoveAndEnter),this.addEventListener("mouseleave",this._onMouseLeave)}disconnectedCallback(){this.removeEventListener("mousemove",this._onMouseMoveAndEnter),this.removeEventListener("mouseenter",this._onMouseMoveAndEnter),this.removeEventListener("mouseleave",this._onMouseLeave),super.disconnectedCallback()}exportSVG(t){var e,i,n,r;if(!t||!this.scaleWithMeta||!this.settings||!this.axisSettings)return null;let o=this._scaleLabelFormatter(this.scaleWithMeta.scaleType);if(!o&&"timescale"===this.scaleWithMeta.scaleType){const i=this.scaleWithMeta.scale,[s,n]=i.domain(),[r,a]=t;let l;if("vertical"===this.orientation){const t=null!==(e=this.settings.axis.y.tickFontSize)&&void 0!==e?e:12,i=Math.floor(a/t);l=[...nr(s,n,Math.max(0,i-1))]}else l=da(this.settings.axis.x,i,r);const h=ha(l);o=ca(h)}return function(t,e,i,n,r,o){const{title:a,orientation:l,flip:h}=r,c=ba(t,e,i,l,h,o),d=c.tickAccessor(),u=d.map(c.tickPathTemplate).join(" ");return s.JW`
        <g class="axis-labels" stroke="none" fill=${n.label} font-size=${c.tickFontSize}>
        ${d.map(c.tickLabelTemplate)}
        </g>
        <g class="axis-ticks" stroke=${n.tick} fill="none">
            <path d="${c.axisLinePath}" fill="none" stroke="${n.axis}" />
            <path d="${u}" />
        </g>
        <g class="axis-title ${l}"
            fill=${n.label}
            transform="${c.titleTransform}">
            <text font-size='${c.titleFontSize}' text-anchor='middle' dominant-baseline='${c.titleBaseLine}'>${a}</text>
        </g>
    `}(t,this.scaleWithMeta,Object.assign(Object.assign({},this.settings),{axisStyle:this._axisStyle}),{axis:null!==(i=this.axisColor)&&void 0!==i?i:Da.AXIS,tick:null!==(n=this.tickColor)&&void 0!==n?n:Da.TICK,label:null!==(r=this.labelColor)&&void 0!==r?r:Da.LABEL},{title:this.label,orientation:this.orientation,flip:this.flip},o)}firstUpdated(t){super.firstUpdated(t),this._updateLabelsForAxis()}update(t){super.update(t),(t.has("size")||t.has("scaleMap")||t.has("scaleZoomMap"))&&this._updateLabelsForAxis(),t.has("_truncatedLabels")&&this._updateLabelRotationForAxis()}render(){var t,e,i;if(!this.scale||!this.size||!this.axisSettings)return;const[,n]=(0,s.Yh)(this.tagName.toLowerCase(),{horizontal:!this.isVertical,vertical:this.isVertical,[this._axisStyle]:!0,flip:this.flip,"vertical-labels":this.isVertical&&"vertical"===this.axisSettings.labelOrientation}),r={"--tick-font-size":this.axisSettings.tickFontSize+"px","--label-font-size":this.axisSettings.titleFontSize+"px","--axis-color":null!==(t=this.axisColor)&&void 0!==t?t:Da.AXIS,"--tick-color":null!==(e=this.tickColor)&&void 0!==e?e:Da.TICK,"--label-color":null!==(i=this.labelColor)&&void 0!==i?i:Da.LABEL,"--label-height":"tilt45"===this._axisStyle?this._labelHeight+"px":0,"--label-white-space":this.axisSettings.breakNewLine?"pre-line":"normal"};return this.axisSettings.labelWidth&&"auto"!==this.axisSettings.labelWidth&&(r["--label-width"]=this.axisSettings.labelWidth+"px"),s.qy` <div class="${n}" style=${(0,dt.wb)(r)}>
            ${this._renderAxis()}${this.renderLabel()}
        </div>`}renderLabel(){return this.label?s.qy`
            <label class="axis-label">
                <div class="axis-label-inner">${this.label}</div>
            </label>
        `:null}_scaleLabelFormatter(t){if("linear"===t)return this.numberFormatter}_renderAxis(){if(!this.size||!this.scaleWithMeta||!this.settings||!this.axisSettings)return;let t;if("band"===this.scaleWithMeta.scaleType||"timescale"===this.scaleWithMeta.scaleType)t=this._truncatedLabels.map((t=>{let[e,i]=t;return{value:e,pos:i}}));else{const e=((t,e,i,s)=>{const n="vertical"===t?e[1]:e[0];let r,o;if("vertical"===t){const t=i.scale.range(),e=Math.abs(t[0]-t[1]);r=xa(i,n,s.axis.y),o=va(s.axis.y,i,e,n)}else{const t=i.scale.range(),e=Math.abs(t[1]-t[0]);r=_a(i),o=ga(s.axis.x,i,e,n)}return o.map(r).filter((t=>{let{pos:e}=t;return e>=0&&e<=n}))})(this.orientation,this.size,this.scaleWithMeta,this.settings);t=e.map((t=>{let{value:e,pos:i}=t;return{value:this.numberFormatter(e),pos:i}}))}return function(t){let{axisElem:e,orientation:i,dimension:n,labels:r,flip:o,settings:a}=t;const l="vertical"===i,h=l?n[1]:n[0],c=Ta(l,a,h,e),d=s.qy`
        ${Ma("horizontal",h,o,r,a.includeEdgePseudoTicks)}
        <div class="axis-numbers horizontal">${c(r)}</div>
    `,u=s.qy`
        <div class="axis-numbers vertical">${c(r)}</div>
        <div class="tick-wrapper">
            ${Ma("vertical",h,o,r,a.includeEdgePseudoTicks)}
        </div>
    `;return l?u:d}({axisElem:this,orientation:this.orientation,dimension:this.size,labels:t,flip:this.flip,settings:this.axisSettings})}_updateLabelsForAxis(){const t=this.getScalesWithMeta();if(!this.size||!t||!this.settings)return;const[e,i]=t,[s,n]=this.size;"vertical"===this.orientation?"band"===i.scaleType?this._updateVerticalBandAxis(i,n):"timescale"===i.scaleType&&this._updateVerticalDateAxis(i,n):"horizontal"===this.orientation&&("band"===e.scaleType||"log"===e.scaleType&&!this.settings.axis.x.suppressLabelTilt?this._updateHorizontalBandAxis(e,s):"timescale"===e.scaleType&&this._updateHorizontalDateAxis(e,s))}_updateLabelRotationForAxis(){const t=this.getScalesWithMeta();if(!this.size||!t||!this.settings)return;const[e,i]=t,[s,n]=this.size;"vertical"===this.orientation?"band"===i.scaleType&&this._updateVerticalBandAxisTilt(n):"horizontal"===this.orientation&&("band"===e.scaleType||"log"===e.scaleType&&!this.settings.axis.x.suppressLabelTilt)&&this._updateHorizontalBandAxisTilt(s)}_updateHorizontalDateAxis(t,e){if(!this.settings)return;const i=da(this.settings.axis.x,t.scale,e),s=t.scale,n=ha(i),r=ca(n);this._truncatedLabels=i.map((t=>[r(t),s(t),t.toISOString()]))}_updateHorizontalBandAxis(t,e){const{width:i,height:s}=this.parentElement.getBoundingClientRect(),n=t.scale;let r,o;if("log"===t.scaleType)r=ga(this.settings.axis.x,t,e,i).map((t=>[this.numberFormatter(t),n(t),t])),o=r.filter((t=>{let[,e]=t;return e>=0&&e<=i}));else{if("band"!==t.scaleType)return;r=n.domain().map((t=>[t,n(t)])),o=r.filter((t=>{let[,i]=t;return i>0&&i<e}))}if(o&&o.length>0){this._maxLabelWidth=r.map((t=>{let[e]=t;var i;return[e,$a._textMeasurer.measureTextLength(e,Ge(null!==(i=this.settings.axis.x.tickFontSize)&&void 0!==i?i:12)),e]})).reduce(((t,e)=>t[1]>e[1]?t:e));const t=this._spacePerLabel(e,o.length);if(t<$a.config.hiddenThreshold-$a.config.hysteresisBuffer)this._truncatedLabels=[];else if(this._maxLabelWidth[1]>t){const t=Math.max(Math.round(s/20),10);this._truncatedLabels=this._truncateLabels(o,t)}else t>$a.config.tiltThreshold+$a.config.hysteresisBuffer&&(this._truncatedLabels=o)}}_updateVerticalDateAxis(t,e){var i,s;const n=t.scale,[r,o]=[n.invert(e),n.invert(0)],a=null!==(i=this.settings.axis.y.tickFontSize)&&void 0!==i?i:12,l=Math.floor(e/a),h=[...nr(r,o,Math.max(0,l-1))],c=ha(h),d=ca(c),u=h.map((t=>[d(t),n(t),t.toISOString()])),p=$a._textMeasurer.measureTextLength(c,Ge(null!==(s=this.settings.axis.x.tickFontSize)&&void 0!==s?s:12)),f=Math.max(Math.round(p/20),10);this._truncatedLabels=this._truncateLabels(u,f)}_updateVerticalBandAxis(t,e){var i;const s=t.scale,n=s.domain().map((t=>[t,s(t),t])).filter((t=>{let[,i]=t;return i>0&&i<e}));if(e/n.length<(null!==(i=this.settings.axis.y.tickFontSize)&&void 0!==i?i:12))this._truncatedLabels=[];else{const t=this.parentElement.getBoundingClientRect().width,e=Math.max(Math.round(t/20),10);this._truncatedLabels=this._truncateLabels(n,e)}}_updateHorizontalBandAxisTilt(t){var e;const i=this._truncatedLabels?this._truncatedLabels.length:0,s=this._spacePerLabel(t,i);if(s<$a.config.hiddenThreshold-$a.config.hysteresisBuffer)this._axisStyle="hidden",this._labelHeight=0;else if(this._maxLabelWidth&&this._maxLabelWidth[1]>s){if("tilt45"!==this._axisStyle){const{height:t}=this.parentElement.getBoundingClientRect(),i=Math.max(Math.round(t/20),10),s=$a._textMeasurer.measureTextLength(this._truncateLabels([this._maxLabelWidth],i)[0][0],Ge(null!==(e=this.settings.axis.x.tickFontSize)&&void 0!==e?e:12));this._axisStyle="tilt45",this._labelHeight=s*Math.cos(Ea)}}else s>$a.config.tiltThreshold+$a.config.hysteresisBuffer&&(this._axisStyle="default")}_updateVerticalBandAxisTilt(t){var e;t/this._truncatedLabels.length<(null!==(e=this.settings.axis.y.tickFontSize)&&void 0!==e?e:12)?this._axisStyle="hidden":this._axisStyle="default"}_truncateLabels(t,e){return t.map((t=>{let[i,s]=t;return[this._truncateLabel(i,e),s,i]}))}_dispatch(t){var{type:e}=t,i=Ra(t,["type"]);this.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:i}))}};Ia.config={hiddenThreshold:20,tiltThreshold:25,hysteresisBuffer:2,flipBufferAreaLength:150},Ia._textMeasurer=new Ye,Pa([(0,s.MZ)({reflect:!0}),Oa("design:type",String)],Ia.prototype,"orientation",void 0),Pa([(0,s.MZ)(),Oa("design:type",Object)],Ia.prototype,"label",void 0),Pa([(0,s.MZ)(),Oa("design:type",Object)],Ia.prototype,"numberFormatter",void 0),Pa([(0,s.MZ)(),Oa("design:type",Object)],Ia.prototype,"axisColor",void 0),Pa([(0,s.MZ)(),Oa("design:type",Object)],Ia.prototype,"labelColor",void 0),Pa([(0,s.MZ)(),Oa("design:type",Object)],Ia.prototype,"tickColor",void 0),Pa([(0,s.MZ)({type:Boolean,reflect:!1,converter:s.Bs}),Oa("design:type",Object)],Ia.prototype,"flip",void 0),Pa([(0,s.wk)(),Oa("design:type",String)],Ia.prototype,"_axisStyle",void 0),Pa([(0,s.wk)({hasChanged:H.O}),Oa("design:type",Array)],Ia.prototype,"_truncatedLabels",void 0),Ia=$a=Pa([(0,s.eV)({tagName:(0,g.o)("axis"),styles:t=>{const{root:e,is:i}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: 100%;
                height: 100%;
                user-select: none;
            }

            :host(:not([flip])) {
                align-items: flex-start;
            }

            :host([flip]) {
                align-items: flex-end;
            }

            :host([orientation='vertical'][flip]) {
                justify-content: left;
                align-items: initial;
            }

            :host([orientation='vertical']:not([flip])) {
                justify-content: right;
                align-items: initial;
            }

            ${e} {
                width: 100%;
                height: 100%;
                display: flex;
                color: var(--label-color);
                overflow: visible;
            }

            svg {
                width: 100%;
                overflow: visible;
            }

            ${i("vertical")} {
                width: auto;
                height: 100%;
                flex-direction: row;
            }

            ${i("vertical")} > * {
                flex-shrink: 0;
            }

            ${i("vertical")} svg {
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
            }

            ${i("horizontal")} {
                height: auto;
                width: 100%;
                flex-direction: column;
            }

            .axis-label {
                display: inline-block;
                font-size: var(--label-font-size);
                line-height: var(--label-font-size);
                text-align: center;
                position: relative;
            }

            .axis-label-inner {
                overflow: hidden;
                white-space: nowrap;
                text-overflow: ellipsis;
                position: absolute;
                inset: 0;
            }

            ${i("vertical")} .axis-label {
                order: 1;
                min-width: calc(var(--label-font-size, 16px) + 2px);

                writing-mode: vertical-rl;
                transform: rotate(180deg);
            }

            ${i("vertical","flip")} .axis-label {
                order: 3;
            }

            ${i("horizontal")} .axis-label {
                order: 3;
                min-height: calc(var(--label-font-size, 16px) + 2px);
            }

            ${i("horizontal","flip")} .axis-label {
                order: 1;
            }

            .tick-wrapper {
                height: 100%;
            }

            .ticks {
                color: var(--tick-color);
            }

            .axis > path {
                stroke: var(--axis-color);
            }

            ${i("vertical")} .tick-wrapper {
                position: relative;
                width: 6px;
                margin-right: 0.5px;
                order: 3;
            }

            ${i("vertical","flip")} .tick-wrapper {
                order: 1;
            }

            ${i("horizontal")} .ticks {
                margin-top: 0.5px;
            }

            ${i("horizontal","flip")} .ticks {
                order: 3;
            }

            ${i("vertical")} .axis-numbers {
                height: 100%;
                display: grid;
                grid-template-rows: 1fr;
                grid-template-columns: 1fr;
                margin-right: 2px;
                order: 2;
                transition: width 0.2s;
            }

            .number {
                font-size: var(--tick-font-size);
                white-space: var(--label-white-space);
                text-align: var(--label-text-align);
            }

            ${i("vertical")} .number {
                position: relative;
                top: calc(var(--tick-font-size) / -2);
                grid-area: 1 / 1;
                height: fit-content;
                text-align: right;
            }

            ${i("vertical","flip")} .number {
                text-align: left;
            }

            ${i("vertical","vertical-labels")} .number {
                top: 0;
                writing-mode: vertical-lr;
            }

            ${i("horizontal")} .axis-numbers {
                width: 100%;
                display: grid;
                grid-template-rows: 1fr;
                grid-template-columns: 1fr;
                transition: height 0.2s;
            }

            ${i("horizontal","flip")} .axis-numbers {
                order: 2;
            }

            ${i("horizontal")} .number {
                width: fit-content;
            }

            ${i("horizontal")} .number-wrapper {
                grid-area: 1 / 1;
                transform: translateX(-50%);
                width: var(--label-width, fit-content);
                height: fit-content;
                text-align: center;
                position: relative;
                transition: transform 0.2s;
            }

            ${i("tilt45")} .number-wrapper {
                transform: translateX(10px) translateY(0px) rotate(45deg);
                transform-origin: top left;
            }

            ${i("tilt45","flip")} .number-wrapper {
                top: 100%;
                transform: translateX(0px) translateY(-10px) rotate(-45deg);
            }

            ${i("tilt45")} .axis-numbers {
                height: calc(12px + var(--label-height, 0));
            }

            ${i("hidden","horizontal")} .axis-numbers {
                height: 0;
                overflow: hidden;
            }

            ${i("hidden","vertical")} .axis-numbers {
                width: 0;
                overflow: hidden;
            }
        `]},version:n.r})],Ia);const La=t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            ${e} {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                user-select: none;
            }
        `]},za=134217729;function ja(t,e,i,s,n){let r,o,a,l,h=e[0],c=s[0],d=0,u=0;c>h===c>-h?(r=h,h=e[++d]):(r=c,c=s[++u]);let p=0;if(d<t&&u<i)for(c>h===c>-h?(o=h+r,a=r-(o-h),h=e[++d]):(o=c+r,a=r-(o-c),c=s[++u]),r=o,0!==a&&(n[p++]=a);d<t&&u<i;)c>h===c>-h?(o=r+h,l=o-r,a=r-(o-l)+(h-l),h=e[++d]):(o=r+c,l=o-r,a=r-(o-l)+(c-l),c=s[++u]),r=o,0!==a&&(n[p++]=a);for(;d<t;)o=r+h,l=o-r,a=r-(o-l)+(h-l),h=e[++d],r=o,0!==a&&(n[p++]=a);for(;u<i;)o=r+c,l=o-r,a=r-(o-l)+(c-l),c=s[++u],r=o,0!==a&&(n[p++]=a);return 0===r&&0!==p||(n[p++]=r),p}function Ua(t){return new Float64Array(t)}const Ba=Ua(4),Na=Ua(8),Fa=Ua(12),Va=Ua(16),Ha=Ua(4);function Ga(t,e,i,s,n,r){const o=(e-r)*(i-n),a=(t-n)*(s-r),l=o-a,h=Math.abs(o+a);return Math.abs(l)>=33306690738754716e-32*h?l:-function(t,e,i,s,n,r,o){let a,l,h,c,d,u,p,f,g,v,y,m,x,_,b,w,M,S;const C=t-n,k=i-n,T=e-r,$=s-r;_=C*$,u=za*C,p=u-(u-C),f=C-p,u=za*$,g=u-(u-$),v=$-g,b=f*v-(_-p*g-f*g-p*v),w=T*k,u=za*T,p=u-(u-T),f=T-p,u=za*k,g=u-(u-k),v=k-g,M=f*v-(w-p*g-f*g-p*v),y=b-M,d=b-y,Ba[0]=b-(y+d)+(d-M),m=_+y,d=m-_,x=_-(m-d)+(y-d),y=x-w,d=x-y,Ba[1]=x-(y+d)+(d-w),S=m+y,d=S-m,Ba[2]=m-(S-d)+(y-d),Ba[3]=S;let A=function(t,e){let i=e[0];for(let s=1;s<t;s++)i+=e[s];return i}(4,Ba),P=22204460492503146e-32*o;if(A>=P||-A>=P)return A;if(d=t-C,a=t-(C+d)+(d-n),d=i-k,h=i-(k+d)+(d-n),d=e-T,l=e-(T+d)+(d-r),d=s-$,c=s-($+d)+(d-r),0===a&&0===l&&0===h&&0===c)return A;if(P=11093356479670487e-47*o+33306690738754706e-32*Math.abs(A),A+=C*c+$*a-(T*h+k*l),A>=P||-A>=P)return A;_=a*$,u=za*a,p=u-(u-a),f=a-p,u=za*$,g=u-(u-$),v=$-g,b=f*v-(_-p*g-f*g-p*v),w=l*k,u=za*l,p=u-(u-l),f=l-p,u=za*k,g=u-(u-k),v=k-g,M=f*v-(w-p*g-f*g-p*v),y=b-M,d=b-y,Ha[0]=b-(y+d)+(d-M),m=_+y,d=m-_,x=_-(m-d)+(y-d),y=x-w,d=x-y,Ha[1]=x-(y+d)+(d-w),S=m+y,d=S-m,Ha[2]=m-(S-d)+(y-d),Ha[3]=S;const O=ja(4,Ba,4,Ha,Na);_=C*c,u=za*C,p=u-(u-C),f=C-p,u=za*c,g=u-(u-c),v=c-g,b=f*v-(_-p*g-f*g-p*v),w=T*h,u=za*T,p=u-(u-T),f=T-p,u=za*h,g=u-(u-h),v=h-g,M=f*v-(w-p*g-f*g-p*v),y=b-M,d=b-y,Ha[0]=b-(y+d)+(d-M),m=_+y,d=m-_,x=_-(m-d)+(y-d),y=x-w,d=x-y,Ha[1]=x-(y+d)+(d-w),S=m+y,d=S-m,Ha[2]=m-(S-d)+(y-d),Ha[3]=S;const R=ja(O,Na,4,Ha,Fa);_=a*c,u=za*a,p=u-(u-a),f=a-p,u=za*c,g=u-(u-c),v=c-g,b=f*v-(_-p*g-f*g-p*v),w=l*h,u=za*l,p=u-(u-l),f=l-p,u=za*h,g=u-(u-h),v=h-g,M=f*v-(w-p*g-f*g-p*v),y=b-M,d=b-y,Ha[0]=b-(y+d)+(d-M),m=_+y,d=m-_,x=_-(m-d)+(y-d),y=x-w,d=x-y,Ha[1]=x-(y+d)+(d-w),S=m+y,d=S-m,Ha[2]=m-(S-d)+(y-d),Ha[3]=S;const E=ja(R,Fa,4,Ha,Va);return Va[E-1]}(t,e,i,s,n,r,h)}Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(8),Ua(8),Ua(8),Ua(4),Ua(8),Ua(8),Ua(8),Ua(12);Ua(192),Ua(192);Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(8),Ua(8),Ua(8),Ua(8),Ua(8),Ua(8),Ua(8),Ua(8),Ua(8),Ua(4),Ua(4),Ua(4),Ua(8),Ua(16),Ua(16),Ua(16),Ua(32),Ua(32),Ua(48),Ua(64);Ua(1152),Ua(1152);Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(4),Ua(24),Ua(24),Ua(24),Ua(24),Ua(24),Ua(24),Ua(24),Ua(24),Ua(24),Ua(24),Ua(1152),Ua(1152),Ua(1152),Ua(1152),Ua(1152),Ua(2304),Ua(2304),Ua(3456),Ua(5760),Ua(8),Ua(8),Ua(8),Ua(16),Ua(24),Ua(48),Ua(48),Ua(96),Ua(192),Ua(384),Ua(384),Ua(384),Ua(768);Ua(96),Ua(96),Ua(96),Ua(1152);const Ya=Math.pow(2,-52),Xa=new Uint32Array(512);class Wa{static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tl,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:el;const s=t.length,n=new Float64Array(2*s);for(let r=0;r<s;r++){const s=t[r];n[2*r]=e(s),n[2*r+1]=i(s)}return new Wa(n)}constructor(t){const e=t.length>>1;if(e>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:i,_hullTri:s,_hullHash:n}=this,r=t.length>>1;let o=1/0,a=1/0,l=-1/0,h=-1/0;for(let S=0;S<r;S++){const e=t[2*S],i=t[2*S+1];e<o&&(o=e),i<a&&(a=i),e>l&&(l=e),i>h&&(h=i),this._ids[S]=S}const c=(o+l)/2,d=(a+h)/2;let u,p,f;for(let S=0,C=1/0;S<r;S++){const e=qa(c,d,t[2*S],t[2*S+1]);e<C&&(u=S,C=e)}const g=t[2*u],v=t[2*u+1];for(let S=0,C=1/0;S<r;S++){if(S===u)continue;const e=qa(g,v,t[2*S],t[2*S+1]);e<C&&e>0&&(p=S,C=e)}let y=t[2*p],m=t[2*p+1],x=1/0;for(let S=0;S<r;S++){if(S===u||S===p)continue;const e=Ja(g,v,y,m,t[2*S],t[2*S+1]);e<x&&(f=S,x=e)}let _=t[2*f],b=t[2*f+1];if(x===1/0){for(let s=0;s<r;s++)this._dists[s]=t[2*s]-t[0]||t[2*s+1]-t[1];Ka(this._ids,this._dists,0,r-1);const e=new Uint32Array(r);let i=0;for(let t=0,s=-1/0;t<r;t++){const n=this._ids[t],r=this._dists[n];r>s&&(e[i++]=n,s=r)}return this.hull=e.subarray(0,i),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Ga(g,v,y,m,_,b)<0){const t=p,e=y,i=m;p=f,y=_,m=b,f=t,_=e,b=i}const w=function(t,e,i,s,n,r){const o=i-t,a=s-e,l=n-t,h=r-e,c=o*o+a*a,d=l*l+h*h,u=.5/(o*h-a*l);return{x:t+(h*c-a*d)*u,y:e+(o*d-l*c)*u}}(g,v,y,m,_,b);this._cx=w.x,this._cy=w.y;for(let S=0;S<r;S++)this._dists[S]=qa(t[2*S],t[2*S+1],w.x,w.y);Ka(this._ids,this._dists,0,r-1),this._hullStart=u;let M=3;i[u]=e[f]=p,i[p]=e[u]=f,i[f]=e[p]=u,s[u]=0,s[p]=1,s[f]=2,n.fill(-1),n[this._hashKey(g,v)]=u,n[this._hashKey(y,m)]=p,n[this._hashKey(_,b)]=f,this.trianglesLen=0,this._addTriangle(u,p,f,-1,-1,-1);for(let S,C,k=0;k<this._ids.length;k++){const r=this._ids[k],o=t[2*r],a=t[2*r+1];if(k>0&&Math.abs(o-S)<=Ya&&Math.abs(a-C)<=Ya)continue;if(S=o,C=a,r===u||r===p||r===f)continue;let l=0;for(let t=0,e=this._hashKey(o,a);t<this._hashSize&&(l=n[(e+t)%this._hashSize],-1===l||l===i[l]);t++);l=e[l];let h,c=l;for(;h=i[c],Ga(o,a,t[2*c],t[2*c+1],t[2*h],t[2*h+1])>=0;)if(c=h,c===l){c=-1;break}if(-1===c)continue;let d=this._addTriangle(c,r,i[c],-1,-1,s[c]);s[r]=this._legalize(d+2),s[c]=d,M++;let g=i[c];for(;h=i[g],Ga(o,a,t[2*g],t[2*g+1],t[2*h],t[2*h+1])<0;)d=this._addTriangle(g,r,h,s[r],-1,s[g]),s[r]=this._legalize(d+2),i[g]=g,M--,g=h;if(c===l)for(;h=e[c],Ga(o,a,t[2*h],t[2*h+1],t[2*c],t[2*c+1])<0;)d=this._addTriangle(h,r,c,-1,s[c],s[h]),this._legalize(d+2),s[h]=d,i[c]=c,M--,c=h;this._hullStart=e[r]=c,i[c]=e[g]=r,i[r]=g,n[this._hashKey(o,a)]=r,n[this._hashKey(t[2*c],t[2*c+1])]=c}this.hull=new Uint32Array(M);for(let S=0,C=this._hullStart;S<M;S++)this.hull[S]=C,C=i[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:i,coords:s}=this;let n=0,r=0;for(;;){const o=i[t],a=t-t%3;if(r=a+(t+2)%3,-1===o){if(0===n)break;t=Xa[--n];continue}const l=o-o%3,h=a+(t+1)%3,c=l+(o+2)%3,d=e[r],u=e[t],p=e[h],f=e[c];if(Za(s[2*d],s[2*d+1],s[2*u],s[2*u+1],s[2*p],s[2*p+1],s[2*f],s[2*f+1])){e[t]=f,e[o]=d;const s=i[c];if(-1===s){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,s),this._link(o,i[r]),this._link(r,c);const a=l+(o+1)%3;n<Xa.length&&(Xa[n++]=a)}else{if(0===n)break;t=Xa[--n]}}return r}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,i,s,n,r){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=i,this._link(o,s),this._link(o+1,n),this._link(o+2,r),this.trianglesLen+=3,o}}function qa(t,e,i,s){const n=t-i,r=e-s;return n*n+r*r}function Za(t,e,i,s,n,r,o,a){const l=t-o,h=e-a,c=i-o,d=s-a,u=n-o,p=r-a,f=c*c+d*d,g=u*u+p*p;return l*(d*g-f*p)-h*(c*g-f*u)+(l*l+h*h)*(c*p-d*u)<0}function Ja(t,e,i,s,n,r){const o=i-t,a=s-e,l=n-t,h=r-e,c=o*o+a*a,d=l*l+h*h,u=.5/(o*h-a*l),p=(h*c-a*d)*u,f=(o*d-l*c)*u;return p*p+f*f}function Ka(t,e,i,s){if(s-i<=20)for(let n=i+1;n<=s;n++){const s=t[n],r=e[s];let o=n-1;for(;o>=i&&e[t[o]]>r;)t[o+1]=t[o--];t[o+1]=s}else{let n=i+1,r=s;Qa(t,i+s>>1,n),e[t[i]]>e[t[s]]&&Qa(t,i,s),e[t[n]]>e[t[s]]&&Qa(t,n,s),e[t[i]]>e[t[n]]&&Qa(t,i,n);const o=t[n],a=e[o];for(;;){do{n++}while(e[t[n]]<a);do{r--}while(e[t[r]]>a);if(r<n)break;Qa(t,n,r)}t[i+1]=t[r],t[r]=o,s-n+1>=r-i?(Ka(t,e,n,s),Ka(t,e,i,r-1)):(Ka(t,e,i,r-1),Ka(t,e,n,s))}}function Qa(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function tl(t){return t[0]}function el(t){return t[1]}const il=1e-6;class sl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,i){const s=(t=+t)+(i=+i),n=e=+e;if(i<0)throw new Error("negative radius");null===this._x1?this._+=`M${s},${n}`:(Math.abs(this._x1-s)>il||Math.abs(this._y1-n)>il)&&(this._+="L"+s+","+n),i&&(this._+=`A${i},${i},0,1,1,${t-i},${e}A${i},${i},0,1,1,${this._x1=s},${this._y1=n}`)}rect(t,e,i,s){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+i}v${+s}h${-i}Z`}value(){return this._||null}}class nl{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class rl{constructor(t){let[e,i,s,n]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500];if(!((s=+s)>=(e=+e))||!((n=+n)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=s,this.xmin=e,this.ymax=n,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:i},vectors:s}=this;let n,r;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let f,g,v=0,y=0,m=i.length;v<m;v+=3,y+=2){const s=2*i[v],a=2*i[v+1],l=2*i[v+2],h=t[s],c=t[s+1],d=t[a],u=t[a+1],p=t[l],m=t[l+1],x=d-h,_=u-c,b=p-h,w=m-c,M=2*(x*w-_*b);if(Math.abs(M)<1e-9){if(void 0===n){n=r=0;for(const i of e)n+=t[2*i],r+=t[2*i+1];n/=e.length,r/=e.length}const i=1e9*Math.sign((n-h)*w-(r-c)*b);f=(h+p)/2-i*w,g=(c+m)/2+i*b}else{const t=1/M,e=x*x+_*_,i=b*b+w*w;f=h+(w*e-_*i)*t,g=c+(x*i-b*e)*t}o[y]=f,o[y+1]=g}let a,l,h,c=e[e.length-1],d=4*c,u=t[2*c],p=t[2*c+1];s.fill(0);for(let f=0;f<e.length;++f)c=e[f],a=d,l=u,h=p,d=4*c,u=t[2*c],p=t[2*c+1],s[a+2]=s[d]=h-p,s[a+3]=s[d+1]=u-l}render(t){const e=null==t?t=new sl:void 0,{delaunay:{halfedges:i,inedges:s,hull:n},circumcenters:r,vectors:o}=this;if(n.length<=1)return null;for(let h=0,c=i.length;h<c;++h){const e=i[h];if(e<h)continue;const s=2*Math.floor(h/3),n=2*Math.floor(e/3),o=r[s],a=r[s+1],l=r[n],c=r[n+1];this._renderSegment(o,a,l,c,t)}let a,l=n[n.length-1];for(let h=0;h<n.length;++h){a=l,l=n[h];const e=2*Math.floor(s[l]/3),i=r[e],c=r[e+1],d=4*a,u=this._project(i,c,o[d+2],o[d+3]);u&&this._renderSegment(i,c,u[0],u[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new sl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const i=null==e?e=new sl:void 0,s=this._clip(t);if(null===s||!s.length)return;e.moveTo(s[0],s[1]);let n=s.length;for(;s[0]===s[n-2]&&s[1]===s[n-1]&&n>1;)n-=2;for(let r=2;r<n;r+=2)s[r]===s[r-2]&&s[r+1]===s[r-1]||e.lineTo(s[r],s[r+1]);return e.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,i=t.length/2;e<i;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new nl;return this.renderCell(t,e),e.value()}_renderSegment(t,e,i,s,n){let r;const o=this._regioncode(t,e),a=this._regioncode(i,s);0===o&&0===a?(n.moveTo(t,e),n.lineTo(i,s)):(r=this._clipSegment(t,e,i,s,o,a))&&(n.moveTo(r[0],r[1]),n.lineTo(r[2],r[3]))}contains(t,e,i){return(e=+e)===e&&(i=+i)===i&&this.delaunay._step(t,e,i)===t}*neighbors(t){const e=this._clip(t);if(e)for(const i of this.delaunay.neighbors(t)){const t=this._clip(i);if(t)t:for(let s=0,n=e.length;s<n;s+=2)for(let r=0,o=t.length;r<o;r+=2)if(e[s]===t[r]&&e[s+1]===t[r+1]&&e[(s+2)%n]===t[(r+o-2)%o]&&e[(s+3)%n]===t[(r+o-1)%o]){yield i;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:i,halfedges:s,triangles:n}}=this,r=i[t];if(-1===r)return null;const o=[];let a=r;do{const i=Math.floor(a/3);if(o.push(e[2*i],e[2*i+1]),a=a%3===2?a-2:a+1,n[a]!==t)break;a=s[a]}while(a!==r&&-1!==a);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:i}=this,s=4*t;return this._simplify(i[s]||i[s+1]?this._clipInfinite(t,e,i[s],i[s+1],i[s+2],i[s+3]):this._clipFinite(t,e))}_clipFinite(t,e){const i=e.length;let s,n,r,o,a=null,l=e[i-2],h=e[i-1],c=this._regioncode(l,h),d=0;for(let u=0;u<i;u+=2)if(s=l,n=h,l=e[u],h=e[u+1],r=c,c=this._regioncode(l,h),0===r&&0===c)o=d,d=0,a?a.push(l,h):a=[l,h];else{let e,i,u,p,f;if(0===r){if(null===(e=this._clipSegment(s,n,l,h,r,c)))continue;[i,u,p,f]=e}else{if(null===(e=this._clipSegment(l,h,s,n,c,r)))continue;[p,f,i,u]=e,o=d,d=this._edgecode(i,u),o&&d&&this._edge(t,o,d,a,a.length),a?a.push(i,u):a=[i,u]}o=d,d=this._edgecode(p,f),o&&d&&this._edge(t,o,d,a,a.length),a?a.push(p,f):a=[p,f]}if(a)o=d,d=this._edgecode(a[0],a[1]),o&&d&&this._edge(t,o,d,a,a.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return a}_clipSegment(t,e,i,s,n,r){const o=n<r;for(o&&([t,e,i,s,n,r]=[i,s,t,e,r,n]);;){if(0===n&&0===r)return o?[i,s,t,e]:[t,e,i,s];if(n&r)return null;let a,l,h=n||r;8&h?(a=t+(i-t)*(this.ymax-e)/(s-e),l=this.ymax):4&h?(a=t+(i-t)*(this.ymin-e)/(s-e),l=this.ymin):2&h?(l=e+(s-e)*(this.xmax-t)/(i-t),a=this.xmax):(l=e+(s-e)*(this.xmin-t)/(i-t),a=this.xmin),n?(t=a,e=l,n=this._regioncode(t,e)):(i=a,s=l,r=this._regioncode(i,s))}}_clipInfinite(t,e,i,s,n,r){let o,a=Array.from(e);if((o=this._project(a[0],a[1],i,s))&&a.unshift(o[0],o[1]),(o=this._project(a[a.length-2],a[a.length-1],n,r))&&a.push(o[0],o[1]),a=this._clipFinite(t,a))for(let l,h=0,c=a.length,d=this._edgecode(a[c-2],a[c-1]);h<c;h+=2)l=d,d=this._edgecode(a[h],a[h+1]),l&&d&&(h=this._edge(t,l,d,a,h),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,e,i,s,n){for(;e!==i;){let i,r;switch(e){case 5:e=4;continue;case 4:e=6,i=this.xmax,r=this.ymin;break;case 6:e=2;continue;case 2:e=10,i=this.xmax,r=this.ymax;break;case 10:e=8;continue;case 8:e=9,i=this.xmin,r=this.ymax;break;case 9:e=1;continue;case 1:e=5,i=this.xmin,r=this.ymin}s[n]===i&&s[n+1]===r||!this.contains(t,i,r)||(s.splice(n,0,i,r),n+=2)}return n}_project(t,e,i,s){let n,r,o,a=1/0;if(s<0){if(e<=this.ymin)return null;(n=(this.ymin-e)/s)<a&&(o=this.ymin,r=t+(a=n)*i)}else if(s>0){if(e>=this.ymax)return null;(n=(this.ymax-e)/s)<a&&(o=this.ymax,r=t+(a=n)*i)}if(i>0){if(t>=this.xmax)return null;(n=(this.xmax-t)/i)<a&&(r=this.xmax,o=e+(a=n)*s)}else if(i<0){if(t<=this.xmin)return null;(n=(this.xmin-t)/i)<a&&(r=this.xmin,o=e+(a=n)*s)}return[r,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const i=(e+2)%t.length,s=(e+4)%t.length;(t[e]===t[i]&&t[i]===t[s]||t[e+1]===t[i+1]&&t[i+1]===t[s+1])&&(t.splice(i,2),e-=2)}t.length||(t=null)}return t}}const ol=2*Math.PI,al=Math.pow;function ll(t){return t[0]}function hl(t){return t[1]}function cl(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}class dl{static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ll,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hl,s=arguments.length>3?arguments[3]:void 0;return new dl("length"in t?function(t,e,i,s){const n=t.length,r=new Float64Array(2*n);for(let o=0;o<n;++o){const n=t[o];r[2*o]=e.call(s,n,o,t),r[2*o+1]=i.call(s,n,o,t)}return r}(t,e,i,s):Float64Array.from(function*(t,e,i,s){let n=0;for(const r of t)yield e.call(s,r,n,t),yield i.call(s,r,n,t),++n}(t,e,i,s)))}constructor(t){this._delaunator=new Wa(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:i}=t;for(let s=0;s<e.length;s+=3){const t=2*e[s],n=2*e[s+1],r=2*e[s+2];if((i[r]-i[t])*(i[n+1]-i[t+1])-(i[n]-i[t])*(i[r+1]-i[t+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,i)=>e[2*t]-e[2*i]||e[2*t+1]-e[2*i+1]));const t=this.collinear[0],i=this.collinear[this.collinear.length-1],s=[e[2*t],e[2*t+1],e[2*i],e[2*i+1]],n=1e-8*Math.hypot(s[3]-s[1],s[2]-s[0]);for(let r=0,o=e.length/2;r<o;++r){const t=cl(e[2*r],e[2*r+1],n);e[2*r]=t[0],e[2*r+1]=t[1]}this._delaunator=new Wa(e)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,n=this.triangles=this._delaunator.triangles,r=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let a=0,l=i.length;a<l;++a){const t=n[a%3===2?a-2:a+1];-1!==i[a]&&-1!==r[t]||(r[t]=a)}for(let a=0,l=s.length;a<l;++a)o[s[a]]=a;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],r[s[0]]=1,2===s.length&&(r[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(t){return new rl(this,t)}*neighbors(t){const{inedges:e,hull:i,_hullIndex:s,halfedges:n,triangles:r,collinear:o}=this;if(o){const e=o.indexOf(t);return e>0&&(yield o[e-1]),void(e<o.length-1&&(yield o[e+1]))}const a=e[t];if(-1===a)return;let l=a,h=-1;do{if(yield h=r[l],l=l%3===2?l-2:l+1,r[l]!==t)return;if(l=n[l],-1===l){const e=i[(s[t]+1)%i.length];return void(e!==h&&(yield e))}}while(l!==a)}find(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(e=+e)!==e)return-1;const s=i;let n;for(;(n=this._step(i,t,e))>=0&&n!==i&&n!==s;)i=n;return n}_step(t,e,i){const{inedges:s,hull:n,_hullIndex:r,halfedges:o,triangles:a,points:l}=this;if(-1===s[t]||!l.length)return(t+1)%(l.length>>1);let h=t,c=al(e-l[2*t],2)+al(i-l[2*t+1],2);const d=s[t];let u=d;do{let s=a[u];const d=al(e-l[2*s],2)+al(i-l[2*s+1],2);if(d<c&&(c=d,h=s),u=u%3===2?u-2:u+1,a[u]!==t)break;if(u=o[u],-1===u){if(u=n[(r[t]+1)%n.length],u!==s&&al(e-l[2*u],2)+al(i-l[2*u+1],2)<c)return u;break}}while(u!==d);return h}render(t){const e=null==t?t=new sl:void 0,{points:i,halfedges:s,triangles:n}=this;for(let r=0,o=s.length;r<o;++r){const e=s[r];if(e<r)continue;const o=2*n[r],a=2*n[e];t.moveTo(i[o],i[o+1]),t.lineTo(i[a],i[a+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"===typeof t.moveTo||(e=t,t=null),e=void 0==e?2:+e;const i=null==t?t=new sl:void 0,{points:s}=this;for(let n=0,r=s.length;n<r;n+=2){const i=s[n],r=s[n+1];t.moveTo(i+e,r),t.arc(i,r,e,0,ol)}return i&&i.value()}renderHull(t){const e=null==t?t=new sl:void 0,{hull:i,points:s}=this,n=2*i[0],r=i.length;t.moveTo(s[n],s[n+1]);for(let o=1;o<r;++o){const e=2*i[o];t.lineTo(s[e],s[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new nl;return this.renderHull(t),t.value()}renderTriangle(t,e){const i=null==e?e=new sl:void 0,{points:s,triangles:n}=this,r=2*n[t*=3],o=2*n[t+1],a=2*n[t+2];return e.moveTo(s[r],s[r+1]),e.lineTo(s[o],s[o+1]),e.lineTo(s[a],s[a+1]),e.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,i=t.length/3;e<i;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new nl;return this.renderTriangle(t,e),e.value()}}var ul=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},pl=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let fl=class extends((0,v.cm)((0,V.c)((0,o.ID)(s.OC)))){constructor(){super(),this.distanceThreshold=5,this.crosshair=!1,this._onClick=t=>{this._activePoint&&this.dispatchEvent(new CustomEvent("point-click",{bubbles:!0,detail:Object.assign({evt:t},this._getEventMetadata(this._activePoint))}))},this._onMouseMove=t=>{if(!this._delaunay||!this._allScales||!this._flatData||!this.interactionTarget||!this.allDataElements)return;const{left:e,top:i}=this.interactionTarget.getBoundingClientRect(),{clientX:s,clientY:n}=t,r=s-e,o=n-i,a=this._delaunay.find(r,o),l=this._flatData[a];if(!l)return;const[h,c]=this._findScalesForPoint(a),{x:d,y:u}=l,p=h(d)-r,f=c(u)-o;Math.sqrt(p**2+f**2)<this.distanceThreshold?this._activePoint!==a&&(this._activePoint=a,this.dispatchEvent(new CustomEvent("point-hover",{detail:Object.assign(Object.assign({},this._getEventMetadata(a)),{clientX:s,clientY:n}),bubbles:!0}))):(void 0!==this._activePoint&&this.dispatchEvent(new CustomEvent("point-hover-end",{bubbles:!0})),this._activePoint=void 0),this.crosshair&&(this._mouse=[r,o],this.requestUpdate())},this._onMouseLeave=()=>{void 0!==this._activePoint&&this.dispatchEvent(new CustomEvent("point-hover-end",{bubbles:!0})),this._activePoint=void 0},this._onMouseMove=this._onMouseMove.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._shouldIncludeElement=this._shouldIncludeElement.bind(this)}disconnectedCallback(){var t,e,i;super.disconnectedCallback(),null===(t=this.interactionTarget)||void 0===t||t.removeEventListener("mousemove",this._onMouseMove),null===(e=this.interactionTarget)||void 0===e||e.removeEventListener("mouseleave",this._onMouseLeave),null===(i=this.interactionTarget)||void 0===i||i.removeEventListener("click",this._onClick)}firstUpdated(t){var e,i,s;null===(e=this.interactionTarget)||void 0===e||e.addEventListener("mousemove",this._onMouseMove),null===(i=this.interactionTarget)||void 0===i||i.addEventListener("mouseleave",this._onMouseLeave),null===(s=this.interactionTarget)||void 0===s||s.addEventListener("click",this._onClick)}willUpdate(t){if(super.willUpdate(t),(t.has("allDataElements")||t.has("scaleMap"))&&this.allDataElements&&this.viewbox){const t=this.allDataElements.filter(this._shouldIncludeElement).map((t=>t.plotData)),e=this.allDataElements.filter(this._shouldIncludeElement).map((t=>t.getScales()));if(e.some((t=>t))){const{dataIndex:i,flatData:s}=(t=>({dataIndex:t.reduce(((t,e)=>{var i;const s=null!==(i=t.slice(-1)[0])&&void 0!==i?i:0;return[...t,s+e.length]}),[]),flatData:t.flat(1)}))(t);this._dataIndex=i,this._flatData=s,this._allScales=e,this._delaunay=dl.from(s,((t,e)=>{var i,s;const n=null===(i=this._findScalesForPoint(e))||void 0===i?void 0:i[0];return null!==(s=null===n||void 0===n?void 0:n(t.x))&&void 0!==s?s:null}),((t,e)=>{var i,s;const n=null===(i=this._findScalesForPoint(e))||void 0===i?void 0:i[1];return null!==(s=null===n||void 0===n?void 0:n(t.y))&&void 0!==s?s:null}))}}}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return s.qy`<div class="${t}">${this.renderCrosshair()}</div> `}renderCrosshair(){if(!this.crosshair||!this._allScales||!this.size||!this._mouse)return null;const[t,e]=this.size,[i,n]=this._mouse,r=`M0 ${n} H${t} M${i} 0 V${e}`;return s.qy` <svg width=${t} height=${e}>
            <path stroke-dasharray="4 4" stroke="black" d=${r} opacity="0.2" />
            <circle cx=${i} cy=${n} r=${this.distanceThreshold} opacity="0.1" />
        </svg>`}_shouldIncludeElement(t){return t.includeInDomain&&t.slot===this.interactionTargetSlot}_findScalesForPoint(t){if(!this._allScales||!this._dataIndex)return null;const e=this._dataIndex.findIndex((e=>e>t));return this._allScales[e]}_getEventMetadata(t){if(!this.allDataElements)return null;const e=this._dataIndex.findIndex((e=>e>t)),i=[e,this._dataIndex[e]-t];return{closestPoint:this._flatData[t],path:i,target:this.allDataElements.filter(this._shouldIncludeElement)[e]}}};ul([(0,s.MZ)(),pl("design:type",Object)],fl.prototype,"distanceThreshold",void 0),ul([(0,s.MZ)(),pl("design:type",Object)],fl.prototype,"crosshair",void 0),fl=ul([(0,s.eV)({tagName:(0,g.o)("delaunay"),styles:La,version:n.r}),pl("design:paramtypes",[])],fl);var gl=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},vl=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let yl=class extends((0,v.cm)((0,V.c)((0,o.ID)(s.OC)))){constructor(){super(),this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this)}disconnectedCallback(){var t,e;super.disconnectedCallback(),null===(t=this.interactionTarget)||void 0===t||t.removeEventListener("mousedown",this._handleMouseDown),null===(e=this.interactionTarget)||void 0===e||e.removeEventListener("mouseup",this._handleMouseUp)}firstUpdated(t){var e,i;null===(e=this.interactionTarget)||void 0===e||e.addEventListener("mousedown",this._handleMouseDown),null===(i=this.interactionTarget)||void 0===i||i.addEventListener("mouseup",this._handleMouseUp)}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return s.qy`<div class="${t}"></div> `}_handleMouseDown(t){this._clickState={x:t.clientX,y:t.clientY}}_handleMouseUp(t){if(!this._clickState)return;const{x:e,y:i}=this._clickState,s=t.clientX-e,n=t.clientY-i;Math.abs(s+n)<.01&&this._dispatchStationaryClick(),this._clickState=void 0}_dispatchStationaryClick(){this.dispatchEvent(new CustomEvent("stationary-click"))}};yl=gl([(0,s.eV)({tagName:(0,g.o)("gesture-interaction"),styles:La,version:n.r}),vl("design:paramtypes",[])],yl);var ml=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},xl=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let _l=class extends((0,v.cm)((0,V.c)((0,o.ID)(s.OC)))){constructor(){super()}disconnectedCallback(){super.disconnectedCallback()}firstUpdated(t){}willUpdate(t){super.willUpdate(t),t.has("allDataElements")&&this.allDataElements&&(this._lineElements=this.allDataElements.filter((t=>t.includeInDomain&&t.slot===this.interactionTargetSlot)).filter((t=>t.tagName.endsWith("SVG-LINE"))))}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.scaleMap)return;const[e,i]=this.size;return s.qy`<svg width=${e} height=${i} class="${t}">${this._renderLineTargets()}</svg> `}_renderLineTargets(){return this._lineElements?this._lineElements.filter((t=>!t.interactable)).map((t=>{const e=t.getPath();return s.JW`
        <path d=${e} class="hover-target" fill="none" @mousedown="${t=>t.stopPropagation()}" @click=${e=>this._dispatchClick(e,t)} @mouseenter=${e=>this._dispatchHover(e,t)} @mouseleave=${this._dispatchHoverEnd} stroke=${t.color} stroke-width="8" />
        `})):null}_dispatchClick(t,e){(0,Zt.hh)(this,e.getScalesWithMeta(),t,e)}_dispatchHover(t,e){(0,Zt.jd)(this,e.getScalesWithMeta(),t,e)}_dispatchHoverEnd(t){(0,Zt.o6)(this,t)}};_l=ml([(0,s.eV)({tagName:(0,g.o)("line-interaction"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
                pointer-events: none;
                transition:
                    fill 0.4s,
                    stroke-width 0.4s,
                    opacity 0.4s,
                    r 0.4s;
            }

            :host {
                display: block;
                width: 100%;
                height: 100%;
            }

            ${e} {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            svg {
                display: block;
                width: 100%;
                height: 100%;
            }

            .hover-target {
                opacity: 0;
                pointer-events: initial;
                cursor: default;
            }
            .hover-target:hover {
                /*opacity: initial;*/
            }
        `]},version:n.r}),xl("design:paramtypes",[])],_l);var bl=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let wl=class extends((0,o.ID)((0,y.OP)(s.OC))){constructor(){super(...arguments),this.zoomStrategy=y.PS.MultiAxis}};wl=bl([(0,s.eV)({tagName:(0,g.o)("multi-axis-zoom-and-pan"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: 100%;
                height: 100%;
                overflow: visible;
            }

            ${e} {
                width: 100%;
                height: 100%;
                overflow: visible;
            }
        `]},version:n.r})],wl);var Ml=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Sl=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Cl=class extends((0,v.cm)((0,o.ID)(s.OC))){constructor(){super(),this._clicking=!1,this._initialPoint=void 0,this._currentPoint=void 0,this._currentRect=void 0,this.scaleX="zoomX",this.scaleY="zoomY",this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.sendZoomClear=this.sendZoomClear.bind(this)}disconnectedCallback(){var t,e;super.disconnectedCallback(),null===(t=this.interactionTarget)||void 0===t||t.removeEventListener("mousedown",this.onMouseDown),null===(e=this.interactionTarget)||void 0===e||e.removeEventListener("dblclick",this.sendZoomClear)}outerEvent(t){"mousedown"===t.type?this.onMouseDown(t):"dblclick"===t.type&&this.sendZoomClear()}firstUpdated(t){var e,i;null===(e=this.interactionTarget)||void 0===e||e.addEventListener("mousedown",this.onMouseDown),null===(i=this.interactionTarget)||void 0===i||i.addEventListener("dblclick",this.sendZoomClear)}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return s.qy`<div class="${t}">${this.renderRect()}</div> `}renderRect(){if(!this._currentRect||!this.interactionTarget)return null;const{left:t,top:e,right:i,bottom:n}=this._currentRect;return s.JW`
          <svg style="width: 100%; height: 100%">
            <rect stroke="black" fill="#888" opacity="0.2" x="${t}" y="${e}" width="${i-t}" height="${n-e}">
          </svg>
      `}onMouseDown(t){if(!this.interactionTarget)return;t.preventDefault(),this._clicking=!0;const{left:e,top:i}=this.interactionTarget.getBoundingClientRect();this._initialPoint={x:t.clientX-e,y:t.clientY-i},window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}onMouseMove(t){if(!this._clicking||!this.interactionTarget||!this._initialPoint)return;const e=this.interactionTarget.getBoundingClientRect(),i={left:0,top:0,right:e.width,bottom:e.height};this._currentPoint={x:t.clientX-e.left,y:t.clientY-e.top},this._currentRect=((t,e)=>({left:Math.max(t.left,e.left),top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom)}))(((t,e)=>{const{x:i,y:s}=t,{x:n,y:r}=e,o=Math.min(i,n),a=Math.min(s,r);return{left:o,top:a,right:o+Math.abs(n-i),bottom:a+Math.abs(r-s)}})(this._initialPoint,this._currentPoint),i),this.requestUpdate()}onMouseUp(){if(this._clicking&&this._currentRect){const[t,e]=this.getScales(),{left:i,right:s,top:n,bottom:r}=this._currentRect,o={x:[t.invert(i),t.invert(s)],y:[e.invert(r),e.invert(n)]};if(o.x[1]-o.x[0]>0&&o.y[1]-o.y[0]>0){const t={x:1/Math.abs(o.x[1]-o.x[0]),y:1/Math.abs(o.y[1]-o.y[0])};this.dispatchEvent(new CustomEvent("zoom",{detail:{viewbox:o,zoom:t},bubbles:!0}))}}this._clicking=!1,this._initialPoint=void 0,this._currentPoint=void 0,this._currentRect=void 0,this.requestUpdate(),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}sendZoomClear(){this.dispatchEvent(new CustomEvent("zoom-clear",{bubbles:!0}))}};Cl=Ml([(0,s.eV)({tagName:(0,g.o)("zoom"),styles:La,version:n.r}),Sl("design:paramtypes",[])],Cl);var kl=i(33331);function Tl(t,e,i){var s=null,n=_t(!0),r=null,o=wt,a=null,l=At(h);function h(h){var c,d,u,p,f,g=(h=xt(h)).length,v=!1,y=new Array(g),m=new Array(g);for(null==r&&(a=o(f=l())),c=0;c<=g;++c){if(!(c<g&&n(p=h[c],c,h))===v)if(v=!v)d=c,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),u=c-1;u>=d;--u)a.point(y[u],m[u]);a.lineEnd(),a.areaEnd()}v&&(y[c]=+t(p,c,h),m[c]=+e(p,c,h),a.point(s?+s(p,c,h):y[c],i?+i(p,c,h):m[c]))}if(f)return a=null,f+""||null}function c(){return Rt().defined(n).curve(o).context(r)}return t="function"===typeof t?t:void 0===t?Pt:_t(+t),e="function"===typeof e?e:_t(void 0===e?0:+e),i="function"===typeof i?i:void 0===i?Ot:_t(+i),h.x=function(e){return arguments.length?(t="function"===typeof e?e:_t(+e),s=null,h):t},h.x0=function(e){return arguments.length?(t="function"===typeof e?e:_t(+e),h):t},h.x1=function(t){return arguments.length?(s=null==t?null:"function"===typeof t?t:_t(+t),h):s},h.y=function(t){return arguments.length?(e="function"===typeof t?t:_t(+t),i=null,h):e},h.y0=function(t){return arguments.length?(e="function"===typeof t?t:_t(+t),h):e},h.y1=function(t){return arguments.length?(i=null==t?null:"function"===typeof t?t:_t(+t),h):i},h.lineX0=h.lineY0=function(){return c().x(t).y(e)},h.lineY1=function(){return c().x(t).y(i)},h.lineX1=function(){return c().x(s).y(e)},h.defined=function(t){return arguments.length?(n="function"===typeof t?t:_t(!!t),h):n},h.curve=function(t){return arguments.length?(o=t,null!=r&&(a=o(r)),h):o},h.context=function(t){return arguments.length?(null==t?r=a=null:a=o(r=t),h):r},h}var $l=i(38903),Al=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Pl=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Ol=class extends(he(It(ft))){constructor(){var t;super(...arguments),t=this,this.areaType="below",this.interpolation="straight",this.orientation="horizontal",this._renderInner=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:`var(--plot-opacity, ${t.opacity})`,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`var(--plot-fill, ${t.color})`,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"var(--plot-stroke, none)";const r=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const o=t._getDefaultStyle({index:r},{fillColor:i,strokeColor:n,strokeWidth:1});return s.JW`
                    <g                   
                    fill-opacity="${o.fillOpacity||e}"
                    fill="${o.fillColor}"
                    stroke-opacity="${o.strokeOpacity||e}"
                    stroke-width="${o.strokeWidth}"
                    stroke="${o.strokeColor}"
                >
                    ${t._renderArea(t.size,t.getScales(),r)}
                </g>
    `};return t.data.every((t=>Array.isArray(t)))?t.data.map(((t,e)=>r(e))):r()}}exportSVG(){return this.size&&this.getScales()?this._renderInner(this.style.getPropertyValue("--plot-opacity")||this.opacity,this.style.getPropertyValue("--plot-fill")||this.color,this.style.getPropertyValue("--plot-stroke")||"none"):""}getDomain2D(){var t;return $(null===(t=this.accessor)||void 0===t?void 0:t.call(this,this.data).flatMap((t=>{let{x:e,y:i,y1:s}=t;return[{x:e,y:i},{x:e,y:s}]})))}getDomainY(){var t;return P(null===(t=this.accessor)||void 0===t?void 0:t.call(this,this.data).flatMap((t=>{let{y:e,y1:i}=t;return[e,i]})).filter(l))}_invalidateCanvas(t){return window.console.error(`support for canvas not yet implemented, context: ${t}`),null}_invalidateGl(t){return window.console.error(`support for webgl not yet implemented, context: ${t}`),null}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales())return;const[e,i]=this.size;return s.qy` <svg width=${e} height=${i} class="${t}">${this._renderInner()}</svg> `}_renderArea(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const n=-1!==i?this.filteredData[i]:this.filteredData,r=e.map((t=>e=>J(t(e)))),o=Xt[this.interpolation];if("below"===this.areaType){const e=this._renderBelow(t,r,o,n);return s.JW`<path d=${e} />`}if("above"===this.areaType){const e=this._renderAbove(t,r,o,n);return s.JW`<path d=${e} />`}if("enclosed"===this.areaType){const e=this._renderEnclosed(t,r,o,n);return s.JW`<path d=${e} />`}if("inverted"===this.areaType){const[e,i]=this._renderInverted(t,r,o,n);return s.JW`
                <path d=${e} />
                <path d=${i} />
            `}return null}_renderBelow(t,e,i,s){let[n,r]=t;const[o,a]=e;if("horizontal"===this.orientation){if(Wt(s)){const[t]=s;return`M 0 ${a(t.y)} H ${n} V ${r} H 0 Z`}return this._getArea(e,i,s,(()=>r))}if(qt(s)){const[t]=s;return`M ${o(t.x)} 0 V ${r} H 0 V 0 Z`}return this._getAreaVertical(e,i,s,(()=>0))}_renderAbove(t,e,i,s){let[n,r]=t;const[o,a]=e;if("horizontal"===this.orientation){if(Wt(s)){const[t]=s;return`M 0 ${a(t.y)} H ${n} V 0 H 0 Z`}return this._getArea(e,i,s,(()=>0))}if(qt(s)){const[t]=s;return`M ${o(t.x)} 0 V ${r} H ${n} V 0 Z`}return this._getAreaVertical(e,i,s,(()=>n))}_renderEnclosed(t,e,i,s){let[n,r]=t;const[o,a]=e;if("horizontal"===this.orientation){if(Wt(s)){const[t]=s;return`M 0 ${a(t.y)} H ${n} v ${a(t.y1)-a(t.y)} H 0 Z`}return this._getArea(e,i,s,(t=>a(t.y1)))}if(qt(s)){const[t]=s;return`M ${o(t.x)} 0 V ${r} H ${o(t.x1)} V 0 Z`}return this._getAreaVertical(e,i,s,(t=>o(t.x1)))}_renderInverted(t,e,i,s){const n="horizontal"===this.orientation?s.map((t=>({x:t.x,y:t.y1}))):s.map((t=>({x:t.x1,y:t.y})));return[this._renderBelow(t,e,i,s),this._renderAbove(t,e,i,n)]}_getArea(t,e,i,s){let[n,r]=t;const o=Tl();return o.x((t=>n(t.x))),o.y0((t=>r(t.y))),o.curve(e),o.y1(s),o(i.filter(u))}_getAreaVertical(t,e,i,s){let[n,r]=t;const o=Tl();return o.y((t=>r(t.y))),o.x0((t=>n(t.x))),o.curve(e),o.x1(s),o(i.filter(u))}};Al([(0,s.MZ)({type:$l.default,reflect:!1,attribute:"area-type"}),Pl("design:type",$l.default)],Ol.prototype,"areaType",void 0),Al([(0,s.MZ)({type:$l.default,reflect:!1}),Pl("design:type",$l.default)],Ol.prototype,"interpolation",void 0),Al([(0,s.MZ)({type:$l.default,reflect:!1}),Pl("design:type",$l.default)],Ol.prototype,"orientation",void 0),Ol=Al([(0,s.eV)({tagName:(0,g.o)("svg-area"),styles:K,version:n.r})],Ol);var Rl=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},El=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Dl=class extends((0,o.ID)(s.OC)){constructor(){super(...arguments),this.position=void 0,this.full=!1,this._renderPath=t=>s.JW`
                    <path
                    d="${t}"
                    fill="none"
                    stroke="var(--plot-stroke, red)"
                    stroke-dasharray="var(--plot-stroke-dasharray, 3 3)"
                />
    `}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales()||!this.position)return;const[e,i]=this.size,[n,r]=this.getScales(),o=(a=this.position.x,J(n(a)));var a;const l=(t=>J(r(t)))(this.position.y),h=this.full?this._renderPath(`M ${o} 0 V ${l} H ${e}`):null;return s.qy`
            <svg width=${e} height=${i} class="${t}">
                ${h} ${this._renderPath(`M 0 ${l} H ${o} V ${i}`)}
            </svg>
        `}};Rl([(0,s.MZ)(),El("design:type",Object)],Dl.prototype,"position",void 0),Rl([(0,s.MZ)({type:Boolean,converter:s.Bs}),El("design:type",Object)],Dl.prototype,"full",void 0),Dl=Rl([(0,s.eV)({tagName:(0,g.o)("svg-crosshair"),styles:K,version:n.r})],Dl);var Il=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ll=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const zl=(t,e)=>{const i=[];if(e<=0)return i;const s=Math.ceil(1/e);for(let n=0;n<t.length;n++)n%s===0&&i.push(t[n]);return i};let jl=class extends(wi(q((0,o.ID)(s.OC)))){constructor(){super(...arguments),this.grid="default",this.origin="default",this.densityX=void 0,this.densityY=void 0,this.color=s.Lb.color_secondary_2,this.originColor=s.Lb.color_secondary_5}exportSVG(){return this.renderGrid()}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales()||!this.settings)return;const[e,i]=this.size;return s.qy` <svg width=${e} height=${i} class="${t}">${this.renderGrid()}</svg> `}renderGrid(){if(!this.size||!this.getScales()||!this.settings)return;const[t,e]=this.size,[i,n]=this.getScalesWithMeta(),r=i.scale,o=n.scale,[a,l]=this.getGridTicks(this.size,i,n,this.settings),h=a.map((t=>`M${r(t)},0 V${e}`)).join(" "),c=l.map((e=>`M0,${o(e)} H${t}`)).join(" "),d=r(0),u=o(0),p=(d&&"vertical"!==this.origin?`M${d},0 V${e} `:"")+(u&&"horizontal"!==this.origin?`M0,${u} H${t}`:""),f=p&&"off"!==this.origin?s.JW`<path d="${p}" stroke="${this.originColor}" class="origin-grid" />`:null,g="vertical"===this.grid||"default"===this.grid?s.JW`<path d="${h}" />`:null,v="horizontal"===this.grid||"default"===this.grid?s.JW`<path d="${c}" />`:null;return s.JW`
            <g stroke="${this.color}">
                ${g}
                ${v}
                ${f}
            </g>
        `}getGridTicks(t,e,i,s){const[n,r]=t,o=e.scale.range(),a=Math.abs(o[1]-o[0]);let l="timescale"===e.scaleType?da(s.axis.x,e.scale,n):ga(s.axis.x,e,n,n);null!=this.densityX&&(l=zl(ga(s.axis.x,e,a,n),this.densityX));let h=[];if(null!=this.densityY){const t=i.scale.range(),e=Math.abs(t[0]-t[1]);h=zl(va(s.axis.y,i,e,r),this.densityY)}else h=va(s.axis.y,i,r,r);return[l,h]}};Il([(0,s.MZ)({type:String,reflect:!1,attribute:"grid"}),Ll("design:type",String)],jl.prototype,"grid",void 0),Il([(0,s.MZ)({type:String,reflect:!1,attribute:"origin"}),Ll("design:type",String)],jl.prototype,"origin",void 0),Il([(0,s.MZ)({type:Number,reflect:!1}),Ll("design:type",Object)],jl.prototype,"densityX",void 0),Il([(0,s.MZ)({type:Number,reflect:!1}),Ll("design:type",Object)],jl.prototype,"densityY",void 0),Il([(0,s.MZ)(),Ll("design:type",Object)],jl.prototype,"color",void 0),Il([(0,s.MZ)(),Ll("design:type",Object)],jl.prototype,"originColor",void 0),jl=Il([(0,s.eV)({tagName:(0,g.o)("svg-grid"),styles:K,version:n.r})],jl);var Ul=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Bl=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Nl=class extends ft{constructor(){super(...arguments),this.bidirectional=!1,this.hoverRadius=9,this.hoverColor="black",this.hoverOpacity=.2,this._hoverIndex=-1,this.yVals=()=>this.accessor(this.data).flatMap((t=>{let{y:e,y1:i}=t;return"string"!==typeof e&&i&&i!==e?[e,i]:[e]})),this.xVals=()=>this.accessor(this.data).flatMap((t=>{let{x:e,x1:i}=t;return"string"!==typeof e&&i&&i!==e?[e,i]:[e]})),this._render=(t,e,i,n)=>s.JW`${this.data.map(((r,o)=>{const a=this._getDefaultStyle({index:o},{fillColor:"none",fillOpacity:1,strokeColor:"black",strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"}),l=this.bidirectional?this._renderUse(t,"2",o,a,(t=>({x:void 0!==t.x1?t.x1:t.x,y:t.y})),n):null,h=this._isInteractable(o);return s.JW`
                    <defs>
                        ${this._renderWhiskers(t,o,e,i,r,h)}
                    </defs>
                    <g id="whiskers-group-${o}"
                            stroke=${a.strokeColor}
                            stroke-width=${a.strokeWidth}
                            stroke-opacity=${a.strokeOpacity}
                            stroke-dasharray=${a.strokeDashArray}
                    >
                        ${this._renderUse(t,"1",o,a,(t=>({x:t.x,y:void 0!==t.y1?t.y1:t.y})),n)}
                        <use href="#whisk-p-${o}" class="${t}-line"></use>
                        ${l}
                    </g>
                `}))}
        `,this._renderUse=(t,e,i,n,r,o)=>{var a,l,h;const c=this._isHighlight(e,i)?" highlight":"",d=!o&&s.JW`
            <use href="#whisk-p${e}-${i}" class="${t}-hover-target${c}"
                stroke-width="${null!==(a=this.hoverRadius)&&void 0!==a?a:9}"
                stroke="${null!==(l=this.hoverColor)&&void 0!==l?l:"black"}"
                stroke-opacity="${null!==(h=this.hoverOpacity)&&void 0!==h?h:.2}"
                @click=${t=>this._dispatchClick(t,i,r)}
                @mouseenter=${t=>this._dispatchHover(t,i,r)}
                @mouseleave=${t=>this._dispatchHoverEnd(t,i,r)}                           
            ></use>
        `||void 0;return s.JW`
            <use href="#whisk-p${e}-${i}" 
            class="${t}-target"
            style=${this._generateStyle({index:i},n)}></use>
            ${d}
        `},this._findWhiskerSize=t=>{let e=20;if(t.bandwidth){const i=t.bandwidth();i<2*e&&(e=i/2)}return e},this._line=(t,e,i,n,r)=>{let{x1:o,x2:a,y1:l,y2:h}=n;return s.JW`<path 
                id="${e}${i}"
                class="${t}-p${r?" interactable":""}"
                d="M${J(o)} ${J(l)} L${J(a)} ${J(h)}"
            ></path>`},this._dispatch=(t,e,i,s)=>{const[n,r]=this.getScalesWithMeta(),o=s(this.data[i]),a={x:n.scale(o.x),y:r.scale(o.y)};this.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{evt:e,point:o,scaled:a,metadata:this.metadata,target:this,index:i}}))}}exportSVG(){if(this.size&&this.getScales())return this.render(!0)}getDomain2D(){var t;return $(null===(t=this.accessor)||void 0===t?void 0:t.call(this,this.data).flatMap((t=>{let{x:e,y:i,x1:s,y1:n}=t;const r=[{x:e,y:i}];return n&&"string"!==typeof n&&n!==i&&r.push({x:e,y:n}),s&&"string"!==typeof s&&s!==e&&r.push({x:s,y:i}),r})))}render(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[e,i]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales())return;const[n,r]=this.size,[o,a]=this.getScales();return s.qy`
            <svg width=${n} height=${r} class="${i}">
                ${this._render(e,o,a,t)}
            </svg>
        `}_invalidateCanvas(t){throw new Error("not implemented"+t)}_invalidateGl(t){throw new Error("not implemented"+t)}_renderWhiskers(t,e,i,s,n,r){return void 0!==n.y1?this._renderVertWhiskers(t,e,i(n.x),s(n.y),s(n.y1),this._findWhiskerSize(i),r):void 0!==n.x1?this._renderHorizontalWhiskers(t,e,s(n.y),i(n.x),i(n.x1),this._findWhiskerSize(s),r):null}_renderHorizontalWhiskers(t,e,i,n,r,o,a){const l=i-o,h=i+o,c=this.bidirectional?s.JW`${this._line(t,"whisk-p2-",e,{x1:r,x2:r,y1:l,y2:h},a)}`:null;return s.JW`
                ${this._line(t,"whisk-p1-",e,{x1:n,x2:n,y1:l,y2:h},a)}
                ${this._line(t,"whisk-p-",e,{x1:n,x2:r,y1:i,y2:i},a)}
                ${c}
        `}_renderVertWhiskers(t,e,i,n,r,o,a){const l=i-o,h=i+o,c=this.bidirectional?s.JW` ${this._line(t,"whisk-p2-",e,{x1:l,x2:h,y1:n,y2:n},a)}`:null;return s.JW`
                ${this._line(t,"whisk-p1-",e,{x1:l,x2:h,y1:r,y2:r},a)}
                ${this._line(t,"whisk-p-",e,{x1:i,x2:i,y1:n,y2:r},a)}
                ${c}            
        `}_dispatchClick(t,e,i){this._dispatch("whiskers-click",t,e,i)}_dispatchHover(t,e,i){this._hoverIndex!==e&&this._dispatch("whiskers-hover",t,e,i)}_dispatchHoverEnd(t,e,i){this._hoverIndex=-1,this._dispatch("whiskers-hover-end",t,e,i)}};Ul([(0,s.MZ)({type:Boolean,reflect:!1,converter:s.Bs}),Bl("design:type",Object)],Nl.prototype,"bidirectional",void 0),Ul([(0,s.MZ)({type:Number,reflect:!1,attribute:"hover-radius"}),Bl("design:type",Object)],Nl.prototype,"hoverRadius",void 0),Ul([(0,s.MZ)({type:Number,reflect:!1,attribute:"hover-color"}),Bl("design:type",Object)],Nl.prototype,"hoverColor",void 0),Ul([(0,s.MZ)({type:Number,reflect:!1,attribute:"hover-opacity"}),Bl("design:type",Object)],Nl.prototype,"hoverOpacity",void 0),Ul([(0,s.wk)(),Bl("design:type",Object)],Nl.prototype,"_hoverIndex",void 0),Nl=Ul([(0,s.eV)({tagName:(0,g.o)("svg-whiskers"),styles:t=>{const{child:e}=(0,s.zz)(t);return[Q(t),s.AH`
            ${e("target")} {
                pointer-events: none;
            }

            ${e("hover-target")} {
                opacity: 0;
                pointer-events: painted;
                cursor: var(--plot-cursor, pointer);
            }

            ${e("hover-target")}:hover {
                opacity: initial;
            }
            .highlight {
                opacity: initial;
            }

            .interactable {
                pointer-events: painted;
            }

            ${e("target")}:has(+ ${e("hover-target")}:hover) {
                fill: var(--plot-hover-fill);
                fill-opacity: var(--plot-hover-opacity);

                stroke-width: var(--plot-hover-stroke-width);
                stroke: var(--plot-hover-stroke);
                stroke-opacity: var(--plot-hover-stroke-opacity);
                stroke-dasharray: var(--plot-hover-stroke-dasharray);
            }
        `]},version:n.r})],Nl);function Fl(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Vl(t){return t}const Hl=Math.abs,Gl=Math.atan2,Yl=Math.cos,Xl=Math.max,Wl=Math.min,ql=Math.sin,Zl=Math.sqrt,Jl=1e-12,Kl=Math.PI,Ql=Kl/2,th=2*Kl;function eh(t){return t>=1?Ql:t<=-1?-Ql:Math.asin(t)}function ih(t){return t.innerRadius}function sh(t){return t.outerRadius}function nh(t){return t.startAngle}function rh(t){return t.endAngle}function oh(t){return t&&t.padAngle}function ah(t,e,i,s,n,r,o){var a=t-i,l=e-s,h=(o?r:-r)/Zl(a*a+l*l),c=h*l,d=-h*a,u=t+c,p=e+d,f=i+c,g=s+d,v=(u+f)/2,y=(p+g)/2,m=f-u,x=g-p,_=m*m+x*x,b=n-r,w=u*g-f*p,M=(x<0?-1:1)*Zl(Xl(0,b*b*_-w*w)),S=(w*x-m*M)/_,C=(-w*m-x*M)/_,k=(w*x+m*M)/_,T=(-w*m+x*M)/_,$=S-v,A=C-y,P=k-v,O=T-y;return $*$+A*A>P*P+O*O&&(S=k,C=T),{cx:S,cy:C,x01:-c,y01:-d,x11:S*(n/b-1),y11:C*(n/b-1)}}function lh(){var t=ih,e=sh,i=_t(0),s=null,n=nh,r=rh,o=oh,a=null,l=At(h);function h(){var h,c,d,u=+t.apply(this,arguments),p=+e.apply(this,arguments),f=n.apply(this,arguments)-Ql,g=r.apply(this,arguments)-Ql,v=Hl(g-f),y=g>f;if(a||(a=h=l()),p<u&&(c=p,p=u,u=c),p>Jl)if(v>th-Jl)a.moveTo(p*Yl(f),p*ql(f)),a.arc(0,0,p,f,g,!y),u>Jl&&(a.moveTo(u*Yl(g),u*ql(g)),a.arc(0,0,u,g,f,y));else{var m,x,_=f,b=g,w=f,M=g,S=v,C=v,k=o.apply(this,arguments)/2,T=k>Jl&&(s?+s.apply(this,arguments):Zl(u*u+p*p)),$=Wl(Hl(p-u)/2,+i.apply(this,arguments)),A=$,P=$;if(T>Jl){var O=eh(T/u*ql(k)),R=eh(T/p*ql(k));(S-=2*O)>Jl?(w+=O*=y?1:-1,M-=O):(S=0,w=M=(f+g)/2),(C-=2*R)>Jl?(_+=R*=y?1:-1,b-=R):(C=0,_=b=(f+g)/2)}var E=p*Yl(_),D=p*ql(_),I=u*Yl(M),L=u*ql(M);if($>Jl){var z,j=p*Yl(b),U=p*ql(b),B=u*Yl(w),N=u*ql(w);if(v<Kl)if(z=function(t,e,i,s,n,r,o,a){var l=i-t,h=s-e,c=o-n,d=a-r,u=d*l-c*h;if(!(u*u<Jl))return[t+(u=(c*(e-r)-d*(t-n))/u)*l,e+u*h]}(E,D,B,N,j,U,I,L)){var F=E-z[0],V=D-z[1],H=j-z[0],G=U-z[1],Y=1/ql(((d=(F*H+V*G)/(Zl(F*F+V*V)*Zl(H*H+G*G)))>1?0:d<-1?Kl:Math.acos(d))/2),X=Zl(z[0]*z[0]+z[1]*z[1]);A=Wl($,(u-X)/(Y-1)),P=Wl($,(p-X)/(Y+1))}else A=P=0}C>Jl?P>Jl?(m=ah(B,N,E,D,p,P,y),x=ah(j,U,I,L,p,P,y),a.moveTo(m.cx+m.x01,m.cy+m.y01),P<$?a.arc(m.cx,m.cy,P,Gl(m.y01,m.x01),Gl(x.y01,x.x01),!y):(a.arc(m.cx,m.cy,P,Gl(m.y01,m.x01),Gl(m.y11,m.x11),!y),a.arc(0,0,p,Gl(m.cy+m.y11,m.cx+m.x11),Gl(x.cy+x.y11,x.cx+x.x11),!y),a.arc(x.cx,x.cy,P,Gl(x.y11,x.x11),Gl(x.y01,x.x01),!y))):(a.moveTo(E,D),a.arc(0,0,p,_,b,!y)):a.moveTo(E,D),u>Jl&&S>Jl?A>Jl?(m=ah(I,L,j,U,u,-A,y),x=ah(E,D,B,N,u,-A,y),a.lineTo(m.cx+m.x01,m.cy+m.y01),A<$?a.arc(m.cx,m.cy,A,Gl(m.y01,m.x01),Gl(x.y01,x.x01),!y):(a.arc(m.cx,m.cy,A,Gl(m.y01,m.x01),Gl(m.y11,m.x11),!y),a.arc(0,0,u,Gl(m.cy+m.y11,m.cx+m.x11),Gl(x.cy+x.y11,x.cx+x.x11),y),a.arc(x.cx,x.cy,A,Gl(x.y11,x.x11),Gl(x.y01,x.x01),!y))):a.arc(0,0,u,M,w,y):a.lineTo(I,L)}else a.moveTo(0,0);if(a.closePath(),h)return a=null,h+""||null}return h.centroid=function(){var i=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,s=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2-Kl/2;return[Yl(s)*i,ql(s)*i]},h.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:_t(+e),h):t},h.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:_t(+t),h):e},h.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:_t(+t),h):i},h.padRadius=function(t){return arguments.length?(s=null==t?null:"function"===typeof t?t:_t(+t),h):s},h.startAngle=function(t){return arguments.length?(n="function"===typeof t?t:_t(+t),h):n},h.endAngle=function(t){return arguments.length?(r="function"===typeof t?t:_t(+t),h):r},h.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:_t(+t),h):o},h.context=function(t){return arguments.length?(a=null==t?null:t,h):a},h}var hh,ch=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},dh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},uh=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};let ph=hh=class extends ft{constructor(){super(...arguments),this._scalePercent=on().domain([0,100]).range([0,2*Math.PI]),this.yVals=()=>this.accessor(this.data).flatMap((t=>[t.y-t.outerRadius,t.y+t.outerRadius])),this.xVals=()=>this.accessor(this.data).flatMap((t=>[t.x-t.outerRadius,t.x+t.outerRadius])),this._getLabelStyle=t=>{var e;return this._labelStyle(null!==(e=this.labelStyle)&&void 0!==e?e:{},t)},this._labelStyle=(t,e)=>{var i,s;return Object.fromEntries(Object.entries(this._isFunc(t)?null!==(i=t(e))&&void 0!==i?i:{}:null!==(s=t)&&void 0!==s?s:{}).filter((t=>{let[e,i]=t;return null!==i&&void 0!==i&&""!==i})))},this._hightlightClass=(t,e)=>this._isHighlight(t,e)?" highlight":"",this._interactableClass=(t,e)=>this._isInteractable(t,e)?" interactable":"",this._label=(t,e,i,n,r,o,a)=>{var l;if(o.label){let h;if(h="function"===typeof o.label?null!==(l=o.label({index:n,subIndex:r}))&&void 0!==l?l:"":Array.isArray(o.label)?o.label[r]:o.label,h){const n=e.centroid(i),r=this._labelAnchor(i),o=null!==a&&void 0!==a?a:{},{centroidCoef:l}=o,c=uh(o,["centroidCoef"]),d={"--svg-arc-label-font-size":c.fontSize?`${c.fontSize}px`:void 0,"--svg-arc-label-font-weight":c.fontWeight},u={fill:c.fillColor,visibility:c.visibility};return s.JW`<g 
                    class="${t}-centroid" 
                    transform="translate(${n[0]*(null!==l&&void 0!==l?l:1.65)}, ${n[1]*(null!==l&&void 0!==l?l:1.65)})"
                    style="text-anchor: ${r[0]}; dominant-baseline: ${r[1]}; overflow: hidden;${(0,dt.wb)(d)};">
                    <text style="fill: ${u.fill}; visibility: ${u.visibility};">${h}</text>
                </g>`}}return null},this._labelAnchor=t=>{const e=((t.endAngle-t.startAngle)/2+t.startAngle)%(2*Math.PI);let i,s;return i=e>=hh.deg22&&e<=hh.deg157?"start":e>=hh.deg202&&e<=hh.deg337?"end":"middle",s=e<hh.deg45||e>hh.deg315?"text-after-edge":e>hh.deg135&&e<hh.deg225?"text-before-edge":"middle",[i,s]},this._clippingPie=(t,e,i)=>{const[s,n]=this.size;return this.clipping&&(t-i>s||t+i<0||e-i>n||e+i<0)},this._initPieGenerator=(t,e,i,s,n)=>{const r=function(){var t=Vl,e=Fl,i=null,s=_t(0),n=_t(th),r=_t(0);function o(o){var a,l,h,c,d,u=(o=xt(o)).length,p=0,f=new Array(u),g=new Array(u),v=+s.apply(this,arguments),y=Math.min(th,Math.max(-th,n.apply(this,arguments)-v)),m=Math.min(Math.abs(y)/u,r.apply(this,arguments)),x=m*(y<0?-1:1);for(a=0;a<u;++a)(d=g[f[a]=a]=+t(o[a],a,o))>0&&(p+=d);for(null!=e?f.sort((function(t,i){return e(g[t],g[i])})):null!=i&&f.sort((function(t,e){return i(o[t],o[e])})),a=0,h=p?(y-u*x)/p:0;a<u;++a,v=c)l=f[a],c=v+((d=g[l])>0?d*h:0)+x,g[l]={data:o[l],index:a,value:d,startAngle:v,endAngle:c,padAngle:m};return g}return o.value=function(e){return arguments.length?(t="function"===typeof e?e:_t(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,i=null,o):e},o.sort=function(t){return arguments.length?(i=t,e=null,o):i},o.startAngle=function(t){return arguments.length?(s="function"===typeof t?t:_t(+t),o):s},o.endAngle=function(t){return arguments.length?(n="function"===typeof t?t:_t(+t),o):n},o.padAngle=function(t){return arguments.length?(r="function"===typeof t?t:_t(+t),o):r},o}();return void 0!==e&&r.padAngle(t&&"rad"===t?e:this._scalePercent(e)),void 0!==i&&r.startAngle(t&&"rad"===t?i:this._scalePercent(i)),void 0!==s&&r.endAngle(t&&"rad"===t?s:this._scalePercent(s)),r.sort(void 0!==n?n:()=>0),r}}exportSVG(){const[t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return this._renderSVG(t)}render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{canvas:"svg"!==this.mode});if(!this.size||!this.getScales())return;const[i,n]=this.size;return"svg"!==this.mode?s.qy`
                <div class="${e}">
                    <canvas class="${t}-target"></canvas>
                </div>
            `:s.qy`
            <svg width=${i} height=${n} class="${e}">${this._renderSVG(t)}</svg>
        `}_invalidateCanvas(t){throw new Error("Arc 2d canvas not implemented"+t)}_invalidateGl(t){throw new Error("Arc gl canvas not implemented"+t)}_renderSVG(t){const[e,i]=this.getScales(),n=this._findBandwidth(e,i);return this.data.map(((r,o)=>{var a,l,h;const c=this._initPieGenerator(r.unit,r.padAngle,r.startAngle,r.endAngle,r.sort),d=e(r.x),u=i(r.y),p=(null!==(a=r.outerRadius)&&void 0!==a?a:1)*n,f=(null!==(l=r.innerRadius)&&void 0!==l?l:0)*n;if(this._clippingPie(d,u,p))return null;const g=lh().innerRadius(f).outerRadius(p),v=`translate(${d} ${u})`,y=c(null!==(h=r.v)&&void 0!==h?h:[1]);return s.JW`
                <g class="${t}-pie" transform='${v}' >
                    ${y.map(((e,i)=>{const n=this._isVisibilityHidden(o,i),a=this._label(t,g,e,o,i,r,Object.assign(Object.assign({},this._getLabelStyle({index:o,subIndex:i})),{visibility:this._isLabelHidden(o,i)?"hidden":void 0})),l=this._getDefaultStyle({index:o,subIndex:i},{fillColor:"black",fillOpacity:1,strokeColor:"none",strokeWidth:1,strokeOpacity:1,strokeDashArray:"initial"}),h="none"!==l.fillColor||"none"!==l.strokeColor?s.JW`<path 
                            class="${t}-hover-target 
                                    ${this._hightlightClass(o,i)}
                                    ${this._interactableClass(o,i)}" 
                            d=${g(e)} 
                            
                            fill='${l.fillColor}'
                            fill-opacity=${l.fillOpacity}                    
                            stroke=${l.strokeColor}
                            stroke-width=${l.strokeWidth}
                            stroke-opacity=${l.strokeOpacity}
                            stroke-dasharray=${l.strokeDashArray}
                            
                            visibility=${(0,s.JR)(n?"hidden":void 0)}
                    
                            style=${this._generateStyle({index:o,subIndex:i},l)}
                            @click=${t=>this._handleSvgArcClick(t,o,i)} 
                            @mouseenter=${t=>this._handleSvgArcMouseEnter(t,o,i)} 
                            @mouseleave=${t=>this._handleSvgArcMouseLeave(t,o,i)}
                            />                        
                        `:null;return s.JW`${h}${a}`}))}
                </g>            
            `}))}_findBandwidth(t,e){if(t.bandwidth)return t.bandwidth();if(e.bandwidth)return e.bandwidth();const i=t(0),s=t(1),n=e(0),r=e(1),o=Math.abs(i-s),a=Math.abs(n-r);return 2*lt().domain(["1","2"]).range(o>a?[n,r]:[i,s]).bandwidth()}_handleSvgArcClick(t,e,i){this._dispatchClick(t,e,i)}_handleSvgArcMouseEnter(t,e,i){this._dispatchHover(t,e,i)}_handleSvgArcMouseLeave(t,e,i){this._dispatchHoverEnd(t,e,i)}_dispatchClick(t,e,i){this.dispatchEvent(new CustomEvent("arc-click",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchHover(t,e,i){this.dispatchEvent(new CustomEvent("arc-hover",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}_dispatchHoverEnd(t,e,i){this.dispatchEvent(new CustomEvent("arc-hover-end",{bubbles:!0,detail:{evt:t,metadata:this.metadata,target:this,index:e,subIndex:i}}))}};ph.deg22=22.5*Math.PI/180,ph.deg45=45*Math.PI/180,ph.deg135=135*Math.PI/180,ph.deg157=157.5*Math.PI/180,ph.deg202=202.5*Math.PI/180,ph.deg225=225*Math.PI/180,ph.deg315=315*Math.PI/180,ph.deg337=337.5*Math.PI/180,ch([(0,s.MZ)({type:Function,reflect:!1,attribute:!1}),dh("design:type",Object)],ph.prototype,"labelStyle",void 0),ph=hh=ch([(0,s.eV)({tagName:(0,g.o)("svg-arc"),styles:t=>{const{child:e}=(0,s.zz)(t);return[Q(t),s.AH`
            .interactable:not([visibility='hidden']) {
                pointer-events: painted;
            }

            ${e("hover-target")}:hover,
            .highlight {
                fill: var(--plot-hover-fill);
                fill-opacity: var(--plot-hover-opacity);

                stroke-width: var(--plot-hover-stroke-width);
                stroke: var(--plot-hover-stroke);
                stroke-opacity: var(--plot-hover-stroke-opacity);
                stroke-dasharray: var(--plot-hover-stroke-dasharray);

                cursor: var(--plot-cursor, pointer);
            }

            ${e("centroid")} {
                dominant-baseline: middle;
                text-anchor: middle;
            }
            ${e("centroid")} > text {
                font-size: var(--svg-arc-label-font-size, 12px);
                font-weight: var(--svg-arc-label-font-weight, 400);
                white-space: nowrap;
            }
        `]},version:n.r})],ph);function fh(t,e,i){return"invert"in i?Math.abs(t-e):t===e?0:Number.POSITIVE_INFINITY}function gh(t,e,i,s){let n=0,r=t.length-1,o=null,a=1/0;for(;n<=r;){const l=Math.floor((n+r)/2),h=s(t[l]),c=fh(h,e,i);if(0===c)return t[l];c<a&&(a=c,o=t[l]),h<e?n=l+1:r=l-1}return o}function vh(t,e,i,s){let n=null,r=1/0;for(const o of t){const t=fh(s(o),e,i);if(0===t)return o;t<r&&(r=t,n=o)}return n}function yh(t,e){return(null!==t&&void 0!==t?t:[]).filter((t=>{var i;return("scaleX"in t&&t.scaleX===e||"scaleY"in t&&t.scaleY===e)&&(null===(i=t.plotData)||void 0===i?void 0:i.length)>0}))}function mh(t,e){const i=t.copy();return i.range([0,e]),i}function xh(t,e){return"invert"in e?e.invert(t):function(t,e){const i=e.domain(),s=e.bandwidth();let n=null,r=Number.POSITIVE_INFINITY;return i.forEach((i=>{const o=e(i)+s/2,a=Math.abs(o-t);a<r&&(r=a,n=i)})),n}(t,e)}function _h(t,e,i,s,n){if(!n||!e||0===e.length)return;const r=yh(e,s);if(0===r.length)return;const o=function(t,e){return t.scaleY===e?t=>t.y:t=>t.x}(r[0],s),a=mh(n,i);return function(t,e,i,s){const n="invert"in i?gh:vh;let r,o=Number.POSITIVE_INFINITY;for(const a of t){const t=n(a.plotData,e,i,s);if(!t)continue;const l=fh(s(t),e,i);if(0===l)return t;l<o&&(o=l,r=t)}return r}(r,xh(t,a),a,o)}function bh(t,e,i,s,n){if(!n||!e||0===e.length)return;if(0===yh(e,s).length)return;return xh(t,mh(n,i))}function wh(t){let{data:e,element:i,mouseX:s,options:n,scaleX:r}=t;if(0===e.length)return{x:null,y:null,scales:i.scales};const o=function(t,e,i,s){const{pixelProximityThreshold:n=0}=null!==s&&void 0!==s?s:{},[r]=i,o=t.map((t=>t.x)),a=Math.max(...o),l=r(Math.min(...o)),h=r(a);return e<l-n||e>h+2*n?{x:null,y:null,scales:i}:r.invert(e)===a?{x:t[t.length-1].x,y:t[t.length-1].y,scales:i}:null}(e,s,i.scales,n);if(o)return o;const a=r.invert(s);return(null===n||void 0===n?void 0:n.midpoint)?function(t,e,i,s){const n=(0,Ri((t=>t.x)).left)(t,e,1);if(0===n||n>=t.length){const e=t[Math.min(n,t.length-1)];return{x:e.x,y:e.y,scales:i}}const r=t[n-1],o=t[n];if(!r||!o)return{x:null,y:null,scales:i};if(r.y===o.y&&r.x===o.x)return{x:r.x,y:r.y,scales:i};if(null===s||void 0===s?void 0:s.interpolateFn){const t=(e-r.x)/(o.x-r.x);return{x:e,y:s.interpolateFn(r.y,o.y)(t),scales:i}}return e<r.x+(o.x-r.x)/2?{x:r.x,y:r.y,scales:i}:{x:o.x,y:o.y,scales:i}}(e,a,i.scales,n):function(t,e,i,s){const{interpolateFn:n}=null!==s&&void 0!==s?s:{},r=(0,Ri((t=>t.x)).left)(t,e,1);if(0===r||r>=t.length)return{x:t[Math.min(r,t.length-1)].x,y:t[Math.min(r,t.length-1)].y,scales:i};const o=t[r-1],a=t[r];if(!o||!a)return{x:null,y:null,scales:i};if(o.y===a.y&&o.x===a.x)return{x:o.x,y:o.y,scales:i};if(n)return{x:e,y:n(o.y,a.y)((e-o.x)/(a.x-o.x)),scales:i};return{x:o.x,y:o.y,scales:i}}(e,a,i.scales,n)}function Mh(t,e,i){return e.map((e=>{var s;const n=e.data,[r]=e.scales;return n.every((t=>Array.isArray(t)))?null!==(s=e.data.flatMap((s=>wh({data:s,mouseX:t,element:e,options:i,scaleX:r}))).find((t=>null!=t.y)))&&void 0!==s?s:{x:null,y:null,scales:e.scales}:wh({data:n,mouseX:t,element:e,options:i,scaleX:r})}))}var Sh;function Ch(t,e){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sh.RETURN_EMPTY){case Sh.RETURN_EMPTY:if(e.length<2)return t.map((()=>[]));break;case Sh.USE_DEFAULT_RANGE:e.length<2&&(e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY]);break;case Sh.THROW_ERROR:if(e.length<2)throw new Error("currentXPos must contain exactly two values to define a range.");break;default:throw new Error("Unknown invalidInputStrategy.")}const[i,s]=[...e].sort(((t,e)=>t-e)),n=[];for(let r=0;r<t.length;r++){const e=t[r],o=[];for(let t=0;t<e.length;t++){const n=e[t];n.x>=i&&n.x<=s&&o.push(n.y)}n.push(o)}return n}!function(t){t.RETURN_EMPTY="RETURN_EMPTY",t.USE_DEFAULT_RANGE="USE_DEFAULT_RANGE",t.THROW_ERROR="THROW_ERROR"}(Sh||(Sh={}));const kh={left:0,top:0,width:0,height:0,x:0,y:0,bottom:0,right:0,toJSON:()=>{}};function Th(t,e,i){const s=i[1]-i[0],n=t[1]-t[0];return{left:(t[0]-i[0])/s*e,width:n/s*e}}function $h(t,e,i){const s=i[1]-i[0];return[t.left/e*s+i[0],(t.left+t.width)/e*s+i[0]]}var Ah,Ph,Oh=i(86332),Rh=i(14942),Eh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Dh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.LeftDisabledRuler="left-disabled-ruler",t.LeftRuler="left-ruler",t.RightDisabledRuler="right-disabled-ruler",t.RightRuler="right-ruler",t.Bar="bar"}(Ph||(Ph={}));let Ih=Ah=class extends((0,V.c)((0,o.ID)((0,gi.K)(s.OC)))){set dataFormatter(t){this._dataFormatter=t||aa()}get dataFormatter(){return this._dataFormatter}constructor(){super(),this.height=50,this.disabled=!1,this._isBarDragging=!1,this._isRulerDragging=!1,this._bounds=Eo,this._startPoint=0,this._hasLeftRulerSlot=!1,this._hasLeftDisabledRulerSlot=!1,this._hasRightRulerSlot=!1,this._hasRightDisabledRulerSlot=!1,this._hasBarSlot=!1,this._dataFormatter=aa(),this._trackingState={barActive:!1,mouse:[0,0],isVisible:!1,dataPoint:void 0,leftRulerPosition:0,rightRulerPosition:0,leftRulerDataPoint:void 0,rightRulerDataPoint:void 0},this._firstRulerPosition=0,this._lastRulerPosition=0,this._tooltipRightWidth=0,this._tooltipLeftWidth=0,this.onContainerResize=(0,vi.Tz)((()=>{this.resolveZoomLimit()}),10),this._verticalOr=(t,e)=>this._vertical?t():e(),this._adjustedLeftPosition=(t,e,i)=>{const s=i+e;return s>t?Math.round(t-s):0},this._adjustedRightPosition=(t,e,i)=>{const s=i+t-e;return s>0?0:s},this._renderTooltip=(t,e)=>{if(!this.tooltips)return null;const i="left"===e?"M0 30H8L0 37V30Z":"M0 30H8V37 L0 30Z",n="left"===e?this._trackingState.leftRulerDataPoint:this._trackingState.rightRulerDataPoint;return s.qy` <div class="${t}-tooltip ${t}-tooltip-${e}">
            <div class="${t}-tooltip-content">
                ${this._renderClock(t)}
                <span class="${t}-tooltip-data">${this._dataFormatter(null!==n&&void 0!==n?n:0)}</span>
            </div>
            <div class="${t}-tooltip-effect">
                <svg width="8" height="37" viewBox="0 0 8 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="${i}" fill="#252525" />
                    <rect width="8" height="30" fill="#252525" />
                </svg>
            </div>
        </div>`},this._updateDistanceBetween=()=>{this._distanceBetweenRulers=Math.abs(this._lastRulerPosition-this._firstRulerPosition)},this.getLeftRuler=t=>this.getRuler(t,this._hasLeftRulerSlot||this._hasLeftDisabledRulerSlot,Ph.LeftRuler,Ph.LeftDisabledRuler),this.getRightRuler=t=>this.getRuler(t,this._hasRightRulerSlot||this._hasRightDisabledRulerSlot,Ph.RightRuler,Ph.RightDisabledRuler),this._renderRulerHandle=t=>this._renderIcon(t,Oh.default,"ruler-handle"),this._renderClock=t=>this._renderIcon(t,Rh.default,"tooltip-icon"),this._renderIcon=(t,e,i)=>s.qy` <${Ah.Icon.tag} icon=${e} class="${t}-${i}" />`,this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.barDragStart=this.barDragStart.bind(this),this.barMousemove=this.barMousemove.bind(this),this.barMouseup=this.barMouseup.bind(this),this.leftDragStart=this.leftDragStart.bind(this),this.leftMousemove=this.leftMousemove.bind(this),this.rightDragStart=this.rightDragStart.bind(this),this.rightMouseMove=this.rightMouseMove.bind(this)}connectedCallback(){Ah.dynSubRegister([{module:()=>i.e(9693).then(i.bind(i,59693)),elem:["Icon"]}],(()=>{super.connectedCallback()})),this._vertical="vertical-scrollbar"===this.slot}disconnectedCallback(){this._uninstallResizeObserver(this._container),super.disconnectedCallback()}updated(t){super.updated(t),t.has("viewbox")&&this.updateTrackingState({})}firstUpdated(t){this._trackingState.leftRulerDataPoint||(this._trackingState.leftRulerDataPoint=this._verticalOr((()=>{var t,e,i;return null===(i=_h(this._firstRulerPosition,this.allDataElements,this._container.clientHeight,this.scaleY,null===(e=null===(t=this.scaleMap)||void 0===t?void 0:t[this.scaleY])||void 0===e?void 0:e.scale))||void 0===i?void 0:i.y}),(()=>{var t,e,i;return null===(i=_h(this._firstRulerPosition,this.allDataElements,this._container.clientWidth,this.scaleX,null===(e=null===(t=this.scaleMap)||void 0===t?void 0:t[this.scaleX])||void 0===e?void 0:e.scale))||void 0===i?void 0:i.x}))),this._trackingState.rightRulerDataPoint||(this._trackingState.rightRulerDataPoint=this._verticalOr((()=>{var t,e,i;return null===(i=_h(this._lastRulerPosition,this.allDataElements,this._container.clientHeight,this.scaleY,null===(e=null===(t=this.scaleMap)||void 0===t?void 0:t[this.scaleY])||void 0===e?void 0:e.scale))||void 0===i?void 0:i.y}),(()=>{var t,e,i;return null===(i=_h(this._lastRulerPosition,this.allDataElements,this._container.clientWidth,this.scaleX,null===(e=null===(t=this.scaleMap)||void 0===t?void 0:t[this.scaleX])||void 0===e?void 0:e.scale))||void 0===i?void 0:i.x}))),this._uninstallResizeObserver(this),this._installResizeObserver(this._container),super.firstUpdated(t)}willUpdate(t){var e;super.willUpdate(t),(t.has("domainBounds")||t.has("fittedDomain"))&&(this._bounds=null!==(e=this.domainBounds)&&void 0!==e?e:Eo),(t.has("rulerWidth")||t.has("domainBounds"))&&this.resolveZoomLimit(),this.allDataElements&&this.dataFormatter&&(t.has("allDataElements")||t.has("dataFormatter")||t.has("leftLabel")||t.has("rightLabel"))&&(this._leftLabel=this._updateAutoLabel(this.leftLabel,0),this._rightLabel=this._updateAutoLabel(this.rightLabel))}render(){var t,e,i,n,r,o,a;const[l,h]=(0,s.Yh)(this.tagName.toLowerCase(),{disabled:this.disabled,dragging:this._isRulerDragging||this._isBarDragging,high:this._distanceBetweenRulers<(null!==(e=null===(t=this._tooltipLeft)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:0)+(null!==(n=null===(i=this._tooltipRight)||void 0===i?void 0:i.clientWidth)&&void 0!==n?n:0),vertical:!!this._vertical});let c,d,u;this._verticalOr((()=>{var t,e,i;c=null!==(e=null===(t=this._container)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0,d=null===(i=this.viewbox)||void 0===i?void 0:i.y,u=this._bounds.y}),(()=>{var t,e,i;c=null!==(e=null===(t=this._container)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:0,d=null===(i=this.viewbox)||void 0===i?void 0:i.x,u=this._bounds.x}));const{left:p,width:f}=Th(null!==d&&void 0!==d?d:[0,1],c,u),g=null!==(r=this.rulerWidth)&&void 0!==r?r:10,v=null!==g&&void 0!==g?g:10,y=Math.max(f,v);this._firstRulerPosition=p,this._lastRulerPosition=Math.max(p+y,this._firstRulerPosition+v);const m=g/2,x={"--windowscroll-root-padding":`${m}px`,"--windowscroll-content-margin":`-${m}px`,"--windowscroll-container-bg-color":this.bgColor,"--windowscroll-container-height":`${this.height}px`,"--windowscroll-ruler-width":`${g}px`,"--windowscroll-left-ruler-pos":this._firstRulerPosition-m+"px","--windowscroll-right-ruler-pos":this._lastRulerPosition-m+"px","--windowscroll-bar-width":`${y}px`,"--windowscroll-bar-pos":`${p}px`,"--windowscroll-left-tooltip-pos":`${this._adjustedLeftPosition(c,this._tooltipLeftWidth,this._firstRulerPosition-m)}px`,"--windowscroll-right-tooltip-pos":this._adjustedRightPosition(g,this._tooltipRightWidth,this._lastRulerPosition-m)-g+"px"},_=this.leftLabel||this.rightLabel?s.qy`
                      <div class="${l}-labels">
                          <div class="${l}-left-label">${null!==(o=this._leftLabel)&&void 0!==o?o:this.leftLabel}</div>
                          <div class="${l}-right-label">${null!==(a=this._rightLabel)&&void 0!==a?a:this.rightLabel}</div>
                      </div>
                  `:null;return s.qy`
            <div class="${h}" style=${(0,s.Wy)(x)}>
                ${_}
                <div
                    class="${l}-container"
                    @mousemove=${this.handleMouseMove}
                    @mouseleave=${this.handleMouseLeave}
                >
                    <div class="${l}-content">
                        <slot></slot>
                    </div>
                    <div class="${l}-placeholder">
                        <slot name="placeholder"></slot>
                    </div>

                    <div class="${l}-ruler ${l}-left-ruler" @mousedown=${this.leftDragStart}>
                        ${this.getLeftRuler(l)} ${this._renderTooltip(l,"left")}
                    </div>

                    <div class="${l}-bar" @mousedown=${this.barDragStart}>
                        <slot @slotchange="${this.handleSlotChange}" name="${Ph.Bar}"></slot>
                        ${this._hasBarSlot?s.s6:s.qy` <div class="${l}-default-bar"></div>`}
                    </div>

                    <div
                        class="${l}-ruler ${l}-right-ruler __right-ruler"
                        @mousedown=${this.rightDragStart}
                    >
                        ${this.getRightRuler(l)} ${this._renderTooltip(l,"right")}
                    </div>
                </div>
            </div>
        `}_resizeObserverCallback(){this.onContainerResize()}resolveZoomLimit(){var t;if(!this._container||!this.rulerWidth)return;const e=this._container.offsetWidth,[i,s]=null!==(t=this._bounds.x)&&void 0!==t?t:Eo.x;this.zoomLimit=(s-i)/e*(this.rulerWidth+1),this.dispatchEvent(new CustomEvent("zoom-limit-change",{detail:this.zoomLimit,bubbles:!0,composed:!0,cancelable:!0}))}_updateAutoLabel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;var i;if("auto"===t){const t=this.allDataElements.length,s=e>-1?e:t,n=this._vertical?this.scaleY:this.scaleX,r=null===(i=this.scaleMap)||void 0===i?void 0:i[n],o=_h(s,this.allDataElements,t,n,null===r||void 0===r?void 0:r.scale);if(o){const t=this._vertical?o.y:o.x;return this.dataFormatter(t)}return""}}async barDragStart(t){if(t.preventDefault(),t.stopPropagation(),this.disabled||this._isBarDragging)return;this._isBarDragging=!0;const{firstRulerDataPoint:e,lastRulerDataPoint:i}=this._verticalOr((()=>{var e;this._startPoint=t.clientY;const i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleY].scale,s=_h(this._firstRulerPosition,this.allDataElements,this._container.clientHeight,this.scaleY,i),n=_h(this._lastRulerPosition,this.allDataElements,this._container.clientHeight,this.scaleY,i);return{firstRulerDataPoint:null===s||void 0===s?void 0:s.y,lastRulerDataPoint:null===n||void 0===n?void 0:n.y}}),(()=>{var e;this._startPoint=t.clientX;const i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleX].scale,s=_h(this._firstRulerPosition,this.allDataElements,this._container.clientWidth,this.scaleX,i),n=_h(this._lastRulerPosition,this.allDataElements,this._container.clientWidth,this.scaleX,i);return{firstRulerDataPoint:null===s||void 0===s?void 0:s.x,lastRulerDataPoint:null===n||void 0===n?void 0:n.x}}));this.updateTrackingState({event:t,barActive:!0,leftRulerDataPoint:e,rightRulerDataPoint:i}),document.addEventListener("mousemove",this.barMousemove),document.addEventListener("mouseup",this.barMouseup),await this.updateComplete,this._updateDistanceBetween()}barMousemove(t){if(t.preventDefault(),t.stopPropagation(),!this._isBarDragging)return;const{firstRulerDataPoint:e,lastRulerDataPoint:i,currentPoint:s,domainDelta:n}=this._verticalOr((()=>{var e;const i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleY].scale,s=_h(this._firstRulerPosition,this.allDataElements,this._container.clientHeight,this.scaleY,i),n=_h(this._lastRulerPosition,this.allDataElements,this._container.clientHeight,this.scaleY,i),r=t.clientY,o=(this._startPoint-r)/this._container.clientHeight*(this._bounds.y[1]-this._bounds.y[0]);return{firstRulerDataPoint:null===s||void 0===s?void 0:s.y,lastRulerDataPoint:null===n||void 0===n?void 0:n.y,currentPoint:r,domainDelta:o}}),(()=>{var e,i;const s=null===(i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleX])||void 0===i?void 0:i.scale,n=_h(this._firstRulerPosition,this.allDataElements,this._container.clientWidth,this.scaleX,s),r=_h(this._lastRulerPosition,this.allDataElements,this._container.clientWidth,this.scaleX,s),o=t.clientX,a=(this._startPoint-o)/this._container.clientWidth*(this._bounds.x[1]-this._bounds.x[0]);return{firstRulerDataPoint:null===n||void 0===n?void 0:n.x,lastRulerDataPoint:null===r||void 0===r?void 0:r.x,currentPoint:o,domainDelta:a}}));this.panByDomainDelta(n),this.updateTrackingState({event:t,barActive:!0,leftRulerDataPoint:e,rightRulerDataPoint:i}),this._startPoint=s,this.requestUpdate()}barMouseup(t){t.preventDefault(),t.stopPropagation(),document.removeEventListener("mousemove",this.barMousemove),document.removeEventListener("mouseup",this.barMouseup),this._isBarDragging=!1,this._distanceBetweenRulers=void 0,this.updateTrackingState({barActive:!1})}async leftDragStart(t){var e,i;if(t.preventDefault(),this.disabled)return;this._startPoint=this._vertical?t.clientY:t.clientX,this._isRulerDragging=!0,this.leftMousemove(t),document.addEventListener("mousemove",this.leftMousemove),document.addEventListener("mouseup",(()=>{this._isRulerDragging=!1,this._distanceBetweenRulers=void 0,this.updateTrackingState({barActive:!1}),document.removeEventListener("mousemove",this.leftMousemove)}),{once:!0}),await this.updateComplete,this._updateDistanceBetween();const s=this.shadowRoot.querySelector('[class*="-tooltip-left"]'),n=this.shadowRoot.querySelector('[class*="-tooltip-right"]');this._tooltipLeftWidth=null!==(e=null===s||void 0===s?void 0:s.getBoundingClientRect().width)&&void 0!==e?e:0,this._tooltipRightWidth=null!==(i=null===n||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==i?i:0}async rightDragStart(t){var e,i;if(t.preventDefault(),this.disabled)return;this._startPoint=this._vertical?t.clientY:t.clientX,this._isRulerDragging=!0,this.rightMouseMove(t),document.addEventListener("mousemove",this.rightMouseMove),document.addEventListener("mouseup",(()=>{this._isRulerDragging=!1,this._distanceBetweenRulers=void 0,this.updateTrackingState({barActive:!1}),document.removeEventListener("mousemove",this.rightMouseMove),this._distanceBetweenRulers=0}),{once:!0}),await this.updateComplete,this._updateDistanceBetween();const s=this.shadowRoot.querySelector('[class*="-tooltip-left"]'),n=this.shadowRoot.querySelector('[class*="-tooltip-right"]');this._tooltipLeftWidth=null!==(e=null===s||void 0===s?void 0:s.getBoundingClientRect().width)&&void 0!==e?e:0,this._tooltipRightWidth=null!==(i=null===n||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==i?i:0}leftMousemove(t){var e,i;t.preventDefault();const s=this._vertical?{startX:this._startPoint,currentX:t.clientY,viewbox:this.viewbox,containerWidth:this._container.clientHeight,bounds:this._bounds.y,rulerWidth:null!==(e=this.rulerWidth)&&void 0!==e?e:10}:{startX:this._startPoint,currentX:t.clientX,viewbox:this.viewbox,containerWidth:this._container.clientWidth,bounds:this._bounds.x,rulerWidth:null!==(i=this.rulerWidth)&&void 0!==i?i:10},n=function(t,e){const{startX:i,currentX:s,viewbox:n,containerWidth:r,bounds:o,rulerWidth:a}=e,l=s-i,h=t?n.y:n.x,c=Th([h[0],h[1]],r,o);let d=c.left+l;const u=c.left+c.width-a-1;d=Math.min(d,u);const p=$h({left:d,width:c.width},r,o)[0],f=Math.max(o[0],p);return t?Object.assign(Object.assign({},n),{y:[f,h[1]]}):Object.assign(Object.assign({},n),{x:[f,h[1]]})}(!!this._vertical,s);this.dispatchEvent(new CustomEvent("zoom",{bubbles:!0,detail:Object.assign(Object.assign(Object.assign(Object.assign({},this.scaleZoomMap),!this._vertical&&{x:n.x}),this._vertical&&{y:n.y}),{viewbox:n})})),this.updateTrackingState({event:t,barActive:!0}),this._updateDistanceBetween(),this._startPoint=this._vertical?t.clientY:t.clientX}rightMouseMove(t){var e;t.preventDefault();const i={startX:this._startPoint,currentX:this._vertical?t.clientY:t.clientX,viewbox:this.viewbox,containerWidth:this._vertical?this._container.clientHeight:this._container.clientWidth,bounds:this._vertical?this._bounds.y:this._bounds.x,rulerWidth:null!==(e=this.rulerWidth)&&void 0!==e?e:10},s=function(t,e){const{startX:i,currentX:s,viewbox:n,containerWidth:r,bounds:o,rulerWidth:a}=e,l=s-i,h=t?n.y:n.x,c=Th([h[0],h[1]],r,o);let d=c.left+c.width+l;const u=c.left+a+1;d=Math.max(d,u);const p=$h({left:c.left,width:d-c.left},r,o)[1],f=Math.min(o[1],p);return t?Object.assign(Object.assign({},n),{y:[h[0],f]}):Object.assign(Object.assign({},n),{x:[n.x[0],f]})}(!!this._vertical,i);this.dispatchEvent(new CustomEvent("zoom",{bubbles:!0,detail:Object.assign(Object.assign(Object.assign(Object.assign({},this.scaleZoomMap),!this._vertical&&{x:s.x}),this._vertical&&{y:s.y}),{viewbox:s})}));const{firstRulerDataPoint:n,lastRulerDataPoint:r,zoomedDomain:o}=this._getRulerDataPoints(t);this.updateTrackingState({event:t,barActive:!0,leftRulerDataPoint:n,rightRulerDataPoint:r,zoomedDomain:o}),this._updateDistanceBetween()}handleSlotChange(t){const e=t.target,i=e.assignedElements({flatten:!0});switch(e.name){case"left-ruler":this._hasLeftRulerSlot=i.length>0;break;case"left-disabled-ruler":this._hasLeftDisabledRulerSlot=i.length>0;break;case"right-ruler":this._hasRightRulerSlot=i.length>0;break;case"right-disabled-ruler":this._hasRightDisabledRulerSlot=i.length>0;break;case"bar":this._hasBarSlot=i.length>0}this.requestUpdate()}handleMouseMove(t){var e,i;if(!this._container)return;const s=this._container.getBoundingClientRect(),n=t.clientX-s.left,r=t.clientY-s.top,o=null===(i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleX])||void 0===i?void 0:i.scale,a=_h(n,this.allDataElements,this._container.getBoundingClientRect().width,this.scaleX,o),l=bh(Math.max(0,Math.min(n,s.width)),this.allDataElements,this._container.getBoundingClientRect().width,this.scaleX,o);this._mouse=[n,r],this.updateTrackingState({event:t,isVisible:!0,dataPoint:null===a||void 0===a?void 0:a.x,currentInterpolatedDataPoint:l,leftRulerPosition:this._firstRulerPosition,rightRulerPosition:this._lastRulerPosition})}handleMouseLeave(t){this.updateTrackingState({event:t,isVisible:!1})}getRuler(t,e,i,n){const r=this._renderRulerHandle(t),o=e?s.s6:s.qy` <div class="${t}-default-ruler">${r}</div>`;return s.qy`${(0,s.PP)(this.disabled?s.qy` <slot @slotchange="${this.handleSlotChange}" name="${n}"></slot> `:s.qy` <slot @slotchange="${this.handleSlotChange}" name="${i}"></slot>`)}${o}`}panByDomainDelta(t){if(this._isRulerDragging)return;const e=this.viewbox,i=this._vertical?e.y:e.x,s=this._vertical?-t:t;if(0===i[0]&&1===i[1])return;let n=i[0]-s,r=i[1]-s;const o=this._verticalOr((()=>this._bounds.y),(()=>this._bounds.x));n<o[0]?(n=o[0],r=n+(i[1]-i[0])):r>o[1]&&(r=o[1],n=r-(i[1]-i[0]));const a=[n,r];this.dispatchEvent(new CustomEvent("pan",{bubbles:!0,detail:Object.assign(Object.assign(Object.assign(Object.assign({},this.scaleZoomMap),!this._vertical&&{x:a}),this._vertical&&{y:a}),{viewbox:this._vertical?Object.assign(Object.assign({},e),{y:a}):Object.assign(Object.assign({},e),{x:a})})}))}updateTrackingState(t){const e=this._getRulerDataPoints();this._trackingState=Object.assign(Object.assign(Object.assign({},this._trackingState),{target:this,mouse:this._mouse,leftRulerPosition:this._firstRulerPosition,rightRulerPosition:this._lastRulerPosition,leftRulerDataPoint:e.firstRulerDataPoint,rightRulerDataPoint:e.lastRulerDataPoint,zoomedDomain:e.zoomedDomain}),t),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:this._trackingState}))}_getRulerDataPoints(t){return this._verticalOr((()=>{var e,i,s,n,r,o,a,l,h,c;t&&(this._startPoint=t.clientY);const d=null===(i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleY])||void 0===i?void 0:i.scale,u=_h(this._firstRulerPosition,this.allDataElements,null!==(n=null===(s=this._container)||void 0===s?void 0:s.clientHeight)&&void 0!==n?n:0,this.scaleY,d),p=_h(this._lastRulerPosition,this.allDataElements,null!==(o=null===(r=this._container)||void 0===r?void 0:r.clientHeight)&&void 0!==o?o:0,this.scaleY,d),f=bh(this._firstRulerPosition,this.allDataElements,null!==(l=null===(a=this._container)||void 0===a?void 0:a.clientHeight)&&void 0!==l?l:0,this.scaleY,d),g=bh(this._lastRulerPosition,this.allDataElements,null!==(c=null===(h=this._container)||void 0===h?void 0:h.clientHeight)&&void 0!==c?c:0,this.scaleY,d);return{firstRulerDataPoint:null===u||void 0===u?void 0:u.y,lastRulerDataPoint:null===p||void 0===p?void 0:p.y,zoomedDomain:{start:f,end:g}}}),(()=>{var e,i,s,n,r,o,a,l,h,c;t&&(this._startPoint=t.clientX);const d=null===(i=null===(e=this.scaleMap)||void 0===e?void 0:e[this.scaleX])||void 0===i?void 0:i.scale,u=_h(this._firstRulerPosition,this.allDataElements,null!==(n=null===(s=this._container)||void 0===s?void 0:s.clientWidth)&&void 0!==n?n:0,this.scaleX,d),p=_h(this._lastRulerPosition,this.allDataElements,null!==(o=null===(r=this._container)||void 0===r?void 0:r.clientWidth)&&void 0!==o?o:0,this.scaleX,d),f=bh(this._firstRulerPosition,this.allDataElements,null!==(l=null===(a=this._container)||void 0===a?void 0:a.clientWidth)&&void 0!==l?l:0,this.scaleX,d),g=bh(this._lastRulerPosition,this.allDataElements,null!==(c=null===(h=this._container)||void 0===h?void 0:h.clientWidth)&&void 0!==c?c:0,this.scaleX,d);return{firstRulerDataPoint:null===u||void 0===u?void 0:u.x,lastRulerDataPoint:null===p||void 0===p?void 0:p.x,zoomedDomain:{start:f,end:g}}}))}};Eh([(0,s.MZ)({type:Object,attribute:!1}),Dh("design:type",Object)],Ih.prototype,"domainBounds",void 0),Eh([(0,s.MZ)({type:Number}),Dh("design:type",Object)],Ih.prototype,"height",void 0),Eh([(0,s.MZ)({type:Number,attribute:"ruler-width"}),Dh("design:type",Number)],Ih.prototype,"rulerWidth",void 0),Eh([(0,s.MZ)({type:Boolean,reflect:!0,converter:s.Bs}),Dh("design:type",Object)],Ih.prototype,"disabled",void 0),Eh([(0,s.MZ)({type:Boolean,reflect:!0,converter:s.Bs}),Dh("design:type",Boolean)],Ih.prototype,"tooltips",void 0),Eh([(0,s.MZ)({type:String,attribute:"bg-color"}),Dh("design:type",String)],Ih.prototype,"bgColor",void 0),Eh([(0,s.MZ)({type:String,attribute:"left-label"}),Dh("design:type",String)],Ih.prototype,"leftLabel",void 0),Eh([(0,s.MZ)({type:String,attribute:"right-label"}),Dh("design:type",String)],Ih.prototype,"rightLabel",void 0),Eh([(0,s.MZ)({type:Object,reflect:!1,attribute:!1}),Dh("design:type",Object),Dh("design:paramtypes",[Object])],Ih.prototype,"dataFormatter",null),Eh([(0,s.wk)(),Dh("design:type",Object)],Ih.prototype,"_isBarDragging",void 0),Eh([(0,s.wk)(),Dh("design:type",Object)],Ih.prototype,"_isRulerDragging",void 0),Eh([(0,s.wk)(),Dh("design:type",Number)],Ih.prototype,"_distanceBetweenRulers",void 0),Eh([(0,s.P)('[class*="-container"]'),Dh("design:type",HTMLElement)],Ih.prototype,"_container",void 0),Eh([(0,s.P)('[class*="-tooltip-left"]'),Dh("design:type",HTMLElement)],Ih.prototype,"_tooltipLeft",void 0),Eh([(0,s.P)('[class*="-tooltip-right"]'),Dh("design:type",HTMLElement)],Ih.prototype,"_tooltipRight",void 0),Eh([(0,s.wk)(),Dh("design:type",Boolean)],Ih.prototype,"_vertical",void 0),Ih=Ah=Eh([(0,s.eV)({tagName:(0,g.o)("window-scroll"),styles:t=>{const{root:e,child:i,is:n}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: 100%;
                height: 100%;
            }

            ${e} {
                width: 100%;
                height: 100%;
            }

            ${n("!vertical")} {
                padding: 0 var(--windowscroll-root-padding, 0) 0 var(--windowscroll-root-padding, 0);
            }

            ${n("vertical")} {
                padding: var(--windowscroll-root-padding, 0) 0 var(--windowscroll-root-padding, 0) 0;
            }

            ${i("container")} {
                position: relative;
                background-color: var(--windowscroll-container-bg-color, var(--color-secondary-1, #ddd));
                user-select: none;
            }

            ${n("!vertical")} ${i("container")} {
                width: 100%;
                height: var(--windowscroll-container-height, 100%);
            }

            ${n("vertical")} ${i("container")} {
                width: var(--windowscroll-container-height, 100%);
                height: 100%;
            }

            ${i("content")} {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }

            ${n("!vertical")} ${i("content")} {
                margin-left: var(--windowscroll-content-margin, 0);
                margin-right: var(--windowscroll-content-margin, 0);
            }

            ${n("vertical")} ${i("content")} {
                margin-top: var(--windowscroll-content-margin, 0);
                margin-bottom: var(--windowscroll-content-margin, 0);
            }

            ${i("placeholder")} {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1;
            }

            ${n("!vertical")} ${i("placeholder")} {
                margin-left: var(--windowscroll-content-margin, 0);
                margin-right: var(--windowscroll-content-margin, 0);
            }

            ${n("vertical")} ${i("placeholder")} {
                margin-top: var(--windowscroll-content-margin, 0);
                margin-bottom: var(--windowscroll-content-margin, 0);
            }

            ${i("bar")} {
                position: absolute;
                cursor: move;
                z-index: 2;
            }

            ${n("!vertical")} ${i("bar")} {
                height: 100%;
                width: var(--windowscroll-bar-width, 100%);
                transform: translate(var(--windowscroll-bar-pos, 0), 0);
            }

            ${n("vertical")} ${i("bar")} {
                height: var(--windowscroll-bar-width, 100%);
                width: 100%;
                transform: translate(0, var(--windowscroll-bar-pos, 0));
            }

            ${i("ruler")} {
                position: absolute;
                z-index: 3;
            }

            ${n("!vertical")} ${i("ruler")} {
                height: 100%;
                width: var(--windowscroll-ruler-width, 10px);
                cursor: ew-resize;
            }

            ${n("vertical")} ${i("ruler")} {
                height: var(--windowscroll-ruler-width, 10px);
                width: 100%;
                cursor: ns-resize;
            }

            ${n("!vertical")} ${i("left-ruler")} {
                transform: translate(var(--windowscroll-left-ruler-pos, 0), 0);
            }

            ${n("vertical")} ${i("left-ruler")} {
                transform: translate(0, var(--windowscroll-left-ruler-pos, 0));
            }

            ${n("!vertical")} ${i("right-ruler")} {
                transform: translate(var(--windowscroll-right-ruler-pos, 0), 0);
            }

            ${n("vertical")} ${i("right-ruler")} {
                transform: translate(0, var(--windowscroll-right-ruler-pos, 0));
            }

            ${i("default-bar")} {
                background-color: var(--color-tertiary-8);
                opacity: 0.1;
                width: 100%;
                height: 100%;
            }

            ${n("!disabled")} ${i("default-bar")}:hover {
                opacity: 0.2;
            }

            ${n("disabled")} ${i("default-bar")} {
                opacity: 0.2;
                cursor: default;
            }

            ${i("default-ruler")} {
                display: flex;
                flex-direction: column;
                justify-content: center;
                font-size: var(--windowscroll-ruler-width, 10px);
                height: 100%;
                color: var(--color-primary-2);
                background-color: var(--color-tertiary-8);
            }

            ${n("!disabled")} ${i("default-ruler")}:hover {
                box-shadow: inset 0 0 0 1000px rgba(0, 0, 0, 0.1);
            }

            ${n("disabled")} ${i("default-ruler")} {
                height: 100%;
                opacity: 0.7;
                background-color: var(--color-secondary-4);
                border: none;
                cursor: default;
            }

            ${i("labels")} {
                display: flex;
                flex-direction: row;
                font-size: 12px;
                color: var(--color-primary-3);
                line-height: 12px;
                padding-bottom: 4px;
            }

            ${i("left-label")} {
                flex: 1;
            }

            ${i("right-label")} {
                flex: 1;
                text-align: end;
            }

            ${i("tooltip")} {
                position: absolute;
                top: -40px;
                z-index: 4;

                width: fit-content;
                height: auto;
                display: none;
                flex-direction: column;
                overflow: hidden;
                transition: top 0.125s ease-in-out;
            }

            ${i("tooltip-left")} {
                left: var(--windowscroll-left-tooltip-pos, 0);
            }

            ${i("tooltip-right")} {
                left: unset;
                right: calc(100% + var(--windowscroll-right-tooltip-pos, 10px));
            }

            ${n("dragging")} ${i("tooltip")} {
                display: flex;
            }

            ${n("high")} ${i("tooltip-left")} {
                top: -70px;
            }

            ${i("tooltip")} ${i("tooltip-content")} {
                position: relative;
                display: flex;
                align-items: center;
                padding-left: 4px;
                background-color: black;
                height: 24px;
                color: white;
                font-size: smaller;
            }

            ${i("tooltip-icon")} {
                margin-right: 10px;
                font-size: 16px;
            }

            ${i("tooltip-data")} {
                font-size: 14px;
                white-space: nowrap;
                margin-right: 8px;
            }

            ${i("tooltip-effect")} {
                position: relative;
                height: 37px;
                width: auto;
                z-index: -1;
                top: -30px;
                transition: top 0.125s ease-in-out;
            }

            ${i("tooltip-left")} ${i("tooltip-effect")} {
                left: calc(-1 * var(--windowscroll-left-tooltip-pos, 0));
            }

            ${i("tooltip-right")} ${i("tooltip-effect")} {
                left: calc(100% + var(--windowscroll-right-tooltip-pos, -8));
            }

            ${n("high")} ${i("tooltip-left")} ${i("tooltip-effect")} {
                top: 0;
            }
        `]},version:n.r}),Dh("design:paramtypes",[])],Ih);const Lh=t=>{let{xPosition:e,plotData:i,pixelProximityThreshold:s,midpoint:n}=t;const r=Mh(e,i,{interpolateFn:ks,pixelProximityThreshold:s,midpoint:n}),o=Mh(e+s,i,{pixelProximityThreshold:s,midpoint:n}),a=i.map((t=>{const[e]=t.scales;return t.data.flat().map((t=>{const i=e(t.x);return[i-s,i+s]}))})),l=r.map(((t,e)=>{const[i]=t.scales,s=a[e].some((e=>{let[s,n]=e;const r=i(t.x);return r>=s&&r<=n}));return Object.assign(Object.assign({},t),{highlighted:s})}));return{interpolated:l,exact:o}};var zh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},jh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Uh=class extends(q((0,v.cm)((0,V.c)((0,o.ID)(s.OC))))){get allFilteredData(){var t,e;return null!==(e=null===(t=this.allDataElements)||void 0===t?void 0:t.filter((t=>t.tagName.endsWith(this.filterDataByTag))).map((t=>({scales:t.getScales(),data:t.plotData}))))&&void 0!==e?e:[]}get isCreated(){return 1===this.data.length}constructor(){super(),this.color="black",this.width=2,this.hidden=!1,this.disabled=!1,this.emitMetadata=!1,this.pixelProximityThreshold=10,this.filterDataByTag="SVG-LINE",this.cursorPendingOpacity="0.4",this.midpoint=!1,this.dragState=0,this.startDragPosition=null,this._mouse=[0,0],this._lastMouseMoveEvent=null,this._animationFrameRequest=null,this._isRootElementInterationStarted=!1,this._lockPlacement=!1,this._renderRulerText=t=>{var e,i,s;return t?null!==(s=null===(i=null===(e=this.config)||void 0===e?void 0:e.rulerTextFormatter)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:t:""},this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handlePlaceTracker=this._handlePlaceTracker.bind(this),this._handleMouseLeave=this._handleMouseLeave.bind(this),this._handleCursorMouseMove=this._handleCursorMouseMove.bind(this)}render(){var t,e;if(!this.size||!this.getScales()||this.hidden)return s.s6;const[i,n]=this.size,[r]=this.getScales(),[o,a]=(0,s.Yh)(this.tagName.toLowerCase(),{}),l=(null===(t=this.config)||void 0===t?void 0:t.showDatapoints)?this._renderDatapoints():s.s6,h=(null===(e=this.config)||void 0===e?void 0:e.showTooltips)?this._renderTooltips():s.s6;return s.qy` <div
            @mousedown=${this._handleRootMouseDown}
            @mouseup=${this._handleRootMouseUp}
            width=${i}
            height=${n}
            class="${a} container"
        >
            ${this._renderCursor(i,n)} ${this._renderTracker(o,r,n)}
            ${l}${h}
            <slot></slot>
        </div>`}updated(t){t.has("viewbox")&&this.isCreated&&this._dispatchMetadata()}disconnectedCallback(){var t,e,i;null===(t=this.interactionTarget)||void 0===t||t.removeEventListener("click",this._handlePlaceTracker),null===(e=this.interactionTarget)||void 0===e||e.removeEventListener("mouseleave",this._handleMouseLeave),null===(i=this.interactionTarget)||void 0===i||i.removeEventListener("mousemove",this._handleCursorMouseMove),super.disconnectedCallback()}firstUpdated(t){this.interactionTarget&&(this.interactionTarget.addEventListener("click",this._handlePlaceTracker),this.interactionTarget.addEventListener("mouseleave",this._handleMouseLeave),this.interactionTarget.addEventListener("mousemove",this._handleCursorMouseMove))}willUpdate(t){super.willUpdate(t),(t.has("allDataElements")||t.has("scaleMap")||t.has("data"))&&this.allDataElements&&this.getScales()&&this.viewbox&&this.data&&this.isCreated&&this._dispatchMetadata()}_renderDatapoints(){var t,e,i;if(null==this.data[0])return s.s6;const n=null===(i=null===(e=null===(t=this._metadata)||void 0===t?void 0:t.ySlice)||void 0===e?void 0:e.positions)||void 0===i?void 0:i.map(((t,e)=>{var i,n,r,o;const{x:a,y:l}=t;return s.qy`
                <div
                    class="data-point"
                    style="--data-point-x: ${a}px;
                        --data-point-y: ${l}px;
                        --data-point-color: ${null!==(o=null===(r=null===(n=null===(i=this.config)||void 0===i?void 0:i.dataSerie)||void 0===n?void 0:n[e])||void 0===r?void 0:r.color)&&void 0!==o?o:"black"};"
                ></div>
            `}));return s.qy`${n}`}_renderTooltips(){if(null==this.data[0])return s.s6;const t=this._getSortedPositions();let e=Number.POSITIVE_INFINITY;return t.map((t=>{let{x:i,y:n,index:r}=t;const o=this._getTooltipData(r);if(!o)return s.s6;const a=this._calculateAdjustedY(n,e);return e=a,this._renderTooltipElement(Object.assign({x:i,y:a},o))}))}_getSortedPositions(){var t,e;return[...(null===(e=null===(t=this._metadata)||void 0===t?void 0:t.ySlice)||void 0===e?void 0:e.positions)||[]].map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))).sort(((t,e)=>t.y-e.y))}_getTooltipData(t){var e,i,n,r,o,a,l,h,c,d,u;const p=null===(e=this._metadata)||void 0===e?void 0:e.ySlice.exact[t];if(!(null===p||void 0===p?void 0:p.y))return null;const f=(null===(i=this.config)||void 0===i?void 0:i.showTooltipLegend)?s.qy` <div class="tooltip-legend"></div>`:s.s6,g=(null===(o=null===(r=null===(n=this.config)||void 0===n?void 0:n.dataSerie)||void 0===r?void 0:r[t])||void 0===o?void 0:o.dataFormatter)||(t=>t),v=(null===(h=null===(l=null===(a=this.config)||void 0===a?void 0:a.dataSerie)||void 0===l?void 0:l[t])||void 0===h?void 0:h.color)||"black",y=(null===(u=null===(d=null===(c=this.config)||void 0===c?void 0:c.dataSerie)||void 0===d?void 0:d[t])||void 0===u?void 0:u.unit)||"";return{value:g(p.y),legend:f,color:v,unit:y}}_calculateAdjustedY(t,e){return e===Number.POSITIVE_INFINITY||t>e+26?t:e+26}_renderTooltipElement(t){let{x:e,y:i,value:n,legend:r,color:o,unit:a}=t;const l=!(!this.size||!e)&&e+110+16>this.size[0],h=l?"calc(-110px - 16px)":"16px",c="tooltip"+(l?" tooltip-flip":"");return s.qy`
            <div
                class="${c}"
                style="--data-point-x: ${e}px;
                   --data-point-y: ${i}px;
                   --data-point-color: ${o};
                   --tooltip-left: ${h};"
            >
                ${r}
                <div class="tooltip-data">
                    <div class="tooltip-value">${n}</div>
                    <div class="tooltip-unit">${a}</div>
                </div>
            </div>
        `}_renderCursor(t,e){var i;if(this.isCreated)return s.s6;const[n]=this._mouse,r=`M${n} 0 V${e}`,o=this.isCreated?1:parseFloat(this.cursorPendingOpacity),a=(0,s.Wy)({display:"flex",flexDirection:"column",opacity:String(o)}),l=(0,s.Wy)({position:"absolute",display:"flex",flexDirection:"column",height:`${e}px`,transform:`translateX(${n}px)`,width:`${t}px`,pointerEvents:"none",opacity:String(o)}),h=(null===(i=this.config)||void 0===i?void 0:i.showRulerText)?s.qy` <div class="ruler-cursor-text">${this._renderRulerText(this._currentX)}</div> `:s.s6;return s.qy`
            <svg width=${t} height=${e} class="hover-cursor" style=${a}>
                <path stroke=${this.color} stroke-width=${this.width} d=${r} />
            </svg>
            <div style=${l}>
                ${h}
                <slot name="time-tracker-cursor"></slot>
            </div>
        `}_renderTracker(t,e,i){var n;if(null==this.data[0])return s.s6;const r=this.data[0],o=e(r),a=this.isCreated,l=(0,s.Wy)({transform:`translateX(${o-this.width/2}px)`,width:`${this.width}px`,backgroundColor:this.color}),h=(0,s.Wy)({position:"absolute",display:"flex",flexDirection:"column",height:`${i}px`,width:"0px",pointerEvents:"none"}),c=(null===(n=this.config)||void 0===n?void 0:n.showRulerText)?s.qy` <div class="ruler-tracker-text">${this._renderRulerText(r)}</div> `:s.s6;return s.qy` <div
            class="tracker-item ${t}"
            style=${l}
            @mousedown="${t=>this._handleMouseDown(t,r)}"
        >
            ${a?s.qy` <div style=${h}>
                      ${c}
                      <slot name="time-tracker-ruler"></slot>
                  </div>`:s.s6}
        </div>`}_updateDataX(t){this.data[0]=t,this._dispatchChange(),this._dispatchMove(),this._dispatchMetadata()}_handleCursorMouseMove(t){var e;if(!this.interactionTarget||!this.getScales())return;const i=null!==(e=this.interactionTarget.getBoundingClientRect())&&void 0!==e?e:kh;this._mouse=[t.clientX-i.left,0],this._dispatchMove()}_handleRootMouseDown(t){if(!this.isCreated)return;if(null==t.composedPath().find((t=>{var e;return null===(e=null===t||void 0===t?void 0:t.classList)||void 0===e?void 0:e.contains("tracker-item")})))return this._isRootElementInterationStarted=!0,this._outMouseX=t.clientX,void(this._outMouseY=t.clientY);this._lockPlacement=!1,this._isRootElementInterationStarted=!1}_handleRootMouseUp(t){this.isCreated&&this._isRootElementInterationStarted&&(this._outMouseX===t.clientX&&this._outMouseY===t.clientY?(this._placeTracker(t),this._lockPlacement=!1,this._isRootElementInterationStarted=!1):this._lockPlacement=!0)}_placeTracker(t){var e;if(!this.interactionTarget||this.disabled)return;const i=this.interactionTarget.getBoundingClientRect(),[s,n]=null!==(e=this.getScales())&&void 0!==e?e:[];if(!s||!n)return;const r=s.invert(t.clientX-i.left);this.startDragPosition=r,this.dragState=r,this._updateDataX(r)}_handlePlaceTracker(t){this._lockPlacement||this._placeTracker(t)}_handleMouseDown(t,e){var i,s,n;if(t.stopPropagation(),this.disabled)return;const[r,o]=null!==(i=this.getScales())&&void 0!==i?i:[];r&&o&&(this.dragState=e,this.startDragPosition=r.invert(t.clientX),this._dispatchDrag("drag-start"),null===(s=this.interactionTarget)||void 0===s||s.addEventListener("mousemove",this._handleMouseMove),null===(n=this.interactionTarget)||void 0===n||n.addEventListener("mouseup",this._handleMouseUp,{once:!0}))}_handleMouseMove(t){t.stopPropagation(),this._lastMouseMoveEvent=t,this._scheduleMouseMoveUpdate()}_handleMouseMoveDeferred(t){if(null==this.dragState||null==this.startDragPosition||!this.interactionTarget)return;const[e]=this.getScales();if(!e)return;const i=e.invert(t.clientX),s=i-this.startDragPosition,n=this.dragState+s;this.dragState=n,this.startDragPosition=i,this._updateDataX(n),this._dispatchDrag("drag")}_handleMouseUp(){var t,e;this._dispatchDrag("drag-end"),this.dragState=null,this.startDragPosition=null,null===(t=this.interactionTarget)||void 0===t||t.removeEventListener("mousemove",this._handleMouseMove),null===(e=this.interactionTarget)||void 0===e||e.removeEventListener("mouseup",this._handleMouseUp)}_handleMouseLeave(){var t,e;this._dispatchDrag("drag-end"),null===(t=this.interactionTarget)||void 0===t||t.removeEventListener("mousemove",this._handleMouseMove),null===(e=this.interactionTarget)||void 0===e||e.removeEventListener("mouseup",this._handleMouseUp),this._dispatchMetadata()}_dispatchDrag(t){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{target:this,mouse:this._mouse,positionX:this.dragState}}))}_dispatchMove(){const t=this.getScales();if(!t)return;const[e]=t;this._currentX=e.invert(this._mouse[0]),this.dispatchEvent(new CustomEvent("cursor-move",{detail:{mouseX:this._mouse[0],dataX:this._currentX}}))}_dispatchChange(){this.dispatchEvent(new CustomEvent("change",{detail:this.data})),this.requestUpdate("data")}_dispatchMetadata(){var t,e;if(!this.getScales()||!this.interactionTarget)return;const i=(null!==(t=this.interactionTarget.getBoundingClientRect())&&void 0!==t?t:kh).height,[s]=this.getScales();if(!s)return;const n=null!==(e=this.data[0])&&void 0!==e?e:0,{interpolated:r,exact:o}=Lh({xPosition:s(n),pixelProximityThreshold:this.pixelProximityThreshold,plotData:this.allFilteredData,midpoint:this.midpoint}),a=r.map((t=>{const[e,s]=t.scales;return{x:null!=t.x?e(t.x):null,y:null!=t.y?s(t.y)-i:null}}));this._metadata={positionX:s(n),dataX:n,ySlice:{positions:a,exact:o,interpolated:r}},this.dispatchEvent(new CustomEvent("metadata",{detail:this._metadata}))}_scheduleMouseMoveUpdate(){this._animationFrameRequest||(this._animationFrameRequest=requestAnimationFrame((()=>{this._lastMouseMoveEvent&&(this._handleMouseMoveDeferred(this._lastMouseMoveEvent),this._lastMouseMoveEvent=null),this._animationFrameRequest=null})))}};zh([(0,s.MZ)({type:String}),jh("design:type",Object)],Uh.prototype,"color",void 0),zh([(0,s.MZ)({type:Number}),jh("design:type",Object)],Uh.prototype,"width",void 0),zh([(0,s.MZ)({type:Boolean}),jh("design:type",Object)],Uh.prototype,"hidden",void 0),zh([(0,s.MZ)({type:Boolean}),jh("design:type",Object)],Uh.prototype,"disabled",void 0),zh([(0,s.MZ)({type:Boolean}),jh("design:type",Object)],Uh.prototype,"emitMetadata",void 0),zh([(0,s.MZ)({type:Number}),jh("design:type",Object)],Uh.prototype,"pixelProximityThreshold",void 0),zh([(0,s.MZ)({type:String}),jh("design:type",Object)],Uh.prototype,"filterDataByTag",void 0),zh([(0,s.MZ)({type:String}),jh("design:type",Object)],Uh.prototype,"cursorPendingOpacity",void 0),zh([(0,s.MZ)({type:Boolean}),jh("design:type",Object)],Uh.prototype,"midpoint",void 0),zh([(0,s.MZ)({type:Object}),jh("design:type",Object)],Uh.prototype,"config",void 0),zh([(0,s.wk)(),jh("design:type",Object)],Uh.prototype,"dragState",void 0),zh([(0,s.wk)(),jh("design:type",Object)],Uh.prototype,"startDragPosition",void 0),zh([(0,s.wk)(),jh("design:type",Array)],Uh.prototype,"_mouse",void 0),zh([(0,s.wk)(),jh("design:type",Number)],Uh.prototype,"_currentX",void 0),zh([(0,s.wk)(),jh("design:type",Object)],Uh.prototype,"_metadata",void 0),Uh=zh([(0,s.eV)({tagName:(0,g.o)("time-tracker-cursor"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: block;
                width: 100%;
                height: 100%;
                overflow: hidden;
                z-index: 9999;
            }

            ${e} {
                width: 100%;
                height: 100%;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }

            .container {
                position: relative;
            }

            .hover-cursor {
                pointer-events: none;
                position: absolute;
            }

            .tracker-item {
                cursor: grab;
                position: absolute;
                z-index: 11;
                height: 100%;
            }

            .data-point {
                position: absolute;
                left: -5px;
                bottom: -5px;
                z-index: 12;
                border-radius: 50%;
                transform: translate(var(--data-point-x, 0), var(--data-point-y, 0));
                width: 10px;
                height: 10px;
                background-color: var(--data-point-color, black);
                display: flex;
                opacity: 0.75;
            }

            .tooltip {
                position: absolute;
                font-family:
                    Roboto,
                    Arial,
                    Open Sans,
                    Helvetica,
                    sans-serif;

                left: 16px;
                transition: 0s left 0.25s ease;

                bottom: -12px;
                transform: translate(var(--data-point-x, 0), var(--data-point-y, 0));
                display: flex;
                background-color: #252525;
                color: white;
                align-items: center;
                justify-content: flex-start;
                width: 110px;
                z-index: 20;
                height: 24px;
            }

            .tooltip-flip {
                left: calc(-110px - 16px);
                justify-content: flex-end;
            }

            .tooltip-legend {
                width: 12px;
                height: 100%;
                background-color: var(--data-point-color, black);
                flex: none;
            }

            .tooltip-flip .tooltip-legend {
                order: 2;
            }

            .tooltip-data {
                display: flex;
                margin-left: 8px;
                margin-right: 8px;
                gap: 4px;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
            }

            .tooltip-value {
                font-size: 16px;
                font-weight: 600;
                flex: 1;
            }

            .tooltip-unit {
                font-size: 12px;
                font-weight: 400;
                line-height: 13.8px;
                flex: 1;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
            }

            .ruler-tracker-text {
                height: 20px;
                padding: 2px 8px;
                margin-top: auto;
                width: max-content;
            }

            .ruler-cursor-text {
                height: 20px;
                padding: 2px 8px;
                margin-top: auto;
                width: max-content;
            }
        `]},version:n.r}),jh("design:paramtypes",[])],Uh);var Bh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Nh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Fh=class extends((0,V.c)((0,o.ID)(s.OC))){constructor(){super(...arguments),this.color="grey",this.width=1,this.pixelProximityThreshold=10,this.filterDataByTag="SVG-LINE",this.outerVisibility=-1,this.midpoint=!1,this.state={position:{x:0,y:0},isVisible:!1},this._mouse=[0,0],this._lastEvent=null,this._isCursorInContainerArea=!1,this.handleDocumentMouseMove=t=>{this._container&&this.isMouseOverContainer(t.clientX,t.clientY)?(this._handleMouseMove(t),this._isCursorInContainerArea=!0):(this._isCursorInContainerArea&&this._handleMouseLeave(t),this._isCursorInContainerArea=!1)},this._callOrFallback=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return"function"===typeof t?t(...s):e()},this._getMonitorPosition=(t,e)=>{let{x:i,y:s}=t;var n;if("absolute"===(null===(n=this.config)||void 0===n?void 0:n.tooltipMonitorPosition)){const t=s+(42+24*e)-this.size[1],n=i+180-this.size[0];return{position:"absolute",left:n>0?i-n:i,top:t>0?s-t:s}}const r=this._container.getBoundingClientRect();return{position:"fixed",left:r.left+i,top:r.top+s}},this._renderDataPoints=(t,e)=>t.interpolated.map(((i,n)=>{var r,o;const[a,l]=i.scales,h=null!=i.x?a(i.x):null,c=null!=i.y?l(i.y)-this.size[1]:null,d=e.dataSerie?e.dataSerie.filter((t=>null!=t)).findIndex((e=>e.forId&&e.forId===t.plotData[n].id)):-1,u=d>-1?d:n,p=null===(r=e.dataSerie)||void 0===r?void 0:r[u];return p&&h&&c&&t.plotData[n].slot===this.slot?s.qy`
                          <div
                              class="data-point"
                              style=" --data-point-x: ${h}px;
                                        --data-point-y: ${c}px;
                                        --data-point-color: ${null!==(o=p.color)&&void 0!==o?o:"black"};"
                          ></div>
                      `:s.s6}))}get allFilteredData(){var t,e;return null!==(e=null===(t=this.allDataElements)||void 0===t?void 0:t.filter((t=>t.tagName.endsWith(this.filterDataByTag))).map((t=>{var e,i;return{scales:t.getScales(),data:t.plotData,slot:null!==(e=t.slot)&&void 0!==e?e:"",id:null!==(i=t.id)&&void 0!==i?i:""}})))&&void 0!==e?e:[]}connectedCallback(){super.connectedCallback(),document.addEventListener("mousemove",this.handleDocumentMouseMove)}disconnectedCallback(){document.removeEventListener("mousemove",this.handleDocumentMouseMove),super.disconnectedCallback()}isMouseOverContainer(t,e){const i=this._container.getBoundingClientRect();return t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom}render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{});return s.qy`
            <div class="${e} ${t} container">
                ${this._renderCursor()} ${this._renderInternalVisuals()}
                <slot></slot>
            </div>
        `}emitData(){const[t]=this._mouse,e=this._getDataPoints(t);this.dispatch(this._lastEvent,e,this._getXValue(t))}update(t){var e;if(super.update(t),t.has("config")&&this.config){this._config=Object.assign({},this.config),this._config.dataSerie=this.config.dataSerie?[...this.config.dataSerie]:[];let t=!1;this.config.tooltipMonitorHeadFormatter&&!this.config.tooltipMonitorHead&&(this._config.tooltipMonitorHead=[{group:0,row:[{color:"none",label:t=>{var e;return null===(e=this.config)||void 0===e?void 0:e.tooltipMonitorHeadFormatter(t)[0]},value:t=>{var e;return null===(e=this.config)||void 0===e?void 0:e.tooltipMonitorHeadFormatter(t)[1]}}]}],delete this._config.tooltipMonitorHeadFormatter),null===(e=this.config.dataSerie)||void 0===e||e.forEach(((e,i)=>{null!=e&&(e.unit&&(this._config.dataSerie[i].label=e.unit,delete this._config.dataSerie[i].unit,t=!0),e.dataFormatter&&(this._config.dataSerie[i].value=e.dataFormatter,delete this._config.dataSerie[i].dataFormatter,t=!0))})),t&&console.warn("DataCursor config with deprecated format:",this.config,"Should be changed to:",this._config)}}updated(t){super.updated(t),(t.has("allDataElements")||t.has("scaleMap")&&(0,H.O)(this.scaleMap,t.get("scaleMap")))&&this.allDataElements&&this.getScales()&&this.emitData()}_renderCursor(){var t;const[e,i]=null!==(t=this.size)&&void 0!==t?t:[0,0],n=`M${this.outerVisibility>-1?this.outerVisibility:this._mouse[0]} 0 V${i}`;return this.state.isVisible||this.outerVisibility>-1?s.qy` <svg width=${e} height=${i}>
                  <path stroke=${this.color} stroke-width=${this.width} d=${n} />
              </svg>`:s.s6}_renderInternalVisuals(){if(this.config&&(this.state.isVisible||this.outerVisibility>-1)){const t=this.config,e=this.outerVisibility>-1?this.outerVisibility:this._mouse[0],i=this._getXValue(e),n=this._getDataPoints(e),r=t.showTooltipMonitor&&this.state.isVisible?this._renderMonitor(n,t,i):s.s6,o=this.config.showDatapoints?this._renderDataPoints(n,t):s.s6;return s.qy`${o}${r}`}return s.s6}_renderMonitor(t,e,i){const{dataSerieCounter:n,headerCounter:r,innerHtml:o}=this._renderInnerMonitor(i,e,t),{position:a,left:l,top:h}=this._getMonitorPosition(this.state.position,n+r),c=1===r?o:s.qy` <div class="item-container">${o}</div>`;return s.qy` <div
            class="monitor"
            style=" --data-cursor-monitor-x: ${l}px;
                    --data-cursor-monitor-y: ${h}px;
                    --data-cursor-monitor-position: ${a};"
        >
            ${c}
        </div>`}_renderInnerMonitor(t,e,i){var n,r,o;let a=0,l=0;const h=1===(null===(n=this._config)||void 0===n?void 0:n.tooltipMonitorHead.length)&&1===(null===(r=this._config)||void 0===r?void 0:r.tooltipMonitorHead[0].row.length),c=null===(o=this._config)||void 0===o?void 0:o.tooltipMonitorHead.map(((n,r)=>{var o,c;const d=null!==(o=n.group)&&void 0!==o?o:r,u=n.row.map((e=>(++l,this._renderMonitorHead(e,t,a,h)))),p=null===(c=e.dataSerie)||void 0===c?void 0:c.filter((t=>{var e;return(null!==(e=null===t||void 0===t?void 0:t.forGroup)&&void 0!==e?e:0)===d})).map((t=>{const e=a;return++a,this._renderMonitorItem(t,i,e)}));return h?s.qy` <div class="single-group">${u}</div>
                      <div class="item-container">${p}</div>`:s.qy` ${u}${p}`}));return{dataSerieCounter:a,headerCounter:l,innerHtml:c}}_renderMonitorItem(t,e,i){var n,r,o,a,l;if(null!=t){if(t.forId){const s=null===(n=e.plotData)||void 0===n?void 0:n.findIndex((e=>e.id===t.forId));s>-1&&(i=s)}const h=null===(r=e.interpolated)||void 0===r?void 0:r[i],c=null===(o=e.exact)||void 0===o?void 0:o[i];return null==(null===h||void 0===h?void 0:h.y)?s.s6:s.qy`
                <div class="item-legend" style="--monitor-item-color:${null!==(a=t.color)&&void 0!==a?a:"none"};"></div>
                <div class="item-value${h.highlighted?" highlight":""}">
                    <div>${this._callOrFallback(t.value,(()=>{var t;return null===(t=h.y)||void 0===t?void 0:t.toFixed(2)}),h.y,c.y)}</div>
                </div>
                <div class="item-label">
                    <span style="direction: ltr;unicode-bidi: plaintext;">
                        ${null!==(l=this._callOrFallback(t.label,(()=>t.label),h.y,c.y))&&void 0!==l?l:""}
                    </span>
                </div>
            `}return s.s6}_renderMonitorHead(t,e,i,n){var r;const o=i>0?" head-group":"",a=n?s.qy` <div class="head-legend${o}" style="--monitor-item-color:${"none"};"></div>`:s.s6;return s.qy` <div class="head-legend${o}" style="--monitor-item-color:${null!==(r=t.color)&&void 0!==r?r:"none"};"></div>
            <div class="head-label${o}">
                ${"function"===typeof t.label?t.label(e):t.label}
            </div>
            ${a}
            <div class="head-value${o}">
                <span style="direction: ltr;unicode-bidi: plaintext;">
                    ${"function"===typeof t.value?t.value(e):t.value}
                </span>
            </div>`}_handleMouseMove(t){if(!this._container||!this.getScales())return;const e=this._container.getBoundingClientRect(),i=t.clientX-e.left,s=t.clientY-e.top;this._mouse=[i,s],this._lastEvent=t,this.state={position:{x:i,y:s},isVisible:!0},this.emitData()}_handleMouseLeave(t){this.state=Object.assign(Object.assign({},this.state),{isVisible:!1}),this.dispatch(t,{interpolated:[],exact:[]},-1)}dispatch(t,e,i){this.dispatchEvent(new CustomEvent("data",{bubbles:!0,detail:{event:t,target:this,mouse:this._mouse,data:e,xValue:i,isVisible:this.state.isVisible}}))}_getDataPoints(t){var e;const i=null!==(e=this.allFilteredData)&&void 0!==e?e:[],s=Lh({xPosition:t,pixelProximityThreshold:this.pixelProximityThreshold,plotData:i,midpoint:this.midpoint});return Object.assign(Object.assign({},s),{plotData:i})}_getXValue(t){const[e]=this.getScales();return e.invert(t)}};Bh([(0,s.MZ)({type:String}),Nh("design:type",Object)],Fh.prototype,"color",void 0),Bh([(0,s.MZ)({type:Number}),Nh("design:type",Object)],Fh.prototype,"width",void 0),Bh([(0,s.MZ)({type:Number}),Nh("design:type",Object)],Fh.prototype,"pixelProximityThreshold",void 0),Bh([(0,s.MZ)({type:String}),Nh("design:type",Object)],Fh.prototype,"filterDataByTag",void 0),Bh([(0,s.MZ)({type:Object,hasChanged:H.O,attribute:!1}),Nh("design:type",Object)],Fh.prototype,"config",void 0),Bh([(0,s.MZ)({type:Number,attribute:"outer-visibility",reflect:!1}),Nh("design:type",Object)],Fh.prototype,"outerVisibility",void 0),Bh([(0,s.MZ)({type:Boolean}),Nh("design:type",Object)],Fh.prototype,"midpoint",void 0),Bh([(0,s.wk)(),Nh("design:type",Object)],Fh.prototype,"state",void 0),Bh([(0,s.P)(".container"),Nh("design:type",Object)],Fh.prototype,"_container",void 0),Fh=Bh([(0,s.eV)({tagName:(0,g.o)("data-cursor"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: block;
                width: 100%;
                height: 100%;
                overflow: hidden;
                pointer-events: none;
            }

            ${e} {
                width: 100%;
                height: 100%;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }

            .data-point {
                position: absolute;
                left: -5px;
                bottom: -5px;
                z-index: 12;
                border-radius: 50%;
                transform: translate(var(--data-point-x, 0), var(--data-point-y, 0));
                width: 10px;
                height: 10px;
                background-color: var(--data-point-color, black);
                display: flex;
                opacity: 0.75;
            }

            .monitor {
                position: var(--data-cursor-monitor-position, fixed);
                top: 0;
                left: 16px;
                padding-top: var(--data-cursor-monitor-padding-top, 12px);
                padding-bottom: var(--data-cursor-monitor-padding-bottom, 12px);
                padding-right: var(--data-cursor-monitor-padding-right, 8px);
                z-index: var(--data-cursor-monitor-z-index, 10000);
                width: var(--data-cursor-monitor-width, auto);
                max-width: var(--data-cursor-monitor-max-width, 200px);
                min-width: var(--data-cursor-monitor-min-width, 140px);
                display: flex;
                flex-direction: column;
                row-gap: 1px;
                height: auto;
                pointer-events: none;
                color: var(--data-cursor-monitor-color, var(--color-primary-3));
                background-color: var(--data-cursor-monitor-background-color, var(--color-primary-2));
                border: var(--data-cursor-monitor-border, 1px solid rgba(0, 0, 0, 0.08));
                box-shadow: var(--data-cursor-monitor-box-shadow, 0 8px 16px 0 rgba(0, 0, 0, 0.06));
                transform: translate(var(--data-cursor-monitor-x), var(--data-cursor-monitor-y));
            }

            .monitor .head-legend {
                width: 4px;
                height: 22px;
                background-color: var(--monitor-item-color);
            }

            .head-group {
                margin-top: 8px;
            }

            .single-group {
                display: grid;
                grid-template-columns: 4px auto;
                column-gap: 8px;
                padding-bottom: 1px;
            }

            .monitor .head-label {
                text-align: var(--data-cursor-monitor-label-align, left);
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                align-content: center;
                font-weight: 400;
                font-size: 12px;
                color: rgba(112, 112, 112, 1);
            }

            .monitor .head-value {
                text-align: var(--data-cursor-monitor-value-align, left);
                align-content: center;
                font-weight: 700;
                font-size: 12px;
                color: var(--color-secondary-8);
                max-width: calc(var(--data-cursor-monitor-width, 180px) - 20px);

                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                direction: rtl;
                unicode-bidi: isolate;
            }

            .monitor .item-container {
                display: grid;
                grid-template-columns: 4px auto 1fr;
                row-gap: 1px;
                column-gap: 8px;
            }

            .monitor .item-legend {
                grid-column: 1;
                height: 22px;
                background-color: var(--monitor-item-color);
            }

            .monitor .item-value {
                grid-column: 2;
                text-align: var(--data-cursor-monitor-value-align, left);
                align-content: center;
                font-weight: 700;
                font-size: 14px;
                color: var(--data-cursor-monitor-value-color, var(--color-secondary-9));
                max-width: calc(var(--data-cursor-monitor-max-width, 180px) - 20px);
            }

            .monitor .highlight {
                color: var(--data-cursor-monitor-highlight-color, var(--color-primary-3));
            }

            .monitor .item-value > div {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .monitor .item-label {
                grid-column: 3;
                text-align: var(--data-cursor-monitor-label-align, left);

                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                direction: rtl;
                unicode-bidi: isolate;

                align-content: center;
                font-weight: 400;
                font-size: 12px;
                color: rgba(112, 112, 112, 1);
            }

            .monitor > .item-container:not(:last-child) {
                margin-bottom: 8px;
            }
        `]},version:n.r})],Fh);var Vh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Hh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Gh=class extends(q((0,V.c)((0,o.ID)(s.OC)))){get isRangeCreated(){return 2===this.data.length}get allFilteredData(){var t,e;return null!==(e=null===(t=this.allDataElements)||void 0===t?void 0:t.filter((t=>t.tagName.endsWith(this.filterDataByTag))).map((t=>({scales:t.getScales(),data:t.plotData}))))&&void 0!==e?e:[]}get containerBox(){var t,e;return null!==(e=null===(t=this._container)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==e?e:kh}constructor(){super(),this.cursorColor="grey",this.rulerColor="black",this.barBg="rgba(0, 0, 0, 0.1)",this.barPendingBg="rgba(0, 0, 0, 0.04)",this.cursorPendingOpacity=.4,this.width=2,this.disabled=!1,this.interpolatedMetadata=!1,this.filterDataByTag="SVG-LINE",this.pixelProximityThreshold=10,this.rangeYInRangeInvalidStrategy=Sh.RETURN_EMPTY,this.state={position:{x:0,y:0},isVisible:!1},this._mouse=[0,0],this._draggingIndex=null,this._draggingBar=!1,this._initialBarMouseOffset=null,this._lastMouseMoveEvent=null,this._animationFrameRequest=null,this._isCursorInContainerArea=!1,this._isCursorDirty=!1,this.handleDocumentMouseMove=t=>{this.disabled||(this._container&&this.isMouseOverContainer(t.clientX,t.clientY)?(this._lastMouseMoveEvent=t,this._isCursorInContainerArea=!0,this._isCursorDirty=!0,this._scheduleMouseMoveUpdate()):(this._lastMouseMoveEvent=t,this._scheduleMouseMoveUpdate(),this._isCursorInContainerArea=!1),this._isCursorInContainerArea||this._handleMouseLeave())},this.handleDocumentMouseUp=()=>{this.disabled||(this._draggingIndex=null,this._draggingBar=!1,this._initialBarMouseOffset=null)},this._handleMouseClick=this._handleMouseClick.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("mousemove",this.handleDocumentMouseMove),document.addEventListener("mouseup",this.handleDocumentMouseUp),document.addEventListener("click",this._handleMouseClick)}disconnectedCallback(){document.removeEventListener("mousemove",this.handleDocumentMouseMove),document.removeEventListener("mouseup",this.handleDocumentMouseUp),document.removeEventListener("click",this._handleMouseClick),super.disconnectedCallback()}willUpdate(t){super.willUpdate(t),(t.has("allDataElements")||t.has("scaleMap")||t.has("data"))&&this.allDataElements&&this.getScales()&&this.viewbox&&this.data&&this._emitChangeWithMetadata()}isMouseOverContainer(t,e){const{left:i,right:s,top:n,bottom:r}=this.containerBox;return t>=i&&t<=s&&e>=n&&e<=r}render(){var t;const[e,i]=(0,s.Yh)(this.tagName.toLowerCase(),{}),[n,r]=null!==(t=this.size)&&void 0!==t?t:[0,0];return s.qy`
            <div class="${i} ${e} container">
                ${this._renderCursor(n,r)} ${this._renderRulers()} ${this._renderBar()}
            </div>
        `}_renderBar(){if(!this.getScales()||0===this.data.length)return s.s6;const[t]=this.getScales(),e=this.data.map((e=>t(e)));let[i,n]=[Math.min(...e),Math.max(...e)];if(1===this.data.length){const t=this._mouse[0];[i,n]=[Math.min(i,t),Math.max(i,t)]}const r={transform:`translateX(${i}px)`,width:`${n-i}px`,backgroundColor:this.isRangeCreated?this.barBg:this.barPendingBg};return s.qy`
            <div class="bar" style=${(0,s.Wy)(r)} @mousedown="${this._handleBarMouseDown}">
                <slot name="bar"></slot>
            </div>
        `}_renderCursor(t,e){const[i]=this._mouse,n=`M${i} 0 V${e}`,r=this.isRangeCreated?1:this.cursorPendingOpacity,o=(0,s.Wy)({position:"absolute",display:this._isCursorDirty?"flex":"none",flexDirection:"column",height:`${e}px`,transform:`translateX(${i}px)`,width:`${t}px`,pointerEvents:"none",opacity:r}),a=(0,s.Wy)({display:this._isCursorDirty?"flex":"none",flexDirection:"column",opacity:r});return this.isRangeCreated?s.s6:s.qy`<svg width=${t} height=${e} class="hover-cursor" style=${a}>
                      <path stroke=${this.cursorColor} stroke-width=${this.width} d=${n} />
                  </svg>
                  <div style=${o}><slot name="range-cursor"></slot></div>`}_renderRulers(){if(!this.getScales())return;const[t]=this.getScales();return this.data.map(((e,i)=>{const n=(0,s.Wy)({transform:`translateX(${Number(t(e))-this.width/2}px)`,width:`${this.width}px`,backgroundColor:this.rulerColor});return s.qy`<div
                class="ruler-item"
                style=${n}
                @mousedown="${t=>this._handleMouseDown(t,i)}"
            >
                <slot name=${"ruler-"+i}></slot>
            </div>`}))}_scheduleMouseMoveUpdate(){this._animationFrameRequest||(this._animationFrameRequest=requestAnimationFrame((()=>{this._lastMouseMoveEvent&&(this._handleMouseMove(this._lastMouseMoveEvent),this._lastMouseMoveEvent=null),this._animationFrameRequest=null})))}_handleMouseMove(t){if(!this.getScales()||this.disabled)return;let e=t.clientX-this.containerBox.left;const i=t.clientY-this.containerBox.top,{left:s,right:n}=this.containerBox;e<0&&(e=0),e>n-s&&(e=n-s),this.state={position:{x:e,y:i},isVisible:!0};const[r]=this.getScales();this._mouse=[e,i];const o=r.range();if(null!==this._draggingIndex){const t=r.invert(Math.min(e,o[1]));this.data[this._draggingIndex]=t,this.dispatchEvent(new CustomEvent("change",{detail:this.data})),this._emitChangeWithMetadata(),this.requestUpdate()}if(this._draggingBar&&null!==this._initialBarMouseOffset){let t=e-this._initialBarMouseOffset;const[i,a]=this.data.map((t=>r(t))).sort(((t,e)=>t-e)),l=Math.min(o[1],n-s);i+t<0&&(t=-i),a+t>l&&(t=l-a),this.data=[r.invert(i+t),r.invert(a+t)],this.dispatchEvent(new CustomEvent("change",{detail:this.data})),this._initialBarMouseOffset=e,this._emitChangeWithMetadata(),this.requestUpdate()}this.dispatchEvent(new CustomEvent("cursor-move",{detail:{mouseX:e,dataX:r.invert(e)}}))}_handleMouseLeave(){this.disabled||(this.state=Object.assign(Object.assign({},this.state),{isVisible:!1}),this.dispatchEvent(new CustomEvent("cursor-leave")))}_handleMouseDown(t,e){t.stopPropagation(),this._draggingIndex=e}_handleMouseClick(t){if(!this.disabled&&(t.stopPropagation(),!this.isRangeCreated&&Array.isArray(this.data)&&this._container&&this.isMouseOverContainer(t.clientX,t.clientY))){const e=t.clientX-this.containerBox.left,[i]=this.getScales(),s=i.invert(e);this.data.push(s),this.dispatchEvent(new CustomEvent("change",{detail:this.data})),this._emitChangeWithMetadata(),this.requestUpdate()}}_handleBarMouseDown(t){!this._container||this.disabled||this.data.length<2||(t.stopPropagation(),this._draggingBar=!0,this._initialBarMouseOffset=t.clientX-this.containerBox.left)}_emitChangeWithMetadata(){var t;const e=this.allFilteredData,[i,s]=this.getScales(),[n,r]=null!==(t=this.data)&&void 0!==t?t:[0,0],o=this._getRulerData(n,i,e),a=this._getRulerData(r,i,e),l=this._calculateRulerPositions(o,i,s,this.containerBox.height),h=this._calculateRulerPositions(a,i,s,this.containerBox.height);this.dispatchEvent(new CustomEvent("metadata",{detail:{selected:Ch(e.map((t=>t.data.flat())),this.data,this.rangeYInRangeInvalidStrategy),cursors:[{positionX:i(n),dataX:n,ySlice:{data:o,positions:l}},{positionX:i(r),dataX:r,ySlice:{data:a,positions:h}}]}}))}_getRulerData(t,e,i){return this.interpolatedMetadata?Mh(e(t),i,{interpolateFn:ks,pixelProximityThreshold:this.pixelProximityThreshold}):Mh(e(t),i,{pixelProximityThreshold:this.pixelProximityThreshold})}_calculateRulerPositions(t,e,i,s){return t.map((t=>({x:null!=t.x?e(t.x):null,y:null!=t.y?i(t.y)-s:null})))}};Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"cursorColor",void 0),Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"rulerColor",void 0),Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"barBg",void 0),Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"barPendingBg",void 0),Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"cursorPendingOpacity",void 0),Vh([(0,s.MZ)({type:Number}),Hh("design:type",Object)],Gh.prototype,"width",void 0),Vh([(0,s.MZ)({type:Boolean}),Hh("design:type",Object)],Gh.prototype,"disabled",void 0),Vh([(0,s.MZ)({type:Boolean}),Hh("design:type",Object)],Gh.prototype,"interpolatedMetadata",void 0),Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"filterDataByTag",void 0),Vh([(0,s.MZ)({type:Number}),Hh("design:type",Object)],Gh.prototype,"pixelProximityThreshold",void 0),Vh([(0,s.MZ)({type:String}),Hh("design:type",Object)],Gh.prototype,"rangeYInRangeInvalidStrategy",void 0),Vh([(0,s.P)(".container"),Hh("design:type",Object)],Gh.prototype,"_container",void 0),Vh([(0,s.wk)(),Hh("design:type",Object)],Gh.prototype,"state",void 0),Gh=Vh([(0,s.eV)({tagName:(0,g.o)("range-cursor"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: block;
                width: 100%;
                height: 100%;
                overflow: hidden;
                z-index: 9999;
            }

            ${e} {
                width: 100%;
                height: 100%;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }

            .container {
                position: relative;
            }

            .hover-cursor {
                pointer-events: none;
                position: absolute;
            }

            .ruler-item {
                position: absolute;
                display: flex;
                flex-direction: column;
                height: 100%;
                z-index: 2;
                cursor: ew-resize;
            }

            .bar {
                position: absolute;
                height: 100%;
                z-index: 1;
                cursor: pointer;
            }
        `]},version:n.r}),Hh("design:paramtypes",[])],Gh);var Yh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Xh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Wh=class extends(q((0,V.c)((0,o.ID)(s.OC)))){constructor(){super(...arguments),this.activeLineIndex=-1,this.disableCursor=!1,this.filterDataByTag="SVG-LINE",this.pixelProximityThreshold=10,this.searchRadius=20,this.cursor=null}get containerBox(){var t,e;return null!==(e=null===(t=this._container)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==e?e:kh}get allFilteredData(){var t,e;return null!==(e=null===(t=this.allDataElements)||void 0===t?void 0:t.filter((t=>t.tagName.endsWith(this.filterDataByTag))).map((t=>({scales:t.getScales(),data:t.plotData}))))&&void 0!==e?e:[]}render(){var t;const[e,i]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales())return;const[n,r]=null!==(t=this.size)&&void 0!==t?t:[0,0];return s.qy`
            <div
                @mousemove=${this._handleContainerMouseOver}
                @mouseleave=${this._handleContainerMouseOut}
                width=${n}
                height=${r}
                class="container ${e} ${i}"
            >
                <slot></slot>
                ${this._renderHoverCursor()}
            </div>
        `}_renderHoverCursor(){if(!this.cursor)return s.s6;const{x:t,y:e}=this.cursor,i={position:"absolute",transform:`translate(${t}px, ${e}px)`};return this.disableCursor?s.s6:s.qy`
                  <div id="hover" @click=${t=>this._placeNoteAtClosestPoint(t)} style=${(0,s.Wy)(i)}>
                      <slot name="cursor"></slot>
                  </div>
              `}_getMetadata(t){const{height:e}=this.containerBox,[i]=this.getScales(),s=Mh(i(t),this.allFilteredData,{pixelProximityThreshold:this.pixelProximityThreshold}),n=s.map((t=>{const[i,s]=t.scales;return{x:null!=t.x?i(t.x):null,y:null!=t.y?s(t.y)-e:null}}));return{data:s,positions:n}}_handleContainerMouseOver(t){const e=this._buildPayload(t);if(null==e)return null!=this.cursor&&this.dispatchEvent(new CustomEvent("leave")),void(this.cursor=null);this.cursor={x:e.x,y:e.y,dx:e.scaleX(e.x),dy:e.scaleY(e.y),scaleX:e.scaleX,scaleY:e.scaleY,lineIndex:e.lineIndex},this.dispatchEvent(new CustomEvent("move",{detail:e}))}_handleContainerMouseOut(){this.cursor=null}_placeNoteAtClosestPoint(t){if(!this._container)return;const e=this._buildPayload(t);null!=e&&this.dispatchEvent(new CustomEvent("action",{detail:e}))}_buildPayload(t){const e=this._getClosestPoint(t);if(!e)return null;const i=this._getMetadata(e.x);return Object.assign(Object.assign({},e),{metadata:i})}_getClosestPoint(t){const[e,i]=this._getOffset(t),s=this.allFilteredData,n=-1!==this.activeLineIndex&&s.length>this.activeLineIndex?[s[this.activeLineIndex]]:s;let r=1/0,o=null;return n.forEach(((t,s)=>{let{scales:n,data:a}=t;const[l,h]=n,{flatData:c}=(t=>({dataIndex:t.reduce(((t,e)=>{var i;const s=null!==(i=t.slice(-1)[0])&&void 0!==i?i:0;return[...t,s+e.length]}),[]),flatData:t.flat(1)}))([a.flat()]);if(!c.length)return;const d=dl.from(c,(t=>l(t.x)),(t=>h(t.y))).find(e,i);if(-1===d)return;const u=c[d],p=l(u.x),f=h(u.y),g=e-p,v=i-f,y=Math.sqrt(g*g+v*v);y<r&&(r=y,o={x:l(u.x),y:h(u.y),dx:u.x,dy:u.y,scaleX:l,scaleY:h,lineIndex:s})})),!o||r>this.searchRadius?null:o}_getOffset(t){if(!this._container)return[0,0];const{left:e,top:i}=this.containerBox,{clientX:s,clientY:n}=t;return[s-e,n-i]}};Yh([(0,s.MZ)(),Xh("design:type",Object)],Wh.prototype,"activeLineIndex",void 0),Yh([(0,s.MZ)(),Xh("design:type",Object)],Wh.prototype,"disableCursor",void 0),Yh([(0,s.MZ)({type:String}),Xh("design:type",Object)],Wh.prototype,"filterDataByTag",void 0),Yh([(0,s.MZ)({type:Number}),Xh("design:type",Object)],Wh.prototype,"pixelProximityThreshold",void 0),Yh([(0,s.MZ)({type:Number}),Xh("design:type",Object)],Wh.prototype,"searchRadius",void 0),Yh([(0,s.wk)(),Xh("design:type",Object)],Wh.prototype,"cursor",void 0),Yh([(0,s.P)(".container"),Xh("design:type",Object)],Wh.prototype,"_container",void 0),Wh=Yh([(0,s.eV)({tagName:(0,g.o)("nodes"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            ${e} {
                width: 100%;
                height: 100%;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                width: auto;
                height: auto;
            }
        `]},version:n.r})],Wh);var qh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Zh=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Jh=class extends((0,o.ID)(s.OC)){render(){const[t,e]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales())return s.s6;const[i,n]=this.getScales(),r=null!=this.x&&null!=this.y,o=null!=this.dx&&null!=this.dy;if(!r&&!o)return console.warn(`<${(0,g.o)("node")}> requires either (x,y) or (dx,dy) to be defined. Nothing will be rendered.`),s.s6;const a={position:"absolute",transform:`translate(${r?this.x:i(this.dx)}px, ${r?this.y:n(this.dy)}px)`};return s.qy`
            <div class="${t} ${e} node" style=${(0,s.Wy)(a)}>
                <slot></slot>
            </div>
        `}};qh([(0,s.MZ)(),Zh("design:type",Object)],Jh.prototype,"x",void 0),qh([(0,s.MZ)(),Zh("design:type",Object)],Jh.prototype,"y",void 0),qh([(0,s.MZ)(),Zh("design:type",Object)],Jh.prototype,"dx",void 0),qh([(0,s.MZ)(),Zh("design:type",Object)],Jh.prototype,"dy",void 0),Jh=qh([(0,s.eV)({tagName:(0,g.o)("node"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                display: flex;
                width: fit-content;
                height: auto;
            }

            ${e} {
                width: auto;
                height: auto;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
            }

            .node {
                cursor: pointer;
            }
        `]},version:n.r})],Jh);class Kh{constructor(){this._hasUpdates=(t,e,i)=>{let s=this._hasShapeUpdates(t,e,i);return s=s||this._hasTransformUpdates(t,e.transform),s=s||this._hasFillUpdates(t,e.fill,null===i||void 0===i?void 0:i.fill),s=s||this._hasStrokeUpdates(t,e.stroke,null===i||void 0===i?void 0:i.stroke),s},this._hasShapeUpdates=(t,e,i)=>e.kind===ct.PATH?this._hasPathUpdates(t,e.path):e.kind===ct.CIRCLE?this._hasCircleUpdates(t,e.circle,null===i||void 0===i?void 0:i.circle):e.kind===ct.RECTANGLE?this._hasRectangleUpdates(t,e.rectangle,null===i||void 0===i?void 0:i.rectangle):e.kind===ct.SVG?this._hasSVGUpdates(t,e.svg):e.kind===ct.SPRITE&&this._hasSpriteUpdates(t,e.ref),this._hasPathUpdates=(t,e)=>{var i;return(null===e||void 0===e?void 0:e.svgPath)!==(null===(i=t.cachedPathOptions)||void 0===i?void 0:i.svgPath)},this._hasCircleUpdates=(t,e,i)=>{const s=void 0===(null===e||void 0===e?void 0:e.x)?null===i||void 0===i?void 0:i.x:e.x,n=void 0===(null===e||void 0===e?void 0:e.y)?null===i||void 0===i?void 0:i.y:e.y,r=void 0===(null===e||void 0===e?void 0:e.radius)?null===i||void 0===i?void 0:i.radius:e.radius,o=t.cachedCircleOptions;return!(s===(null===o||void 0===o?void 0:o.x)&&n===(null===o||void 0===o?void 0:o.y)&&r===(null===o||void 0===o?void 0:o.radius))},this._hasRectangleUpdates=(t,e,i)=>{const s=void 0===(null===e||void 0===e?void 0:e.x)?null===i||void 0===i?void 0:i.x:e.x,n=void 0===(null===e||void 0===e?void 0:e.y)?null===i||void 0===i?void 0:i.y:e.y,r=void 0===(null===e||void 0===e?void 0:e.width)?null===i||void 0===i?void 0:i.width:e.width,o=void 0===(null===e||void 0===e?void 0:e.height)?null===i||void 0===i?void 0:i.height:e.height,a=t.cachedRectangleOptions;return!(s===(null===a||void 0===a?void 0:a.x)&&n===(null===a||void 0===a?void 0:a.y)&&r===(null===a||void 0===a?void 0:a.width)&&o===(null===a||void 0===a?void 0:a.height))},this._hasSVGUpdates=(t,e)=>{if(!e)return!!t.cachedSVGOptions;const i=t.cachedSVGOptions;return e.svg===(null===i||void 0===i?void 0:i.svg)},this._hasRefUpdates=(t,e)=>{if(!e)return!!t.cachedSharedRefOptions;const{sharedId:i}=e,s=null===t||void 0===t?void 0:t.cachedSharedRefOptions;return i!==(null===s||void 0===s?void 0:s.sharedId)},this._hasTransformUpdates=(t,e)=>{const i=t.cachedTransformOptions;return(null===i||void 0===i?void 0:i.length)!==(null===e||void 0===e?void 0:e.length)||((null===i||void 0===i?void 0:i.some(((t,i)=>{const s=e[i];if(t.type!==s.type)return!0;if("scale"===t.type)return this._hasScaleUpdates(t,s);if("translate"===t.type)return this._hasTranslateUpdates(t,s);throw new Error("Unknown transform type")})))||!1)},this._hasSpriteUpdates=(t,e)=>{var i;return(null===(i=t.cachedSharedRefOptions)||void 0===i?void 0:i.sharedId)!==(null===e||void 0===e?void 0:e.sharedId)},this._hasFillUpdates=(t,e,i)=>{const s=void 0===(null===e||void 0===e?void 0:e.color)?null===i||void 0===i?void 0:i.color:e.color,n=void 0===(null===e||void 0===e?void 0:e.opacity)?null===i||void 0===i?void 0:i.opacity:e.opacity,r=t.cachedFillOptions;return!(s===(null===r||void 0===r?void 0:r.color)&&n===(null===r||void 0===r?void 0:r.opacity))},this._hasStrokeUpdates=(t,e,i)=>{const s=void 0===(null===e||void 0===e?void 0:e.color)?null===i||void 0===i?void 0:i.color:e.color,n=void 0===(null===e||void 0===e?void 0:e.opacity)?null===i||void 0===i?void 0:i.opacity:e.opacity,r=void 0===(null===e||void 0===e?void 0:e.width)?null===i||void 0===i?void 0:i.width:e.width,o=t.cachedStrokeOptions;return!(s===(null===o||void 0===o?void 0:o.color)&&n===(null===o||void 0===o?void 0:o.opacity)&&r===(null===o||void 0===o?void 0:o.width))},this._hasTranslateUpdates=(t,e)=>!(e.x===t.x&&(null===e||void 0===e?void 0:e.y)===t.y),this._hasScaleUpdates=(t,e)=>!(e.scaleX===t.scaleX&&e.scaleY===t.scaleY)}}var Qh=i(91478);const tc={extension:{type:Qh.Ag.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.all([i.e(1520),i.e(5372)]).then(i.bind(i,65372))}},ec={extension:{type:Qh.Ag.Environment,name:"webworker",priority:0},test:()=>"undefined"!==typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await Promise.all([i.e(1520),i.e(9929)]).then(i.bind(i,19929))}};i(41418),i(42833);var ic=i(33596),sc=i(44307),nc=i(23144),rc=i(15853);let oc,ac;async function lc(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==ac||(ac=await(async()=>{const e=nc.e.get().getNavigator().gpu;if(!e)return!1;try{const i=await e.requestAdapter(t);return await i.requestDevice(),!0}catch(i){return!1}})()),ac}const hc=["webgl","webgpu","canvas"];var cc=i(86675),dc=(i(99258),i(36628)),uc=i(4395),pc=i(27379),fc=i(44853),gc=i(41456);i(92604),i(10973);Qh.XO.add(tc,ec);var vc=i(24100),yc=i.n(vc),mc="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function xc(){var t=new mc(2);return mc!=Float32Array&&(t[0]=0,t[1]=0),t}function _c(t,e){var i=new mc(2);return i[0]=t,i[1]=e,i}function bc(t,e){var i=e[0]-t[0],s=e[1]-t[1];return Math.hypot(i,s)}function wc(t,e,i,s){var n=e[0],r=e[1];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){var t=xc()}();const Mc=[{t:.025446043828620736,weight:.06474248308443485},{t:.12923440720030277,weight:.13985269574463832},{t:.2970774243113014,weight:.19091502525255946},{t:.5,weight:.20897959183673434},{t:.7029225756886986,weight:.19091502525255946},{t:.8707655927996972,weight:.13985269574463832},{t:.9745539561713793,weight:.06474248308443485}];class Sc{get distance(){return this._distance||(this._distance=this._calculateDistance()),this._distance}get segments(){return this._segments||(this._segments=this._calculateSegments()),this._segments}get ratioPointLUT(){if(!this._ratioPointLUT){const t=this._calculateLookupSteps();this._ratioPointLUT=this._buildRatioPointLUT(t)}return this._ratioPointLUT}get ratioDistanceLUT(){return this._ratioDistanceLUT||(this._ratioDistanceLUT=this._buildRatioDistanceLUT()),this._ratioDistanceLUT}constructor(t,e){this.tAtDistance=t=>{if(t<=0)return 0;if(t>=this.distance)return 1;const e=this.ratioDistanceLUT;let i=0,s=e.length;do{const n=i+s>>1;e[n]<=t?i=n:s=n}while(s-i>1);const n=e[i];return(i+(t-n)/(e[s]-n))/(e.length-1)},this._calculateDistance=()=>Mc.reduce(((t,e)=>{let{t:i,weight:s}=e;const[n,r]=this.derivative(i);return t+s*Math.sqrt(n*n+r*r)}),0),this._buildRatioPointLUT=t=>{const e=1/t,i=[this.pFirst[0],this.pFirst[1]];for(let s=1;s<t;++s){const t=this.point(s*e);i.push(t[0],t[1])}return i.push(this.pLast[0],this.pLast[1]),Float32Array.from(i)},this._buildRatioDistanceLUT=()=>{const t=this.ratioPointLUT,e=[0];for(let i=2;i<t.length-2;i+=2){const s=t[i]-t[i-2],n=t[i+1]-t[i-1];e.push(e[(i>>1)-1]+Math.sqrt(s*s+n*n))}return e.push(this.distance),Float32Array.from(e)},this._calculateSegments=()=>{const t=this.ratioPointLUT,e=[{points:[_c(t[0],t[1]),_c(t[2],t[3])],length:Math.sqrt((t[2]-t[0])*(t[2]-t[0])+(t[3]-t[1])*(t[3]-t[1]))}];for(let i=4;i<t.length-1;i+=2){const s=e[e.length-1].points[1],n=_c(t[i],t[i+1]);e.push({points:[s,n],length:bc(s,n)})}return e},this._calculateLookupSteps=()=>Math.max(Math.min(Math.ceil(this.distance/2),20),1),this.pFirst=t,this.pLast=e}}class Cc extends Sc{get points(){return[this.p1,this.p2,this.p3]}constructor(t,e,i){super(t,i),this.point=t=>{const e=1-t,i=e*e,s=t*e,n=t*t;return _c(i*this.p1[0]+2*s*this.p2[0]+n*this.p3[0],i*this.p1[1]+2*s*this.p2[1]+n*this.p3[1])},this._derFn=(t,e,i,s)=>2*(1-t)*(i-e)+2*t*(s-i),this.p1=t,this.p2=e,this.p3=i}split(t){const e=t-1,i=e*t,s=e*e,n=t*t,r=_c(n*this.p3[0]-2*i*this.p2[0]+s*this.p1[1],n*this.p3[1]-2*i*this.p2[1]+s*this.p1[1]);return{left:new Cc(this.p1,_c(t*this.p2[0]-e*this.p1[0],t*this.p2[1]-e*this.p1[1]),r),right:new Cc(r,_c(t*this.p3[0]-e*this.p2[0],t*this.p3[1]-e*this.p2[1]),this.p3)}}derivative(t){return _c(this._derFn(t,this.p1[0],this.p2[0],this.p3[0]),this._derFn(t,this.p1[1],this.p2[1],this.p3[1]))}}class kc extends Sc{get points(){return[this.p1,this.p2,this.p3,this.p4]}constructor(t,e,i,s){super(t,s),this.point=t=>{const e=1-t,i=e*e,s=e*i,n=t*i,r=t*t,o=r*e,a=t*r;return _c(s*this.p1[0]+3*n*this.p2[0]+3*o*this.p3[0]+a*this.p4[0],s*this.p1[1]+3*n*this.p2[1]+3*o*this.p3[1]+a*this.p4[1])},this._derFn=(t,e,i,s,n)=>{const r=1-t;return 3*(r*r)*(i-e)+6*(t*r)*(s-i)+3*(t*t)*(n-s)},this.p1=t,this.p2=e,this.p3=i,this.p4=s}split(t){const e=t*t,i=t*e,s=t-1,n=s*s,r=s*n,o=s*t,a=s*e,l=n*t,h=_c(i*this.p4[0]-3*a*this.p3[0]+3*l*this.p2[0]-r*this.p1[0],i*this.p4[1]-3*a*this.p3[1]+3*l*this.p2[1]-r*this.p1[1]);return{left:new kc(this.p1,_c(t*this.p2[0]-s*this.p1[0],t*this.p2[1]-s*this.p1[1]),_c(e*this.p3[0]-2*o*this.p2[0]+n*this.p1[0],e*this.p3[1]-2*o*this.p2[1]+n*this.p1[1]),h),right:new kc(h,_c(e*this.p4[0]-2*o*this.p3[0]+n*this.p2[0],e*this.p4[1]-2*o*this.p3[1]+n*this.p2[1]),_c(t*this.p4[0]-s*this.p3[0],t*this.p4[1]-s*this.p3[1]),this.p4)}}derivative(t){return _c(this._derFn(t,this.p1[0],this.p2[0],this.p3[0],this.p4[0]),this._derFn(t,this.p1[1],this.p2[1],this.p3[1],this.p4[1]))}}class Tc{constructor(t,e){this._startX=0,this._startY=0,this._currentDashProgress=0,this._currentDashIndex=0,this._currentX=0,this._currentY=0,this._dashOverBezier=t=>{t.segments.forEach((t=>{let e=0;const i=xc();for(;e<1;){const s=this._dashArray[this._currentDashIndex%this._dashArray.length],n=(1-this._currentDashProgress)*s,r=(1-e)*t.length,o=Math.min(n,r),a=o/t.length,l=o/s,h=wc(i,t.points[0],t.points[1],e+a);this._currentDashIndex%2===0?this._inner.lineTo(h[0],h[1]):this._inner.moveTo(h[0],h[1]),this._currentX=h[0],this._currentY=h[1],e+=a,this._currentDashProgress+=l,1===this._currentDashProgress&&(this._currentDashProgress=0,this._currentDashIndex++)}}))},this._inner=t,this._dashArray=e}beginPath(){this._inner.beginPath()}moveTo(t,e){this._currentX=t,this._currentY=e,this._currentDashIndex=0,this._currentDashProgress=0,this._startX=t,this._startY=e,this._inner.moveTo(t,e)}closePath(){this.lineTo(this._startX,this._startY),this._inner.closePath()}lineTo(t,e){const i=t-this._currentX,s=e-this._currentY,n=this._currentX,r=this._currentY,o=Math.sqrt(i*i+s*s);let a=0;for(;a<o;){const t=this._dashArray[this._currentDashIndex%this._dashArray.length],e=this._currentDashIndex%2===0,l=1-this._currentDashProgress,h=Math.min(l,(o-a)/t),c=h*t,d=n+i*(a+c)/o,u=r+s*(a+c)/o;e?this._inner.lineTo(d,u):this._inner.moveTo(d,u),this._currentX=d,this._currentY=u,a+=c,this._currentDashProgress+=h,1===this._currentDashProgress&&(this._currentDashProgress=0,this._currentDashIndex++)}}bezierCurveTo(t,e,i,s,n,r){const o=new kc(_c(this._currentX,this._currentY),_c(t,e),_c(i,s),_c(n,r));this._dashOverBezier(o)}quadraticCurveTo(t,e,i,s){const n=new Cc(_c(this._currentX,this._currentY),_c(t,e),_c(i,s));this._dashOverBezier(n)}arcTo(t,e,i,s,n,r,o){this._currentX=r,this._currentY=o,this._inner.arcTo(t,e,i,s,n,r,o)}}const $c=["C","c","S","s"],Ac=["Q","q","T","t"],Pc=(t,e,i,s)=>!i.lastControlPosition||e-1<0||!s.includes(t[e-1][0])?{x:i.currentPosition.x,y:i.currentPosition.y}:{x:2*i.currentPosition.x-i.lastControlPosition.x,y:2*i.currentPosition.y-i.lastControlPosition.y},Oc=(t,e,i)=>Pc(t,e,i,$c),Rc=(t,e,i)=>Pc(t,e,i,Ac),Ec=(t,e,i,s,n)=>({currentPosition:{x:e,y:i},startPosition:s?{x:e,y:i}:t.startPosition,lastControlPosition:n}),Dc=(t,e,i,s)=>(s.moveTo(t,e),Ec(i,t,e,!0)),Ic=(t,e,i,s)=>(s.lineTo(t,e),Ec(i,t,e,!1)),Lc=(t,e,i,s,n,r,o,a)=>(a.bezierCurveTo(t,e,i,s,n,r),Ec(o,n,r,!1,{x:i,y:s})),zc=(t,e,i,s,n,r)=>(r.quadraticCurveTo(t,e,i,s),Ec(n,i,s,!1,{x:t,y:e})),jc=(t,e,i,s,n,r,o,a,l)=>(l.arcTo(t,e,i,s,n,r,o),Ec(a,r,o,!1)),Uc=(t,e)=>{e.beginPath();let i={startPosition:{x:0,y:0},currentPosition:{x:0,y:0}};t.forEach(((s,n)=>{switch(s[0]){case"M":i=Dc(s[1],s[2],i,e);break;case"m":i=Dc(s[1]+i.currentPosition.x,s[2]+i.currentPosition.y,i,e);break;case"Z":case"z":i=((t,e)=>(e.closePath(),Ec(t,t.startPosition.x,t.startPosition.y,!1)))(i,e);break;case"L":i=Ic(s[1],s[2],i,e);break;case"l":i=Ic(s[1]+i.currentPosition.x,s[2]+i.currentPosition.y,i,e);break;case"H":i=Ic(s[1],i.currentPosition.y,i,e);break;case"h":i=Ic(s[1]+i.currentPosition.x,i.currentPosition.y,i,e);break;case"V":i=Ic(i.currentPosition.x,s[1],i,e);break;case"v":i=Ic(i.currentPosition.x,s[1]+i.currentPosition.y,i,e);break;case"C":i=Lc(s[1],s[2],s[3],s[4],s[5],s[6],i,e);break;case"c":i=Lc(s[1]+i.currentPosition.x,s[2]+i.currentPosition.y,s[3]+i.currentPosition.x,s[4]+i.currentPosition.y,s[5]+i.currentPosition.x,s[6]+i.currentPosition.y,i,e);break;case"S":{const{x:r,y:o}=Oc(t,n,i);i=Lc(r,o,s[1],s[2],s[3],s[4],i,e);break}case"s":{const{x:r,y:o}=Oc(t,n,i);i=Lc(r,o,s[1]+i.currentPosition.x,s[2]+i.currentPosition.y,s[3]+i.currentPosition.x,s[4]+i.currentPosition.y,i,e);break}case"Q":i=zc(s[1],s[2],s[3],s[4],i,e);break;case"q":i=zc(s[1]+i.currentPosition.x,s[2]+i.currentPosition.y,s[3]+i.currentPosition.x,s[4]+i.currentPosition.y,i,e);break;case"T":{const{x:r,y:o}=Rc(t,n,i);i=zc(r,o,s[1],s[2],i,e);break}case"t":{const{x:r,y:o}=Rc(t,n,i);i=zc(r,o,s[1]+i.currentPosition.x,s[2]+i.currentPosition.y,i,e);break}case"A":i=jc(s[1],s[2],s[3],s[4],s[5],s[6],s[7],i,e);break;case"a":i=jc(s[1],s[2],s[3],s[4],s[5],s[6]+i.currentPosition.x,s[7]+i.currentPosition.y,i,e);break;default:throw new Error(`Unsupported command: ${s[0]}`)}}))},Bc={[ht.CLICK]:"click",[ht.GLOBAL_MOUSE_MOVE]:"globalmousemove",[ht.GLOBAL_POINTER_MOVE]:"globalpointermove",[ht.GLOBAL_TOUCH_MOVE]:"globaltouchmove",[ht.MOUSE_DOWN]:"mousedown",[ht.MOUSE_ENTER]:"mouseenter",[ht.MOUSE_LEAVE]:"mouseleave",[ht.MOUSE_MOVE]:"mousemove",[ht.MOUSE_OUT]:"mouseout",[ht.MOUSE_OVER]:"mouseover",[ht.MOUSE_UP]:"mouseup",[ht.MOUSE_UP_OUTSIDE]:"mouseupoutside",[ht.POINTER_CANCEL]:"pointercancel",[ht.POINTER_DOWN]:"pointerdown",[ht.POINTER_ENTER]:"pointerenter",[ht.POINTER_LEAVE]:"pointerleave",[ht.POINTER_MOVE]:"pointermove",[ht.POINTER_OUT]:"pointerout",[ht.POINTER_OVER]:"pointerover",[ht.POINTER_TAP]:"pointertap",[ht.POINTER_UP]:"pointerup",[ht.POINTER_UP_OUTSIDE]:"pointerupoutside",[ht.RIGHT_CLICK]:"rightclick",[ht.RIGHT_DOWN]:"rightdown",[ht.RIGHT_UP]:"rightup",[ht.RIGHT_UP_OUTSIDE]:"rightupoutside",[ht.TAP]:"tap",[ht.TOUCH_CANCEL]:"touchcancel",[ht.TOUCH_END]:"touchend",[ht.TOUCH_END_OUTSIDE]:"touchendoutside",[ht.TOUCH_MOVE]:"touchmove",[ht.TOUCH_START]:"touchstart",[ht.WHEEL]:"wheel"},Nc={stroke:{color:"black",opacity:1,width:1}};class Fc{clearCache(){delete this.cachedTransformOptions,delete this.cachedFillOptions,delete this.cachedStrokeOptions,delete this.cachedCircleOptions,delete this.cachedPathOptions,delete this.cachedRectangleOptions,delete this.cachedSharedRefOptions,delete this.cachedSVGOptions,delete this.cachedZIndex}}pc.T;class Vc extends dc.mc{constructor(){super(...arguments),this.shared=[],this.textures=[]}}class Hc extends uc.A{constructor(){super(...arguments),this.cachedOptions=new Fc,this.hasListeners=!1}}class Gc extends fc.k{constructor(){super(...arguments),this.cachedOptions=new Fc,this.hasListeners=!1}}class Yc extends Kh{get renderer(){if(!this._renderer)throw new Error("No renderer initialized");return this._renderer}set renderer(t){this._renderer=t}constructor(t){var e;super(),e=this,this._hasPending=!1,this._hitBoxId=()=>"stage-hit-box-backdrop",this._destroyRemoved=(t,e)=>{var i,s,n;const r=(null===(i=e.children)||void 0===i?void 0:i.reduce(((t,e)=>(t[e.id]=e,t)),{}))||{},o=null===(s=t.children)||void 0===s?void 0:s.filter((t=>!r[t.label]));o.forEach((t=>{this._destroyChildren(t),t.destroy()})),t.removeChild(...o);const a=null===(n=t.children)||void 0===n?void 0:n.filter((t=>{var e;return null===(e=t.children)||void 0===e?void 0:e.length})).reduce(((t,e)=>{const i=r[e.label];return this._destroyRemoved(e,i)||t}),!1);return!!o.length||a},this._destroyTextures=t=>{t.textures.forEach((t=>t.destroy(!0)))},this._destroyChildren=t=>{var e;(null===(e=t.children)||void 0===e?void 0:e.length)&&t.children.forEach((t=>{this._destroyChildren(t),t.destroy()}))},this._createGroup=function(t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;var s;const n=new Vc({isRenderGroup:arguments.length>1&&void 0!==arguments[1]&&arguments[1]});return n.zIndex=i,n.label=t.id,null===(s=t.children)||void 0===s||s.map((t=>{if(void 0!==t.kind)return e._createGraphics(t,n);const i=e._createGroup(t,!1,t.zIndex);return i.eventMode="passive",i})).forEach((t=>n.addChild(t))),n},this._createGraphics=(t,e)=>{let i;return i=t.kind===ct.SPRITE?new Gc:new Hc,i.label=t.id,this._setUpInteractions(t,i,e),this._transferNodeOptions(i,t,e,Nc),i},this._createTexture=async t=>{if(t.options.svg){const e=new Blob([t.options.svg],{type:"image/svg+xml"}),i=URL.createObjectURL(e),s=new Image;return s.src=i,new Promise((e=>{s.onload=()=>{const i=cc.g.from(s);i.label=t.id,i.cachedTextureSourceOptions=t.options,e(i)}}))}},this._updateShapes=(t,e)=>{const i=this.stage.getChildByLabel(t,!0);i&&(this._hasPending=e.reduce(((t,e)=>{const s=i.getChildByLabel(e.id);if(!s)return t;return this._transferNodeOptions(s,e,i,Nc)||t}),this._hasPending))},this._transferNodeOptions=(t,e,i,s)=>{const n=this._hasUpdates(t.cachedOptions,e,s);return n&&(t instanceof Hc&&(t.clear(),t.cachedOptions.clearCache()),this._transferShapeOptions(t,e,i,s),this._transferZIndex(t,e.zIndex),this._transferTransformOptions(t,e.transform),t instanceof uc.A&&(this._transferFillOptions(t,e.fill,null===s||void 0===s?void 0:s.fill),this._transferStrokeOptions(t,e,null===s||void 0===s?void 0:s.stroke))),n},this._transferShapeOptions=(t,e,i,s)=>{t instanceof Hc&&(e.kind===ct.PATH&&this._transferPathOptions(t,e.path,e.stroke),e.kind===ct.CIRCLE&&this._transferCircleOptions(t,e.circle,null===s||void 0===s?void 0:s.circle),e.kind===ct.RECTANGLE&&this._transferRectangleOptions(t,e.rectangle,null===s||void 0===s?void 0:s.rectangle),e.kind===ct.SVG&&this._transferSVGOptions(t,e.svg)),t instanceof Gc&&e.kind===ct.SPRITE&&this._transferSpriteOptions(t,i,e.ref)},this._transferPathOptions=(t,e,i)=>{if(!e)return void(t.cachedOptions.cachedPathOptions=void 0);!function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=yc()(t);let n=e;i.length&&(n=new Tc(e,i)),Uc(s,n)}(e.svgPath,t,null===i||void 0===i?void 0:i.dashArray),t.localBlendMode="max",t.cachedOptions.cachedPathOptions=e},this._transferCircleOptions=(t,e,i)=>{const s=void 0===(null===e||void 0===e?void 0:e.x)?null===i||void 0===i?void 0:i.x:e.x,n=void 0===(null===e||void 0===e?void 0:e.y)?null===i||void 0===i?void 0:i.y:e.y,r=void 0===(null===e||void 0===e?void 0:e.radius)?null===i||void 0===i?void 0:i.radius:e.radius;void 0!==s&&void 0!==n&&void 0!==r&&(t.cachedOptions.cachedCircleOptions={x:s,y:n,radius:r},t.circle(s,n,r))},this._transferRectangleOptions=(t,e,i)=>{const s=void 0===(null===e||void 0===e?void 0:e.x)?null===i||void 0===i?void 0:i.x:e.x,n=void 0===(null===e||void 0===e?void 0:e.y)?null===i||void 0===i?void 0:i.y:e.y,r=void 0===(null===e||void 0===e?void 0:e.width)?null===i||void 0===i?void 0:i.width:e.width,o=void 0===(null===e||void 0===e?void 0:e.height)?null===i||void 0===i?void 0:i.height:e.height;void 0!==s&&void 0!==n&&void 0!==r&&void 0!==o&&(t.cachedOptions.cachedRectangleOptions={x:s,y:n,width:r,height:o},t.rect(s,n,r,o))},this._transferSVGOptions=(t,e)=>{(null===e||void 0===e?void 0:e.svg)&&(t.cachedOptions.cachedSVGOptions={svg:e.svg},t.svg(e.svg))},this._transferSpriteOptions=(t,e,i)=>{if(!i)throw new Error("Sprite defined without resource");const s=e.textures.find((t=>t.label===i.sharedId));if(!s)throw new Error("Unable to find referenced texture: "+i.sharedId);t.texture=s,t.cachedOptions.cachedSharedRefOptions=i},this._transferTransformOptions=(t,e)=>{if(!(null===e||void 0===e?void 0:e.length))return;const i=[],s=new ic.u;s.identity(),e.forEach((t=>{"scale"===t.type&&this._transferScaleOptions(t,s),"translate"===t.type&&this._transferTranslateOptions(t,s),i.push(t)})),t.cachedOptions.cachedTransformOptions=i,t.setFromMatrix(s)},this._transferFillOptions=(t,e,i)=>{if(!e&&!i)return;const s=void 0===(null===e||void 0===e?void 0:e.color)?null===i||void 0===i?void 0:i.color:e.color,n=void 0===(null===e||void 0===e?void 0:e.opacity)?null===i||void 0===i?void 0:i.opacity:e.opacity;t.cachedOptions.cachedFillOptions={color:s,opacity:n},t.fill({color:s,alpha:n})},this._transferStrokeOptions=(t,e,i)=>{var s,n,r,o;if(!e.stroke&&!i)return;const a=void 0===(null===(s=e.stroke)||void 0===s?void 0:s.color)?null===i||void 0===i?void 0:i.color:e.stroke.color,l=void 0===(null===(n=e.stroke)||void 0===n?void 0:n.opacity)?null===i||void 0===i?void 0:i.opacity:e.stroke.opacity,h=(void 0===(null===(r=e.stroke)||void 0===r?void 0:r.width)?null===i||void 0===i?void 0:i.width:e.stroke.width)||1,c=void 0===(null===(o=e.stroke)||void 0===o?void 0:o.dashArray)?null===i||void 0===i?void 0:i.dashArray:e.stroke.dashArray;t.cachedOptions.cachedStrokeOptions={color:a,width:h,opacity:l,dashArray:c},t.stroke({color:a,alpha:void 0===l?1:l,width:h,alignment:.5})},this.stage=new dc.mc,this.ticker=new gc.R}async init(t){this.renderer=await async function(t){let e,s=[];t.preference?(s.push(t.preference),hc.forEach((e=>{e!==t.preference&&s.push(e)}))):s=hc.slice();let n={};for(let a=0;a<s.length;a++){const o=s[a];if("webgpu"===o&&await lc()){const{WebGPURenderer:s}=await Promise.all([i.e(2312),i.e(8258)]).then(i.bind(i,68258));e=s,n={...t,...t.webgpu};break}if("webgl"===o&&(r=t.failIfMajorPerformanceCaveat??rc.k.defaultOptions.failIfMajorPerformanceCaveat,void 0!==oc||(oc=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:r??rc.k.defaultOptions.failIfMajorPerformanceCaveat};try{if(!nc.e.get().getWebGLRenderingContext())return!1;let e=nc.e.get().createCanvas().getContext("webgl",t);const i=!!e?.getContextAttributes()?.stencil;if(e){const t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}return e=null,i}catch(e){return!1}})()),oc)){const{WebGLRenderer:s}=await Promise.all([i.e(2312),i.e(1627)]).then(i.bind(i,11627));e=s,n={...t,...t.webgl};break}if("canvas"===o)throw n={...t},new Error("CanvasRenderer is not yet implemented")}var r;if(delete n.webgpu,delete n.webgl,!e)throw new Error("No available renderer for the current environment");const o=new e;return await o.init(n),o}({preference:"webgl",backgroundAlpha:0,resolution:2,antialias:!0,autoDensity:!0,powerPreference:"high-performance",eventMode:"passive"}),t.appendChild(this.renderer.view.canvas),this._attachedTo=t,this.resize(),this.ticker.add((()=>{this._hasPending&&(this._setUpStageHitBox(),this.renderer.render(this.stage),this._hasPending=!1)})),this.ticker.start()}eventTypeMap(){return Bc}resize(){if(!this._attachedTo)return;const{width:t,height:e}=this._attachedTo.getBoundingClientRect();this.renderer.resize(t,e),this._hasPending=!0}async loadTextures(t){this._ensureStageGroups(t);const e=t.map((t=>{var e;const i=this.stage.getChildByLabel(t.id),s=(null===(e=t.textures)||void 0===e?void 0:e.filter((t=>!i.textures.some((e=>e.label===t.id)))))||[];return{stageGroup:i,textures:s}})).filter((t=>{let{textures:e}=t;return e.length}));await Promise.all(e.map((async t=>{let{stageGroup:e,textures:i}=t;const s=(await Promise.all(i.map((async t=>this._createTexture(t)))||[])).filter(Boolean).map((t=>t));e.textures=[...e.textures,...s]})))}async update(t){var e;this._hasPending=t.reduce(((t,e)=>{if(!e.id)return t;const i=this.stage.getChildByLabel(e.id);return i?this._updateGroup(i,e)||t:(this.stage.addChild(this._createGroup(e,!0,e.zIndex)),!0)}),!1)||this._hasPending,this._hasPending=null===(e=this.stage.children)||void 0===e?void 0:e.reduce(((e,i)=>{const s=t.find((t=>t.id===i.label));return s&&this._destroyRemoved(i,s)||e}),this._hasPending)}removeGroups(t){const e=t.map((t=>this.stage.getChildByLabel(t))).filter(Boolean).map((t=>t));e.forEach((t=>{this._destroyTextures(t),this._destroyChildren(t),t.destroy()})),this.stage.removeChild(...e),this._hasPending=!!e.length}tearDown(){var t;null===(t=this._renderer)||void 0===t||t.destroy(),this.stage.destroy(),this.ticker.started&&(this.ticker.stop(),this.ticker.destroy()),this._renderer=void 0,this._attachedTo=void 0}_ensureStageGroups(t){t.forEach(((t,e)=>{if(!t.id)return;let i=this.stage.getChildByLabel(t.id);i||(i=new Vc,i.label=t.id,this.stage.addChildAt(i,e))}))}_setUpStageHitBox(){const t=this.stage.getChildByLabel(this._hitBoxId());let e=!1;if(t){const i=t.cachedOptions.cachedRectangleOptions;(null===i||void 0===i?void 0:i.width)===this.renderer.width&&(null===i||void 0===i?void 0:i.height)===this.renderer.height||(e=!0)}else e=!0;if(e){t&&(t.destroy(),this.stage.removeChild(t));const e=(new Hc).rect(0,0,this.renderer.width,this.renderer.height).fill({color:"black",alpha:0});e.label=this._hitBoxId(),e.cachedOptions.cachedRectangleOptions={x:0,y:0,width:this.renderer.width,height:this.renderer.height};const i=this.eventTypeMap();[ht.MOUSE_OVER,ht.MOUSE_LEAVE,ht.MOUSE_DOWN].map((t=>i[t])).forEach((t=>e.on(t,(t=>{var e;null===(e=this._attachedTo)||void 0===e||e.dispatchEvent(new CustomEvent("scene-canvas-event-dispatch",{bubbles:!0,detail:{native:t.nativeEvent}}))})))),e.hitArea=new sc.M(0,0,this.renderer.width,this.renderer.height),e.eventMode="static",this.stage.addChildAt(e,0)}}async _updateGroup(t,e){let i=!1;return i=await this._updateChildren(e,t)||i,i}async _updateChildren(t,e){var i;return null===(i=t.children)||void 0===i?void 0:i.reduce(((t,i)=>this._updateChild(e,i)||t),!1)}_updateChild(t,e){var i;const s=t.getChildByLabel(e.id);return(null===(i=null===s||void 0===s?void 0:s.children)||void 0===i?void 0:i.length)?this._updateChildGroup(e,s,t):e.children?this._updateSceneGroup(s,e):s?this._updateExistingChild(s,e,t):(t.addChild(this._createGraphics(e,t)),!0)}_updateExistingChild(t,e,i){const s=this._transferNodeOptions(t,e,i,Nc);return s&&this._setUpInteractions(e,t,i),s}_updateSceneGroup(t,e){return null===t||void 0===t||t.destroy(),this._createGroup(e,!1,e.zIndex),!0}_updateChildGroup(t,e,i){return t.children?this._updateGroup(e,t):!!t.kind&&(this._destroyChildren(e),e.destroy(),i.addChild(this._createGraphics(t,i)),!0)}_setUpInteractions(t,e,i){var s=this;const n=this.eventTypeMap();if(e.hasListeners&&Object.entries(n).forEach((t=>{let[,i]=t;return e.removeAllListeners(i)})),t.on){const r=t.on;Object.keys(r).length&&Object.keys(r).forEach((o=>{const a=r[o];e.on(n[o],(e=>(a({event:e.nativeEvent,eventType:o,target:t,updateShapes:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s._updateShapes(i.label,e)}}),!0)))})),e.hasListeners=!0}e.eventMode="static"}_transferScaleOptions(t,e){e.scale(t.scaleX,t.scaleY)}_transferTranslateOptions(t,e){e.translate(t.x,t.y)}_transferZIndex(t,e){const i=e||1;t.zIndex=i,t.cachedOptions.cachedZIndex=i}}var Xc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const Wc=["size"],qc=["allDataElements"],Zc=(t,e)=>e.some((e=>t.has(e)));let Jc=class extends(Qo((0,V.c)((0,o.ID)(s.OC)))){constructor(){var t;super(...arguments),this._engine=new Yc(t),this._renderSources=[],this._initApplication=async()=>{const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{}),e=this.shadowRoot.querySelector(`.${t}`);e&&await this._engine.init(e)}}disconnectedCallback(){super.disconnectedCallback(),this._engine.tearDown()}async renderUpdate(t){var e;if(!(null===(e=this.allDataElements)||void 0===e?void 0:e.length))return[];const i=this.allDataElements.filter((e=>this._renderSources.includes(e.plotUniqueId)&&t.includes(e.plotUniqueId))).map(((t,e)=>({shape:t,z:e+1}))),s=(await Promise.all(i.map((async t=>{let{shape:e,z:i}=t;const s=await e.sceneGroup();return s&&(s.zIndex=i+1),s})))).filter((t=>!!t)).map((t=>t));return await this._engine.loadTextures(s),this._engine.update(s),i.map((t=>{let{shape:e}=t;return e.plotUniqueId}))}async firstUpdated(t){super.firstUpdated(t),await this._initApplication()}async updated(t){super.updated(t),Zc(t,Wc)&&await this._resize(),Zc(t,qc)&&await this._updateTargets()}render(){const[,t]=(0,s.Yh)(this.tagName.toLowerCase(),{});return s.qy` <div class=${t}></div> `}async _resize(){this._engine.resize()}async _updateTargets(){var t;const e=this._renderSources.slice(),i=(null===(t=this.allDataElements)||void 0===t?void 0:t.filter((t=>t instanceof ft)).filter((t=>t.slot===this.slot)).map((t=>t)).filter((t=>"canvas"===t.mode||"webgl"===t.mode)).map((t=>t.plotUniqueId)))||[],s=e.filter((t=>!i.includes(t)));this._engine.removeGroups(s),this._renderSources=i}};Jc=Xc([(0,s.eV)({tagName:(0,g.o)("scene-renderer"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
            }

            :host {
                width: 100%;
                height: 100%;
            }

            ${e} {
                width: 100%;
                height: 100%;
                display: block;
            }
        `]},version:n.r})],Jc);var Kc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Qc=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let td=class extends((0,o.ID)(s.OC)){render(){const[t]=(0,s.Yh)(this.tagName.toLowerCase(),{});if(!this.size||!this.getScales())return s.s6;const[e,i]=this.getScales(),n={position:"absolute",transform:`translate(${e(this.dx)}px, ${i(this.dy)}px)`};return s.qy` <slot class="${t} portal" style=${(0,s.Wy)(n)}></slot> `}};Kc([(0,s.MZ)(),Qc("design:type",Object)],td.prototype,"dx",void 0),Kc([(0,s.MZ)(),Qc("design:type",Object)],td.prototype,"dy",void 0),td=Kc([(0,s.eV)({tagName:(0,g.o)("portal"),styles:t=>{const{root:e}=(0,s.zz)(t);return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
                pointer-events: none;
            }

            :host {
                display: flex;
                overflow: hidden;
            }

            ${e} {
                width: auto;
                height: auto;
            }

            ::slotted(*) {
                position: absolute;
                top: 0;
                left: 0;
                pointer-events: initial;
            }

            .portal {
                display: block;
            }
        `]},version:n.r})],td);var ed=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},id=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let sd=class extends s.OC{constructor(){super(...arguments),this.show=!0,this.flip=!1,this.numberFormatter=(0,Aa.wC)(6),this.arrow=!1}render(){if(!this.show||!this.position)return;const{x:t,y:e}=this.position,i=`--plot-tooltip-x: ${t}px; --plot-tooltip-y: ${e}px;`,[,n]=(0,s.Yh)(this.tagName.toLowerCase(),{left:this.flip});return s.qy`<div style=${i} class=${n}>
            ${this.arrow?s.qy`<div class="tooltip-arrow"></div>`:null}
            <div class="tooltip-content">${this.renderContents()}</div>
        </div> `}renderContents(){if(!this.contents)return null;const{x:t,y:e,xLabel:i,yLabel:n,id:r,label:o}=this.contents;return[r&&s.qy`<p><b>ID:</b> ${r}</p>`,i&&s.qy`<p><b>${i}:</b> ${a(t)?this.numberFormatter(t):t}</p>`,n&&s.qy`<p><b>${n}:</b> ${a(e)?this.numberFormatter(e):e}</p>`,o&&s.qy`<p><i>${o}</i></p>`].filter((t=>t))}};ed([(0,s.MZ)(),id("design:type",Object)],sd.prototype,"show",void 0),ed([(0,s.MZ)(),id("design:type",Object)],sd.prototype,"position",void 0),ed([(0,s.MZ)(),id("design:type",Object)],sd.prototype,"flip",void 0),ed([(0,s.MZ)(),id("design:type",Object)],sd.prototype,"contents",void 0),ed([(0,s.MZ)(),id("design:type",Object)],sd.prototype,"numberFormatter",void 0),ed([(0,s.MZ)(),id("design:type",Object)],sd.prototype,"arrow",void 0),sd=ed([(0,s.eV)({tagName:(0,g.o)("tooltip"),styles:t=>{const{root:e,is:i}=(0,s.zz)(t),n=(0,s.Jy)("color_primary_2"),r=(0,s.Jy)("color_secondary_2");return[s.iF,s.AH`
            :host,
            :host::before,
            :host::after,
            :host *,
            :host *::before,
            :host *::after {
                box-sizing: border-box;
                pointer-events: none;
            }

            :host {
                display: contents;
            }

            ${e} {
                position: absolute;
            }

            ${e} {
                pointer-events: none;
                box-sizing: border-box;
                position: absolute;
                top: var(--plot-tooltip-y);
                left: var(--plot-tooltip-x);
                transform: translate(5px, -50%);
                border: 1px solid ${r};
                z-index: 1000;
            }

            ${i("left")} {
                pointer-events: none;
                box-sizing: border-box;
                position: absolute;
                top: var(--plot-tooltip-y);
                left: var(--plot-tooltip-x);
                transform: translate(calc(-100% - 5px), -50%);
                border: 1px solid ${r};
                z-index: 1000;
            }

            .tooltip-content {
                background: ${n};
                z-index: 1;
                padding: 4px;
            }
            .tooltip-content,
            .tooltip-content p {
                text-align: start;
                margin: 0;
                white-space: nowrap;
                font-size: 12px;
            }

            .tooltip-target {
                position: absolute;
                display: initial;
                top: var(--plot-tooltip-y);
                left: var(--plot-tooltip-x);
                pointer-events: none;
            }

            .tooltip-arrow {
                border: 1px solid ${r};
                width: 8px;
                height: 8px;
                background: ${n};
                top: 50%;
                left: -8px;
                transform: translate3d(4px, -50%, -1px) rotate(45deg);
                position: absolute;
                z-index: -1;
            }

            ${i("left")} .tooltip-arrow {
                border: 1px solid ${r};
                width: 8px;
                height: 8px;
                background: ${n};
                top: 50%;
                right: 0px;
                left: auto;
                transform: translate3d(4px, -50%, -1px) rotate(45deg);
                position: absolute;
                z-index: -1;
            }
        `]},version:n.r})],sd)},80129:(t,e,i)=>{"use strict";i.d(e,{m:()=>a,p:()=>o});var s=i(93656);let n;const r=()=>{if(!n){let t=window.studio;t||(t=window.studio={});let e=t.sui;e||(e=t.sui={});const i=`icons${s.r.split(".")[0]||s.r}`;n=n||e[i],n||(n=e[i]={})}return n},o=t=>{const e=r();return e[t.name]||(e[t.name]=t.data),t.name},a=t=>r()[t]},80347:(t,e,i)=>{"use strict";i.d(e,{L:()=>n});var s=i(42026);class n{constructor(){this.uid=(0,s.L)("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}},81013:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});class s{constructor(t){"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}},81686:(t,e,i)=>{"use strict";i.d(e,{j:()=>r});var s=i(96225);const n=16777215;function r(t,e){return t===n?e:e===n?t:(0,s.u)(t,e)}},84839:(t,e,i)=>{"use strict";i.d(e,{T:()=>u,w:()=>d});var s=i(75242),n=i(86675),r=i(34325),o=i(41201);function a(t){return t instanceof o.m}function l(t){return t instanceof r._}function h(t,e,i){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function c(t,e,i){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...i,...t}}function d(t,e){if(void 0===t||null===t)return null;const i={},r=t;return function(t){return s.Q.isColorLike(t)}(t)?function(t,e,i){const r=s.Q.shared.setValue(e??0);return t.color=r.toNumber(),t.alpha=1===r.alpha?i.alpha:r.alpha,t.texture=n.g.WHITE,{...i,...t}}(i,t,e):function(t){return t instanceof n.g}(t)?function(t,e,i){return t.texture=e,{...i,...t}}(i,t,e):a(t)?h(i,t,e):l(t)?c(i,t,e):r.fill&&a(r.fill)?h(r,r.fill,e):r.fill&&l(r.fill)?c(r,r.fill,e):function(t,e){const i={...e,...t},n=s.Q.shared.setValue(i.color);return i.alpha*=n.alpha,i.color=n.toNumber(),i}(r,e)}function u(t,e){const{width:i,alignment:s,miterLimit:n,cap:r,join:o,pixelLine:a,...l}=e,h=d(t,l);return h?{width:i,alignment:s,miterLimit:n,cap:r,join:o,pixelLine:a,...h}:null}},84994:(t,e,i)=>{"use strict";i.d(e,{b:()=>s,m:()=>n});const s={name:"round-pixels-bit",vertex:{header:"\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> \n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}},n={name:"round-pixels-bit",vertex:{header:"   \n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {       \n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}}},85937:(t,e,i)=>{"use strict";i.d(e,{q:()=>o});var s=i(23144),n=i(91478),r=i(36904);class o extends r.v{constructor(t){t.resource||(t.resource=s.e.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),this.resource.width===this.pixelWidth&&this.resource.height===this.pixelHeight||(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._resolution;const s=super.resize(t,e,i);return s&&this.resizeCanvas(),s}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}o.extension=n.Ag.TextureSource},86332:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=(0,i(80129).p)({name:"resizeVertical",data:'<svg fill="currentColor" viewBox="0 0 24 24"><path d="M10.818 19.188h-1.8V4.806h1.8zm4.194 0h-1.8V4.806h1.8z"/></svg>'})},86675:(t,e,i)=>{"use strict";i.d(e,{g:()=>_});var s=i(92604),n=i(33596);const r=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],c=[],d=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];h.push(e);for(let i=0;i<16;i++){const s=d(r[t]*r[i]+a[t]*o[i]),n=d(o[t]*r[i]+l[t]*o[i]),h=d(r[t]*a[i]+a[t]*l[i]),c=d(o[t]*a[i]+l[t]*l[i]);for(let t=0;t<16;t++)if(r[t]===s&&o[t]===n&&a[t]===h&&l[t]===c){e.push(t);break}}}for(let t=0;t<16;t++){const e=new n.u;e.set(r[t],o[t],a[t],l[t],0,0),c.push(e)}}();const u={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>r[t],uY:t=>o[t],vX:t=>a[t],vY:t=>l[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>h[t][e],sub:(t,e)=>h[t][u.inv(e)],rotate180:t=>4^t,isVertical:t=>2===(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?u.S:u.N:2*Math.abs(e)<=Math.abs(t)?t>0?u.E:u.W:e>0?t>0?u.SE:u.SW:t>0?u.NE:u.NW,matrixAppendRotationInv:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n=c[u.inv(e)];n.tx=i,n.ty=s,t.append(n)}};var p=i(44307),f=i(42026),g=i(14811);const v=()=>{};var y=i(65852),m=i(36904),x=i(26436);class _ extends s.A{constructor(){let{source:t,label:e,frame:i,orig:s,trim:n,defaultAnchor:r,defaultBorders:o,rotate:a,dynamic:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.uid=(0,f.L)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new p.M,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new m.v,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:t,height:e}=this._source;this.frame.width=t,this.frame.height=e}this.orig=s||this.frame,this.trim=n,this.rotate=a??0,this.defaultAnchor=r,this.defaultBorders=o,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new x.N(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:s}=this._source,n=e.x/i,r=e.y/s,o=e.width/i,a=e.height/s;let l=this.rotate;if(l){const e=o/2,i=a/2,s=n+e,h=r+i;l=u.add(l,u.NW),t.x0=s+e*u.uX(l),t.y0=h+i*u.uY(l),l=u.add(l,2),t.x1=s+e*u.uX(l),t.y1=h+i*u.uY(l),l=u.add(l,2),t.x2=s+e*u.uX(l),t.y2=h+i*u.uY(l),l=u.add(l,2),t.x3=s+e*u.uX(l),t.y3=h+i*u.uY(l)}else t.x0=n,t.y0=r,t.x1=n+o,t.y1=r,t.x2=n+o,t.y2=r+a,t.x3=n,t.y3=r+a}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,g.t6)(g.lj,"Texture.baseTexture is now Texture.source"),this._source}}_.EMPTY=new _({label:"EMPTY",source:new m.v({label:"EMPTY"})}),_.EMPTY.destroy=v,_.WHITE=new _({source:new y.P({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),_.WHITE.destroy=v},87393:(t,e,i)=>{"use strict";i.d(e,{m:()=>n});const s={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function n(t){return s[t]??s.float32}},88263:(t,e,i)=>{"use strict";i.d(e,{o:()=>a,u:()=>o});var s=i(33596),n=i(98152),r=i(66373);const o=new n.b(s.u),a=new n.b(r.c)},89569:(t,e,i)=>{"use strict";i.d(e,{I:()=>T,v:()=>k});var s=i(95920),n=i(47699),r=i(60279);function o(t,e,i){if(t)for(const s in t){const n=e[s.toLocaleLowerCase()];if(n){let e=t[s];"header"===s&&(e=e.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&n.push(`//----${i}----//`),n.push(e)}else(0,r.R)(`${s} placement hook does not exist in shader`)}}const a=/\{\{(.*?)\}\}/g;function l(t){const e={};return(t.match(a)?.map((t=>t.replace(/[{()}]/g,"")))??[]).forEach((t=>{e[t]=[]})),e}function h(t,e){let i;const s=/@in\s+([^;]+);/g;for(;null!==(i=s.exec(t));)e.push(i[1])}function c(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=[];h(e,s),t.forEach((t=>{t.header&&h(t.header,s)}));const n=s;i&&n.sort();const r=n.map(((t,e)=>`       @location(${e}) ${t},`)).join("\n");let o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`\n${r}\n`),o}function d(t,e){let i;const s=/@out\s+([^;]+);/g;for(;null!==(i=s.exec(t));)e.push(i[1])}function u(t,e){let i=t;for(const s in e){const t=e[s];i=t.join("\n").length?i.replace(`{{${s}}}`,`//-----${s} START-----//\n${t.join("\n")}\n//----${s} FINISH----//`):i.replace(`{{${s}}}`,"")}return i}const p=Object.create(null),f=new Map;let g=0;function v(t){let{template:e,bits:i}=t;const s=m(e,i);if(p[s])return p[s];const{vertex:n,fragment:r}=function(t,e){const i=e.map((t=>t.vertex)).filter((t=>!!t)),s=e.map((t=>t.fragment)).filter((t=>!!t));let n=c(i,t.vertex,!0);n=function(t,e){const i=[];d(e,i),t.forEach((t=>{t.header&&d(t.header,i)}));let s=0;const n=i.sort().map((t=>t.indexOf("builtin")>-1?t:`@location(${s++}) ${t}`)).join(",\n"),r=i.sort().map((t=>{return`       var ${e=t,e.replace(/@.*?\s+/g,"")};`;var e})).join("\n"),o=`return VSOutput(\n            ${i.sort().map((t=>` ${function(t){const e=/\b(\w+)\s*:/g.exec(t);return e?e[1]:""}(t)}`)).join(",\n")});`;let a=e.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`\n${n}\n`),a=a.replace("{{start}}",`\n${r}\n`),a=a.replace("{{return}}",`\n${o}\n`),a}(i,n);const r=c(s,t.fragment,!0);return{vertex:n,fragment:r}}(e,i);return p[s]=x(n,r,i),p[s]}function y(t){let{template:e,bits:i}=t;const s=m(e,i);return p[s]||(p[s]=x(e.vertex,e.fragment,i)),p[s]}function m(t,e){return e.map((t=>(f.has(t)||f.set(t,g++),f.get(t)))).sort(((t,e)=>t-e)).join("-")+t.vertex+t.fragment}function x(t,e,i){const s=l(t),n=l(e);return i.forEach((t=>{o(t.vertex,s,t.name),o(t.fragment,n,t.name)})),{vertex:u(t,s),fragment:u(e,n)}}const _="\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n        \n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n       \n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n",b="\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n   \n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n        \n        {{start}}\n\n        var outColor:vec4<f32>;\n      \n        {{main}}\n        \n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n",w="\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n        \n        {{start}}\n        \n        vColor = vec4(1.);\n        \n        {{main}}\n        \n        vUV = uv;\n        \n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n",M="\n   \n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n        \n        {{start}}\n\n        vec4 outColor;\n      \n        {{main}}\n        \n        finalColor = outColor * vColor;\n        \n        {{end}}\n    }\n",S={name:"global-uniforms-bit",vertex:{header:"\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        "}},C={name:"global-uniforms-bit",vertex:{header:"\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        "}};function k(t){let{bits:e,name:i}=t;const s=v({template:{fragment:b,vertex:_},bits:[S,...e]});return n.B.from({name:i,vertex:{source:s.vertex,entryPoint:"main"},fragment:{source:s.fragment,entryPoint:"main"}})}function T(t){let{bits:e,name:i}=t;return new s.M({name:i,...y({template:{vertex:w,fragment:M},bits:[C,...e]})})}},91162:(t,e,i)=>{"use strict";i.d(e,{J:()=>E});var s=i(91478),n=i(42026),r=i(81013),o=i(67799),a=i(92080),l=i(94719);class h{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class c{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new h,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const d=[];let u=0;function p(){return u>0?d[--u]:new c}function f(t){d[u++]=t}let g=0;const v=class t{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uid=(0,n.L)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t.defaultOptions.maxTextures=t.defaultOptions.maxTextures??(0,l.a)(),e={...t.defaultOptions,...e};const{maxTextures:i,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new r.u(4*s),this.indexBuffer=new Uint16Array(o),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)f(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!(!i&&0!==i)&&(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=p(),s=i.textures;s.clear();const n=e[this.elementStart];let r=(0,a.i)(n.blendMode,n.texture._source),o=n.topology;4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const l=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,c=this.indexBuffer;let d=this._batchIndexSize,u=this._batchIndexStart,f="startBatch";const v=this.maxTextures;for(let y=this.elementStart;y<this.elementSize;++y){const n=e[y];e[y]=null;const m=n.texture._source,x=(0,a.i)(n.blendMode,m),_=r!==x||o!==n.topology;m._batchTick!==g||_?(m._batchTick=g,(s.count>=v||_)&&(this._finishBatch(i,u,d-u,s,r,o,t,f),f="renderBatch",u=d,r=x,o=n.topology,i=p(),s=i.textures,s.clear(),++g),n._textureId=m._textureBindLocation=s.count,s.ids[m.uid]=s.count,s.textures[s.count++]=m,n._batch=i,d+=n.indexSize,n.packAsQuad?(this.packQuadAttributes(n,l,h,n._attributeStart,n._textureId),this.packQuadIndex(c,n._indexStart,n._attributeStart/this.vertexSize)):(this.packAttributes(n,l,h,n._attributeStart,n._textureId),this.packIndex(n,c,n._indexStart,n._attributeStart/this.vertexSize))):(n._textureId=m._textureBindLocation,d+=n.indexSize,n.packAsQuad?(this.packQuadAttributes(n,l,h,n._attributeStart,n._textureId),this.packQuadIndex(c,n._indexStart,n._attributeStart/this.vertexSize)):(this.packAttributes(n,l,h,n._attributeStart,n._textureId),this.packIndex(n,c,n._indexStart,n._attributeStart/this.vertexSize)),n._batch=i)}s.count>0&&(this._finishBatch(i,u,d-u,s,r,o,t,f),u=d,++g),this.elementStart=this.elementSize,this._batchIndexStart=u,this._batchIndexSize=d}_finishBatch(t,e,i,s,n,r,o,a){t.gpuBindGroup=null,t.bindGroup=null,t.action=a,t.batcher=this,t.textures=s,t.blendMode=n,t.topology=r,t.start=e,t.size=i,++g,this.batches[this.batchIndex++]=t,o.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){4*t<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*t)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,2*this.attributeBuffer.size),i=new r.u(e);(0,o.W)(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,1.5*e.length);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let n=0;n<e.length;n++)s[n]=e[n];else(0,o.W)(e.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,s){const n=t.indices,r=t.indexSize,o=t.indexOffset,a=t.attributeOffset;for(let l=0;l<r;l++)e[i++]=s+n[l+o]-a}destroy(){for(let t=0;t<this.batches.length;t++)f(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};v.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let y=v;var m=i(95202),x=i(96333),_=i(69801);const b=new Float32Array(1),w=new Uint32Array(1);class M extends _.V{constructor(){const t=new m.h({data:b,label:"attribute-batch-buffer",usage:x.S.VERTEX|x.S.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:24,offset:0},aUV:{buffer:t,format:"float32x2",stride:24,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:24,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:24,offset:20}},indexBuffer:new m.h({data:w,label:"index-batch-buffer",usage:x.S.INDEX|x.S.COPY_DST,shrinkToFit:!1})})}}var S=i(89569),C=i(63144),k=i(21193),T=i(84994),$=i(59963),A=i(53636);class P extends A.M{constructor(t){super({glProgram:(0,S.I)({name:"batch",bits:[C.a,(0,k.P)(t),T.m]}),gpuProgram:(0,S.v)({name:"batch",bits:[C.F,(0,k._)(t),T.b]}),resources:{batchSamplers:(0,$.n)(t)}})}}let O=null;const R=class t extends y{constructor(){super(...arguments),this.geometry=new M,this.shader=O||(O=new P(this.maxTextures)),this.name=t.extension.name,this.vertexSize=6}packAttributes(t,e,i,s,n){const r=n<<16|65535&t.roundPixels,o=t.transform,a=o.a,l=o.b,h=o.c,c=o.d,d=o.tx,u=o.ty,{positions:p,uvs:f}=t,g=t.color,v=t.attributeOffset,y=v+t.attributeSize;for(let m=v;m<y;m++){const t=2*m,n=p[t],o=p[t+1];e[s++]=a*n+h*o+d,e[s++]=c*o+l*n+u,e[s++]=f[t],e[s++]=f[t+1],i[s++]=g,i[s++]=r}}packQuadAttributes(t,e,i,s,n){const r=t.texture,o=t.transform,a=o.a,l=o.b,h=o.c,c=o.d,d=o.tx,u=o.ty,p=t.bounds,f=p.maxX,g=p.minX,v=p.maxY,y=p.minY,m=r.uvs,x=t.color,_=n<<16|65535&t.roundPixels;e[s+0]=a*g+h*y+d,e[s+1]=c*y+l*g+u,e[s+2]=m.x0,e[s+3]=m.y0,i[s+4]=x,i[s+5]=_,e[s+6]=a*f+h*y+d,e[s+7]=c*y+l*f+u,e[s+8]=m.x1,e[s+9]=m.y1,i[s+10]=x,i[s+11]=_,e[s+12]=a*f+h*v+d,e[s+13]=c*v+l*f+u,e[s+14]=m.x2,e[s+15]=m.y2,i[s+16]=x,i[s+17]=_,e[s+18]=a*g+h*v+d,e[s+19]=c*v+l*g+u,e[s+20]=m.x3,e[s+21]=m.y3,i[s+22]=x,i[s+23]=_}};R.extension={type:[s.Ag.Batcher],name:"default"};let E=R},91478:(t,e,i)=>{"use strict";i.d(e,{Ag:()=>s,XO:()=>o});var s=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(s||{});const n=t=>{if("function"===typeof t||"object"===typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!==typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!==typeof t)throw new Error("Invalid extension type");return"string"===typeof(t={...t}).type&&(t.type=[t.type]),t},r=(t,e)=>n(t).priority??e,o={_addHandlers:{},_removeHandlers:{},_queue:{},remove(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(n).forEach((t=>{t.type.forEach((e=>this._removeHandlers[e]?.(t)))})),this},add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(n).forEach((t=>{t.type.forEach((e=>{const i=this._addHandlers,s=this._queue;i[e]?i[e]?.(t):(s[e]=s[e]||[],s[e]?.push(t))}))})),this},handle(t,e,i){const s=this._addHandlers,n=this._removeHandlers;if(s[t]||n[t])throw new Error(`Extension type ${t} already has a handler`);s[t]=e,n[t]=i;const r=this._queue;return r[t]&&(r[t]?.forEach((t=>e(t))),delete r[t]),this},handleByMap(t,e){return this.handle(t,(t=>{t.name&&(e[t.name]=t.ref)}),(t=>{t.name&&delete e[t.name]}))},handleByNamedList(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(t,(t=>{e.findIndex((e=>e.name===t.name))>=0||(e.push({name:t.name,value:t.ref}),e.sort(((t,e)=>r(e.value,i)-r(t.value,i))))}),(t=>{const i=e.findIndex((e=>e.name===t.name));-1!==i&&e.splice(i,1)}))},handleByList(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>r(e,i)-r(t,i))))}),(t=>{const i=e.indexOf(t.ref);-1!==i&&e.splice(i,1)}))},mixin(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];for(const n of i)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(n))}}},92080:(t,e,i)=>{"use strict";i.d(e,{i:()=>n});var s=i(97358);function n(t,e){return"no-premultiply-alpha"===e.alphaMode&&s.Q[t]||t}},92604:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});const s=i(51e3)},93656:(t,e,i)=>{"use strict";i.d(e,{r:()=>s});const s="2.0.90"},94719:(t,e,i)=>{"use strict";i.d(e,{a:()=>a});var s=i(10087);const n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function r(t){let e="";for(let i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+=`if(test == ${i}.0){}`);return e}let o=null;function a(){if(o)return o;const t=(0,s.W)();return o=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),o=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=n.replace(/%forloop%/gi,r(t));if(e.shaderSource(i,s),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}}finally{e.deleteShader(i)}return t}(o,t),t.getExtension("WEBGL_lose_context")?.loseContext(),o}},95041:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var s=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(s||{})},95202:(t,e,i)=>{"use strict";i.d(e,{h:()=>o});var s=i(92604),n=i(42026),r=i(96333);class o extends s.A{constructor(t){let{data:e,size:i}=t;const{usage:s,label:r,shrinkToFit:o}=t;super(),this.uid=(0,n.L)("buffer"),this._resourceType="buffer",this._resourceId=(0,n.L)("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e?.byteLength);const a=!!e;this.descriptor={size:i,usage:s,mappedAtCreation:a,label:r},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&r.S.STATIC)}set static(t){t?this.descriptor.usage|=r.S.STATIC:this.descriptor.usage&=~r.S.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t)return void(i&&this.emit("update",this));const s=this._data;this._data=t,this._dataInt32=null,s&&s.length===t.length||!this.shrinkToFit&&s&&t.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=(0,n.L)("resource"),this.emit("change",this))}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}},95920:(t,e,i)=>{"use strict";i.d(e,{M:()=>u});var s=i(30801),n=i(10087);let r;function o(){if(!r){r="mediump";const t=(0,n.W)();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);r=e.precision?"highp":"mediump"}}return r}const a={},l={};const h={stripVersion:function(t,e){return e?t.replace("#version 300 es",""):t},ensurePrecision:function(t,e,i){const s=i?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if("precision"!==t.substring(0,9)){let n=i?e.requestedFragmentPrecision:e.requestedVertexPrecision;return"highp"===n&&"highp"!==s&&(n="mediump"),`precision ${n} float;\n${t}`}return"highp"!==s&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t},addProgramDefines:function(t,e,i){return e?t:i?`\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${t=t.replace("out vec4 finalColor;","")}\n        `:`\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${t}\n        `},setProgramName:function(t,e){let{name:i="pixi-program"}=e,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i=i.replace(/\s+/g,"-"),i+=s?"-fragment":"-vertex";const n=s?a:l;return n[i]?(n[i]++,i+=`-${n[i]}`):n[i]=1,-1!==t.indexOf("#define SHADER_NAME")?t:`${`#define SHADER_NAME ${i}`}\n${t}`},insertVersion:function(t,e){return e?`#version 300 es\n${t}`:t}},c=Object.create(null),d=class t{constructor(e){const i=-1!==(e={...t.defaultOptions,...e}).fragment.indexOf("#version 300 es"),n={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:o()},setProgramName:{name:e.name},addProgramDefines:i,insertVersion:i};let r=e.fragment,a=e.vertex;Object.keys(h).forEach((t=>{const e=n[t];r=h[t](r,e,!0),a=h[t](a,e,!1)})),this.fragment=r,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=(0,s.X)(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const i=`${e.vertex}:${e.fragment}`;return c[i]||(c[i]=new t(e)),c[i]}};d.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let u=d},96225:(t,e,i)=>{"use strict";function s(t,e){if(16777215===t||!e)return e;if(16777215===e||!t)return t;return(((t>>16&255)*(e>>16&255)/255|0)<<16)+(((t>>8&255)*(e>>8&255)/255|0)<<8)+((255&t)*(255&e)/255|0)}i.d(e,{u:()=>s})},96333:(t,e,i)=>{"use strict";i.d(e,{S:()=>s});var s=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(s||{})},96493:(t,e,i)=>{"use strict";i.d(e,{d:()=>s});var s=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(s||{})},96887:(t,e,i)=>{"use strict";i.d(e,{TO:()=>s,Td:()=>r,bO:()=>n});const s=2*Math.PI,n=180/Math.PI,r=Math.PI/180},97358:(t,e,i)=>{"use strict";i.d(e,{K:()=>n,Q:()=>s});const s={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var n=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(n||{})},98152:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});class s{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return e=this._index>0?this._pool[--this._index]:new this._classType,e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}},98656:(t,e,i)=>{"use strict";i.d(e,{l:()=>r});var s=i(60279),n=i(11685);const r=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||(0,s.R)(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=(0,n.z)(t);let r;for(let s=0;s<this.parsers.length;s++){const t=this.parsers[s];if(t.test(e)){r=t.getCacheableAssets(i,e);break}}const o=new Map(Object.entries(r||{}));r||i.forEach((t=>{o.set(t,e)}));const a=[...o.keys()],l={cacheKeys:a,keys:i};i.forEach((t=>{this._cacheMap.set(t,l)})),a.forEach((t=>{const i=r?r[t]:e;this._cache.has(t)&&this._cache.get(t)!==i&&(0,s.R)("[Cache] already has key:",t),this._cache.set(t,o.get(t))}))}remove(t){if(!this._cacheMap.has(t))return void(0,s.R)(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t);e.cacheKeys.forEach((t=>{this._cache.delete(t)})),e.keys.forEach((t=>{this._cacheMap.delete(t)}))}get parsers(){return this._parsers}}},99258:(t,e,i)=>{"use strict";var s=i(98656),n=i(91478),r=i(36904),o=i(86675);const a=[];function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t&&t.resource,i=e?t.resource:t,s=e?t:{resource:t};for(let n=0;n<a.length;n++){const t=a[n];if(t.test(i))return new t(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}n.XO.handleByList(n.Ag.TextureSource,a),o.g.from=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"===typeof t?s.l.get(t):t instanceof r.v?new o.g({source:t}):function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=t&&t.resource,n=i?t.resource:t,r=i?t:{resource:t};if(!e&&s.l.has(n))return s.l.get(n);const a=new o.g({source:l(r)});return a.on("destroy",(()=>{s.l.has(n)&&s.l.remove(n)})),e||s.l.set(n,a),a}(t,e)},r.v.from=l},99530:(t,e,i)=>{"use strict";i.d(e,{w:()=>a});var s=i(2590),n=i(86675),r=i(94719);const o={};function a(t,e){let i=2166136261;for(let s=0;s<e;s++)i^=t[s].uid,i=Math.imul(i,16777619),i>>>=0;return o[i]||function(t,e,i){const a={};let h=0;l||(l=(0,r.a)());for(let s=0;s<l;s++){const i=s<e?t[s]:n.g.EMPTY.source;a[h++]=i.source,a[h++]=i.style}const c=new s.T(a);return o[i]=c,c}(t,e,i)}let l=0}}]);
//# sourceMappingURL=5276.11a2a305.chunk.js.map